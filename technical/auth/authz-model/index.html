<!-- https://squidfunk.github.io/mkdocs-material/customization/#overriding-blocks -->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Flexibility Information System">
      
      
      
        <link rel="canonical" href="https://elhub.github.io/flex-information-system/technical/auth/authz-model/">
      
      
        <link rel="prev" href="../authn-model/">
      
      
        <link rel="next" href="../getting-started/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Authorization model - Flexibility Information System Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authorization-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
    <span>This documentation is work-in-progress and part of the <a href="https://www.euroflex.no/">EuroFlex research project</a>.</span>
    <span>Read more about <a href="/flex-information-system/privacy">privacy and cookies</a></span>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Flexibility Information System Documentation" class="md-header__button md-logo" aria-label="Flexibility Information System Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flexibility Information System Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authorization model
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Flexibility Information System Documentation" class="md-nav__button md-logo" aria-label="Flexibility Information System Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Flexibility Information System Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flexibility Information System
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../privacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Privacy and Cookies
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../concepts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/communication-and-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Communication and Coordination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/conceptual-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conceptual Model and Terminology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/end-user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    End Users
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/grid-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grid Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/notification-and-notice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notification and Notice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/ready-for-market/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ready for Market
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/time-series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time Series
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../guides/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/get-ready-for-market/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Get Ready for Market
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/test-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../processes/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Processes
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Processes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/controllable-unit-lookup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CU Lookup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/controllable-unit-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CU Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/controllable-unit-suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CU Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/controllable-unit-update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CU Update
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/delivery-verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Delivery verification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/revocation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SP Contract Revocation and Termination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-provider-product-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SP Product Application and Qualification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-provider-product-suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SP Product Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-provider-registration-and-approval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SP Registration and Approval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-provider-switching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SP Switching Initiated by New SP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-providing-group-grid-suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPG Grid Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-providing-group-product-application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPG Product Application and Prequalification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-providing-group-product-suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPG Product Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/service-providing-group-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SPG Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processes/system-operator-product-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SO Product Registration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../resources/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Resources
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point_balance_responsible_party/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point Balance Responsible Party
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point_bidding_zone/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point Bidding Zone
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point_end_user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point End User
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point_energy_supplier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point Energy Supplier
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/accounting_point_metering_grid_area/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accounting Point Metering Grid Area
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/controllable_unit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controllable Unit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/controllable_unit_service_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controllable Unit Service Provider
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/controllable_unit_suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controllable Unit Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/controllable_unit_suspension_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controllable Unit Suspension Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/entity_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entity Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Event
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/metering_grid_area/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metering Grid Area
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/notice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/notification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/party/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Party
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/party_membership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Party Membership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/product_type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Type
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_provider_product_application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Provider Product Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_provider_product_application_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Provider Product Application Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_provider_product_suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Provider Product Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_provider_product_suspension_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Provider Product Suspension Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_grid_prequalification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Grid Prequalification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_grid_prequalification_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Grid Prequalification Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_grid_suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Grid Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_grid_suspension_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Grid Suspension Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_membership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Membership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_product_application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Product Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_product_suspension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Product Suspension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/service_providing_group_product_suspension_comment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Service Providing Group Product Suspension Comment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/system_operator_product_type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Operator Product Type
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/technical_resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Resource
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Technical
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Technical
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../identifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identifiers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openapi-schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structure of JSON schemas in the OpenAPI documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../structure-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Structure data from external sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time-series-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time Series Service Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Time
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Auth
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_7" id="__nav_8_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Auth
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authn-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authn-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Authorization model
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Authorization model
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scopes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scopes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scopes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope-assignment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope assignment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#party-type-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Party type check
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-level-authorization-fla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Field Level Authorization (FLA)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-level-authorization-rla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Level Authorization (RLA)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Level Authorization (RLA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-dependent-rla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Time-dependent RLA
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Time-dependent RLA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1-latest-visible-record" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 1: Latest visible record
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-as-of-query" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 2: As-of query
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to interact with the FIS as an API user
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../users-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User creation and access control management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scopes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scopes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scopes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope-assignment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope assignment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#party-type-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        Party type check
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-level-authorization-fla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Field Level Authorization (FLA)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-level-authorization-rla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Level Authorization (RLA)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Level Authorization (RLA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-dependent-rla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Time-dependent RLA
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Time-dependent RLA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1-latest-visible-record" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 1: Latest visible record
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-as-of-query" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 2: As-of query
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="authorization-model">Authorization model</h1>
<p>We are providing a <a href="../../api-design/">resource-oriented main API</a>. Authorization
is understood as allowing a user access to do an action on a resource or its
field.</p>
<p>Our authorization model is based on a deny-by-default principle. This means that
authorization is denied unless explicitly allowed. We then allow certain
<em>actions</em> on <em>resource</em> or <em>field</em> level for a specific <em>party type</em>. The caller
must also have the required <em>scope</em> to perform the action.</p>
<p>You can think of a resource collection as a table. Each rows is a resource. Each
column is a field. We then specify Field Level and Resource Level Authorization
to give access to these resources.</p>
<p>The following examples shows a collection of resources <code>1</code>-<code>5</code>. The resources
have the fields <code>ID</code>, <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code> and <code>E</code>. The colored boxes are read
(green) and update (yellow) policies for <em>one party type</em>. Dotted lines are
field level policies while solid lines are resource level policies.</p>
<p>There are three field level policies that allows read
access to all fields except <code>A</code> and update access to only <code>D</code>.</p>
<p>There are two resource level policies that allows read
access to resources <code>3</code>, <code>4</code> and <code>5</code>, and update access to only <code>5</code>.</p>
<p>Together, these policies allow the party type to read all fields except <code>A</code> of resources
<code>3</code>, <code>4</code> and <code>5</code>, and update only field <code>D</code> of resource <code>5</code>.</p>
<p>In addition to this, the user must have the required scope to perform the action.</p>
<p><img alt="Resource and Field Level Authorization" src="../../../diagrams/auth-table.drawio.png" /></p>
<p>More information about the policies and their implementation can be found in the
following sections.</p>
<h2 id="scopes">Scopes</h2>
<p>Every combination of resource and action has a required scope. When a user makes
a request, the system will check that the session or token has that
scope. The requester can have multiple scopes. No scopes means no
access.</p>
<p>In our system, entities are made <em>members</em> of parties to allow them to assume
the parties and act on behalf of them. The party membership is restricted with a
list of scopes. This allows fine-tuning the access control when the entity
assumes the party. Entity clients, allowing users to log in as entities in an
automated way, also contain scopes to limit what a machine can do in the system.</p>
<p>The purpose of this is e.g. to allow one person to be able to read data in the
system on behalf of a party, while another person can both read and write data.
This fits with the least privilege principle, where we try to give the user the
least amount of access.</p>
<p>A scope shows what the user can do to a specific resource. It is a
colon-separated string on the following format:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">verb</span><span class="p">&gt;</span>:<span class="p">&lt;</span><span class="nt">module</span><span class="p">&gt;</span>[:<span class="p">&lt;</span><span class="nt">resource</span><span class="p">&gt;</span>]...
</code></pre></div>
<p>..and can be read as</p>
<blockquote>
<p>The user can <code>&lt;verb&gt;</code> <code>&lt;resource&gt;</code> in <code>&lt;module&gt;</code>.</p>
</blockquote>
<p>Verb is the privilege or access level. Module and resource typically describe
the <em>asset</em> or <em>path</em> that is being protected are defined below. Resource is
optional and if omitted then it means "all resources".</p>
<h3 id="verb">Verb</h3>
<p>A verb specifies the type of access. The verbs are defined by the actions they
allow on the resource.</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Description</th>
<th>Action(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>read</code></td>
<td>Read-only access</td>
<td>Read</td>
</tr>
<tr>
<td><code>use</code></td>
<td><code>read</code> plus calling RPCs (e.g. lookuo)</td>
<td>Read, Call</td>
</tr>
<tr>
<td><code>manage</code></td>
<td>Full access. <code>use</code> plus changing data</td>
<td>Create, Read, Update, Delete, Call</td>
</tr>
</tbody>
</table>
<p>Since the access increases with <code>read</code> &gt; <code>use</code> &gt; <code>manage</code>, there is also
implicit inheritance. This e.g. means that a user with the <code>use</code> verb implicitly
has the <code>read</code> privilege.</p>
<h3 id="module">Module</h3>
<p>A module is a logical grouping of resources. The currently defined modules are.</p>
<ul>
<li><code>data</code> - This is the data API at <code>/api/</code>, for resources such as controllable
  units, service providing groups, etc.</li>
<li><code>auth</code> - This is the module for auth at <code>/auth/</code>.</li>
</ul>
<h3 id="resource">Resource</h3>
<p>The resource part of the scope is used to make sub-scopes within a module. It is
optional and not yet implemented for clients. When omitted, the scope includes
everything in a the module.</p>
<p>The three dots <code>...</code> in the format above means that resources can be nested, to
create sub-scopes.</p>
<p>Each path on our API has a required scope, and every request is checked to see
that the client has a matching scope.</p>
<h3 id="scope-examples">Scope examples</h3>
<p>The following are a few example scopes.</p>
<ul>
<li>
<p><code>GET /api/v0/controllable_unit/</code> requires <code>read:data:controllable_unit</code>. It is
  also covered by e.g. <code>read:data</code> and <code>use:data</code> but not
  <code>manage:data:technical_resource</code>.</p>
</li>
<li>
<p><code>POST /api/v0/controllable_unit/lookup</code> requires <code>use:data:controllable_unit:lookup</code>.
  It is also covered by e.g. <code>manage:data</code> and <code>use:data:controllable_unit</code>.</p>
</li>
</ul>
<h3 id="scope-assignment">Scope assignment</h3>
<p>Everytime a user changes identity in the system, they get assigned different
scopes.
These scopes are then held in the session/token.</p>
<p>This happens first when they log in as an entity.
If they log in through an entity client, they get the scopes associated to that
client.
Otherwise, they get the default scopes <code>manage:auth</code> and <code>manage:data</code>, which
are sufficient to assume a party and get read-write access to the resources in
the system.</p>
<p>This happens a second time when the user assumes a party.
If they assume a party that they own, then their scopes do not change.
If they assume a party they are a member of, then they get assigned the
<em>intersection</em> of the scopes they had as an entity with the scopes granted by
the membership.
In other words, they keep the most powerful scopes from their entity while still
respecting the limitations set by the party membership.
Unassuming the party will reset the scopes to those the user would be granted if
logging in as an entity (through the entity client they provided, if they did).</p>
<p>This enables administrators to choose what each user can do on behalf of their
organisation, with the option of setting a different limit for each party,
<em>i.e.</em>, set to what extent the user can exploit each responsibility the
organisation has in the market.
But this also allows the administrators for instance to set up a client so that
people can use the API to access the system in a read-only manner, thus reducing
the risks of editing sensitive data by mistake when accessing the system
programmatically.</p>
<h2 id="party-type-check">Party type check</h2>
<p>The party type check is what it says on the tin. It checks that the party type
doing the request is allowed to do the action on the resource. This is an
additional check added on just a few routes.</p>
<h2 id="field-level-authorization-fla">Field Level Authorization (FLA)</h2>
<p>We are basing FLA on an "authorization matrix". It is a table that shows which
actions are allowed for each party type on each resource field. The matrix shows
what each party type or anonymous users can do on each of the fields of the resource.</p>
<p>An example of an authorization matrix is shown below. This table shows that the
<code>id</code> field of resource <code>entity</code> is readable by all. The <code>name</code> field is
readable by all and can be updated and created by the <code>Service Provider</code>.
The <code>number</code> field of resource <code>invoice</code> can be created and read by
<code>Service Provider</code>, and read by <code>End User</code>, but <code>System Operator</code> cannot
interact with this field at all.</p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Field</th>
<th>Service Provider</th>
<th>System Operator</th>
<th>End User</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td>id</td>
<td>R</td>
<td>R</td>
<td>R</td>
</tr>
<tr>
<td>entity</td>
<td>name</td>
<td>CRU</td>
<td>R</td>
<td>R</td>
</tr>
<tr>
<td>invoice</td>
<td>number</td>
<td>RC</td>
<td></td>
<td>R</td>
</tr>
</tbody>
</table>
<p>The permission matrix is displayed as a markdown table in the give resources
docs page.</p>
<p>History resources inherit the authorizations from the main resource.</p>
<h2 id="resource-level-authorization-rla">Resource Level Authorization (RLA)</h2>
<p>Resource level authorization is a way to control access to each resource as a
whole. As an example, a service provider should only be able to see the
controllable units that are assigned to them.</p>
<p>RLA is documented as a set of policies per resource and party type. We document this
as a list of textual policies per type, as shown for Service Provider (SP) and
System Operator (SO) in the example below.</p>
<table>
<thead>
<tr>
<th>Policy key</th>
<th>Policy</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>CU-SP001</td>
<td>Read CU where they are SP. Only for the contract period.</td>
<td>PARTIAL</td>
</tr>
<tr>
<td>CU-SP002</td>
<td>Create new CU.</td>
<td>PARTIAL</td>
</tr>
<tr>
<td>CU-SP003</td>
<td>Update CU where they are current SP.</td>
<td>PARTIAL</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Policy key</th>
<th>Policy</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>CU-SO001</td>
<td>Read and update CU that are connected to AP belonging to SO.</td>
<td>PARTIAL</td>
</tr>
</tbody>
</table>
<p>We name the policies in the format
<code>&lt;Resource&gt;-&lt;Party Type Abbreviation&gt;&lt;Number&gt;</code>. The number is just used as a key
during discussions and serves as a way for us to document in the code what
policy is being implemented. It is also handy for code search.</p>
<p>Status can be one of:</p>
<ul>
<li><code>PROPOSED</code> means that the policy is proposed but not decided.</li>
<li><code>TODO</code> means that the policy is not implemented yet.</li>
<li><code>PARTIAL</code> means that the policy is partially implemented.</li>
<li><code>DONE</code> means that the policy is fully implemented.</li>
</ul>
<p>Policies can be in <code>TODO</code> or <code>PARTIAL</code> state either if we have not gotten to it
yet or the current platform does not support it (e.g. we are missing a
relation/entity).</p>
<h3 id="time-dependent-rla">Time-dependent RLA</h3>
<p>Some combinations of party type and resource have time-dependent access
policies.
In such cases, instead of controlling access in a binary way (the user can or
cannot see the resource based on some condition), access is <em>partially</em> given,
on the part of the timeline where the user has the required contract.
This means that we need to make sure that <em>no stateful operations</em> happening
outside of the allowed partial timeline are visible to the user.
This includes, for instance:</p>
<ul>
<li><em>former versions</em> of records erased before the start of the allowed timeline;</li>
<li><em>newer versions</em> of records introduced after the end of the allowed timeline;</li>
<li>records <em>deleted</em> before the start of the allowed timeline;</li>
<li><em>new</em> records created after the end of the allowed timeline.</li>
</ul>
<p>A typical example is the service provider (SP) on a controllable unit
(CU). The SPs contract on the CU is time-dependent, with a valid from and to
date. This in turn means that the SP should only have update privileges to the
CU during the contract period, but should see the CU even after the contract has
ended. However, an old SP should not be able to see updates to the CU fields
done by a new SP, after their contract has ended.</p>
<p>Several strategies are in use to implement such constraints, simplifications
being possible in some cases depending on which operations are available on the
resource.</p>
<h4 id="method-1-latest-visible-record">Method 1: Latest visible record</h4>
<p>When fields on the resource are <em>not</em> time-dependent, we must use audit history
to provide access when doing <em>read</em> operations on the main collection/resource.
This means that we authorize data stored with record time based on the valid
time.
Access policies are implemented on both the main resource and its history table.
The history view exposed in the API makes a union of both, so we can see all
present and past records, all filtered by the policies we want on the resource.</p>
<p>Then, we can pick from this collection based on <em>time</em>.
For instance, we can see which records were active at a given time in the past
by filtering the <em>record time</em> on each line.</p>
<p>The simplest filtering rule we can use is to just pick the
<em>latest visible record</em>.
This ensures that a user who can read the current records will see them instead
of historic values, and that conversely, if they cannot see the new ones, they
will see historic values presented as current records.</p>
<p>Let us take the example of the controllable unit resource where access for
service providers is based on CUSP contracts.</p>
<p><img alt="Time-dependent RLA" src="../../../diagrams/time_dependent_authorization.png" /></p>
<p>In this example we have 3 records in the data history for the CU. <code>3</code> is the
current record. Two service providers, <code>A</code> and <code>B</code>, have had contracts on the
CU. <code>B</code> is the current SP. Each of the service providers will see the latest
record that <em>overlaps with the end date on their latest contract</em>.</p>
<p>So, when each of the service providers does a <code>GET /controllable_unit/{id}</code> they
will see different records.</p>
<ul>
<li><code>A</code> will see record <code>2</code>.</li>
<li><code>B</code> will see record <code>3</code>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Delete operation</p>
<p>A drawback of this method is that it does not handle <em>deleted</em> records well.
Indeed, on resources with history enabled, when records are deleted, they
are removed from the main table but kept in the history table.</p>
<p>This means that the <em>latest visible version</em> filtering method takes the
version of the record right before deletion and shows it in the main
resource, instead of not showing it at all.</p>
<p>Therefore, the current method cannot be used for resources supporting a
delete operation.</p>
</div>
<h4 id="method-2-as-of-query">Method 2: <em>As-of</em> query</h4>
<p>For resources that can be deleted, we introduce a more advanced mechanism.
Instead of taking the latest visible version of each record, we take all visible
records and only keep those that were <em>active at a certain date</em>, this date
being the latest point in the past where the user had a contract authorising
read access on the resource.
We call it the <em>as-of timestamp</em>, because conceptually this turns queries to
the resource into queries <em>as of</em> this specific timestamp.</p>
<p>Let us take the example of a resource managed in turn by 4 users: D, A, B, C,
and then D again.</p>
<p><img alt="asof_example" src="../../../diagrams/asof_example.png" /></p>
<p>The resource has 3 records.
The first one is updated (marked by a colour change), then deleted while B
manages the resource; the second one is updated by A; the last one is created by
B and never updated.</p>
<p>We suppose the current date is 2020-07-09, midnight (marked with a change of
background color).</p>
<p>We need a definition for the as-of timestamp.
Let us take the timeline with all contracts for a given user.
Then we can define the as-of timestamp as the latest past point of this
timeline, <em>i.e.</em>:</p>
<div class="highlight"><pre><span></span><code>min(max(contract_timeline), now)
</code></pre></div>
<p>This means that this date is the end of A's contract for A, and this timestamp
is just <em>now</em> for all others (C and D having contracts in the future).
Both timestamps are marked with a dotted line.</p>
<p>This means that a query from A will give only 2 records, as R3 was not created
when A stopped being in charge.
Moreover, it will give R1 in its former state, because the update also happened
after their contract came to an end.</p>
<p>However, a query from one of the other users will give the latest state, <em>i.e.</em>,
only R2 and R3, with R2 in its latest version.</p>
<p>It is possible to change or refine the definition of the as-of timestamp as
needed.
For instance, if future contracts (like the ones of C and D) are too far in the
future, it may be judged unfair to show the current data of the resource.
The current example is simplified by taking contracts that are very close to
each other in time.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.indexes", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3.2.2/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>