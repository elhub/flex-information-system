---
resources:
  - id: controllable_unit
    acronym: CU
    name: Controllable Unit
    summary: Controllable unit
    description: Controllable unit
    operations:
      - list
      - read
      - create
      - update
    history:
      - list
      - read
    audit: true
    generate_views: false
    properties:
      id:
        description: Unique surrogate key.
        format: bigint
        type: integer
        readOnly: true
        example: 12
        x-intl:
          en: ID
          nb: ID
          nn: ID
      business_id:
        description: Unique business identifier for the controllable unit.
        format: text
        type: string
        # yamllint disable-line rule:line-length
        pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$'
        readOnly: true
        example: '53919b79-876f-4dad-8bde-b29368367604'
        x-intl:
          en: Business ID
          nb: Forretnings-ID
          nn: Forretnings-ID
      name:
        description: Free text name of the controllable unit.
        format: text
        type: string
        maxLength: 512
        example: 'Car Charger #34'
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      start_date:
        description: >-
          The usage date when the controllable unit is first active.
        format: date
        type: string
        nullable: true
        example: '2024-05-17'
        x-intl:
          en: Start date
          nb: Startdato
          nn: Startdato
      status:
        description: The status of the controllable unit.
        x-details: >-
          Always `new` when created. Can then be updated to the other values.
          Once `terminated`, only editable by a FIS operator.
        format: text
        type: string
        default: new
        enum:
          - new
          - active
          - inactive
          - terminated
        example: active
        x-intl:
          en: Status
          nb: Status
          nn: Status
      regulation_direction:
        description: >-
          The regulation direction of the controllable unit. `up` means it can
          be used to increase production or decrease consumption, while `down`
          means to decrease production or increase consumption.
        x-details: >-
          `up`
        format: text
        type: string
        enum:
          - up
          - down
          - both
        example: up
        x-intl:
          en: Regulation direction
          nb: Reguleringsretning
          nn: Reguleringsretning
      maximum_available_capacity:
        description: >-
          Maximum continuous active power that the controllable unit can produce
          or consume, i.e. deliver for balancing and congestion services, in kilowatts.
        format: decimal
        type: number
        minimum: 0
        maximum: 999999.999
        multipleOf: 0.001
        example: 3.5
        x-intl:
          en: Maximum available capacity
          nb: Maksimal tilgjengelig kapasitet
          nn: Maksimal tilgjengeleg kapasitet
      is_small:
        description: >-
          Whether the controllable unit is small or not, following NCDR.
        format: boolean
        type: boolean
        readOnly: true
        example: true
        x-intl:
          en: Small?
          nb: Liten?
          nn: Liten?
      minimum_duration:
        description: >-
          The minimum activation duration in seconds.
        format: bigint
        type: integer
        minimum: 0
        nullable: true
        example: 30
        x-intl:
          en: Minimum duration
          nb: Minimumsvarighet
          nn: Minimumsvarigheit
      maximum_duration:
        description: >-
          The maximum activation duration in seconds.
        format: bigint
        type: integer
        minimum: 0
        nullable: true
        example: 1200
        x-intl:
          en: Maximum duration
          nb: Maksimumsvarighet
          nn: Maksimumsvarigheit
      recovery_duration:
        description: >-
          The minimum recovery duration between activations in seconds.
        format: bigint
        type: integer
        minimum: 0
        nullable: true
        example: 3600
        x-intl:
          en: Recovery duration
          nb: Gjenopprettingsvarighet
          nn: Gjenopprettingsvarigheit
      ramp_rate:
        description: >-
          The rate of power per unit of time to reach empty or full power
          for the controllable unit, in kilowatts per minute.
        type: number
        format: decimal
        minimum: 0.001
        multipleOf: 0.001
        nullable: true
        example: 0.1
        x-intl:
          en: Ramp rate
          nb: Effektendringshastighet
          nn: Effektendringshastigheit
      accounting_point_id:
        description: >-
          Reference to the accounting point that the controllable unit is
          connected to.
        format: bigint
        type: integer
        nullable: false
        x-no-update: true
        x-foreign-key:
          resource: accounting_point
          field: id
        example: 10289
        x-intl:
          en: Accounting point ID
          nb: Avregningspunkt-ID
          nn: Avregningspunkt-ID
      grid_node_id:
        description: >-
          Reference to the node that the controllable unit is connected to.
        format: text
        type: string
        # yamllint disable-line rule:line-length
        pattern: '^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$'
        nullable: true
        example: '53919b79-876f-4dad-8bde-b29368367604'
        x-intl:
          en: Grid node ID
          nb: Nettnode-ID
          nn: Nettnode-ID
      grid_validation_status:
        description: The grid validation status of the controllable unit.
        format: text
        type: string
        default: pending
        enum:
          - pending
          - in_progress
          - incomplete_information
          - validated
          - validation_failed
        example: validated
        x-intl:
          en: Grid validation status
          nb: Nettvalideringsstatus
          nn: Nettvalideringsstatus
      grid_validation_notes:
        description: Free text notes on the current grid validation status.
        format: text
        type: string
        maxLength: 512
        nullable: true
        example: null
        x-intl:
          en: Grid validation notes
          nb: Nettvalideringsnotater
          nn: Nettvalideringsnotat
      validated_at:
        description: When the controllable unit was last validated.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2022-08-08 12:00:00 CET
        x-intl:
          en: Validated at
          nb: Validert ved
          nn: Validert ved

  - id: controllable_unit_suspension
    acronym: CUS
    summary: Controllable Unit Suspension
    description: >-
      The relation allowing an impacted system operator to temporarily suspend a
      controllable unit.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: true
    history:
      - list
      - read
    history_rls: false
    comments: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 74
        x-intl:
          en: ID
          nb: ID
          nn: ID
      controllable_unit_id:
        description: >-
          Reference to the suspended controllable unit.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: controllable_unit
          field: id
        example: 2
        x-intl:
          en: Controllable Unit
          nb: Kontrollerbar enhet
          nn: Kontrollerbar eining
      impacted_system_operator_id:
        description: >-
          Reference to the impacted system operator suspending the controllable
          unit.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 7
        required: false
        x-details: Defaults to the system operator creating the resource.
        x-intl:
          en: Impacted system operator
          nb: Berørt systemoperatør
          nn: Påverka systemoperatør
      reason:
        description: The reason for the suspension.
        format: text
        type: string
        enum:
          - compromises_safe_operation
          - other
        example: compromises_safe_operation
        x-intl:
          en: Reason
          nb: Årsak
          nn: Årsak

  - id: controllable_unit_service_provider
    acronym: CUSP
    summary: Relation between controllable unit and service provider
    description: Relation between controllable unit and service provider
    operations:
      - list
      - read
      - create
      - update
      - delete
    history:
      - list
      - read
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate key.
        format: bigint
        type: integer
        readOnly: true
        example: 7
        x-intl:
          en: ID
          nb: ID
          nn: ID
      controllable_unit_id:
        description: >-
          Reference to the controllable unit this relation links to a
          service provider.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: controllable_unit
          field: id
        example: 2
        x-intl:
          en: Controllable unit
          nb: Kontrollerbar enhet
          nn: Kontrollerbar eining
      service_provider_id:
        description: >-
          Reference to the `party` (service provider) this relation links to
          a controllable unit.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 78
        x-intl:
          en: Service provider
          nb: Tjenesteleverandør
          nn: Tenesteleverandør
      end_user_id:
        description: >-
          Technical ID of the end user behind the accounting point.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        x-intl:
          en: End user
          nb: Sluttbruker
          nn: Sluttbrukar
      contract_reference:
        description: >-
          The service providers internal reference to the contract with the
          end user. Typically an internal identifier to a stored document or
          consent record.
        x-details: >-
          The content of this field will not be checked by the system, but is
          intended to make sure that the service has a digitally stored proof
          of their contract with the end user on the controllable unit.
        format: text
        type: string
        maxLength: 128
        nullable: false
        example: '123e4567-e89b-12d3-a456-426614174000'
        x-intl:
          en: Contract reference
          nb: Kontraktsreferanse
          nn: Kontraktsreferanse
      valid_from:
        description: >-
          The date from which the relation between the controllable unit and
          the service provider is valid. Midnight aligned on Norwegian timezone.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2022-08-08 00:00:00 CET
        x-intl:
          en: Valid from
          nb: Gyldig fra
          nn: Gyldig frå
      valid_to:
        description: >-
          The date until which the relation between the controllable unit and
          the service provider is valid. Midnight aligned on Norwegian timezone.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2022-09-10 00:00:00 CET
        x-intl:
          en: Valid to
          nb: Gyldig til
          nn: Gyldig til

  - id: service_providing_group
    acronym: SPG
    summary: Service providing group
    description: Group of controllable units
    operations:
      - list
      - read
      - create
      - update
    history:
      - list
      - read
    history_rls: true
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate key.
        format: bigint
        type: integer
        readOnly: true
        example: 4
        x-intl:
          en: ID
          nb: ID
          nn: ID
      name:
        description: >-
          Free text name of the service providing group.
        format: text
        type: string
        maxLength: 128
        example: 'Batteries #09'
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      service_provider_id:
        description: >-
          Reference to the `party` (service provider) managing the group.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 17
        x-intl:
          en: Service provider
          nb: Tjenesteleverandør
          nn: Tenesteleverandør
      bidding_zone:
        description: >-
          The bidding zone that restricts which CUs that can be added to the group.
          Also known as scheduling area or price area for TSO.
        format: text
        type: string
        enum:
          - NO1
          - NO2
          - NO3
          - NO4
          - NO5
        example: NO3
        x-intl:
          en: Bidding zone
          nb: Budsone
          nn: Budsone
      status:
        description: The status of the group.
        x-details: >-
          Always `new` when created. Can then be updated to the other values.
          Once `terminated`, only editable by a FIS operator.
        format: text
        type: string
        default: new
        enum:
          - new
          - active
          - inactive
          - terminated
        example: active
        x-intl:
          en: Status
          nb: Status
          nn: Status

  - id: service_providing_group_membership
    acronym: SPGM
    summary: >-
      Membership relation of controllable unit in service providing group
    description: >-
      Membership relation of controllable unit in service providing group
    operations:
      - list
      - read
      - create
      - update
      - delete
    history:
      - list
      - read
    history_rls: false
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate key.
        format: bigint
        type: integer
        readOnly: true
        example: 27
        x-intl:
          en: ID
          nb: ID
          nn: ID
      controllable_unit_id:
        description: >-
          Reference to the controllable unit this relation links to a
          service providing group.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: controllable_unit
          field: id
        example: 6
        x-intl:
          en: Controllable unit
          nb: Kontrollerbar enhet
          nn: Kontrollerbar eining
      service_providing_group_id:
        description: >-
          Reference to the service providing group this relation links to a
          controllable unit.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: service_providing_group
          field: id
        example: 55
        x-intl:
          en: Service providing group
          nb: Tjenestelevererende gruppe
          nn: Tenestelevererande gruppe
      valid_from:
        description: >-
          The date from which the relation between the controllable unit and
          the service providing group is valid. Midnight aligned on Norwegian
          timezone.
        format: timestamp with time zone
        type: string
        example: 2022-08-08 00:00:00 CET
        x-intl:
          en: Valid from
          nb: Gyldig fra
          nn: Gyldig frå
      valid_to:
        description: >-
          The date until which the relation between the controllable unit and
          the service providing group is valid. Midnight aligned on Norwegian
          timezone.
        format: timestamp with time zone
        type: string
        nullable: true
        example: null
        x-intl:
          en: Valid to
          nb: Gyldig til
          nn: Gyldig til

  - id: service_providing_group_grid_prequalification
    acronym: SPGGP
    summary: >-
      Grid prequalification for service providing group
    description: >-
      Grid prequalification for service providing group
    operations:
      - list
      - read
      - create
      - update
    history:
      - list
      - read
    history_rls: true
    comments: true
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate key.
        format: bigint
        type: integer
        readOnly: true
        example: 27
        x-intl:
          en: ID
          nb: ID
          nn: ID
      service_providing_group_id:
        description: >-
          Reference to the service providing group whose grid prequalification
          is tracked by the current resource.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: service_providing_group
          field: id
        example: 55
        x-intl:
          en: Service providing group
          nb: Tjenestelevererende gruppe
          nn: Tenestelevererande gruppe
      impacted_system_operator_id:
        description: >-
          Reference to the `party` that is the impacted system operator.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 7
        x-intl:
          en: Impacted system operator
          nb: Berørt systemoperatør
          nn: Påverka systemoperatør
      status:
        description: >-
          The status of the grid prequalification for this service providing
          group.
        x-details: >-
          Always `requested` when created. Can then be updated to the other
          values.
        format: text
        type: string
        default: requested
        enum:
          - requested
          - in_progress
          - conditionally_approved
          - approved
          - not_approved
        example: in_progress
        x-intl:
          en: Status
          nb: Status
          nn: Status
      prequalified_at:
        description: When the current grid prequalification was last approved.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2023-01-08 10:00:00 CET
        x-intl:
          en: Prequalified at
          nb: Prekvalifisert ved
          nn: Prekvalifisert ved

  - id: service_providing_group_grid_suspension
    acronym: SPGGS
    summary: Service Providing Group Grid Suspension
    description: >-
      The relation allowing an impacted system operator to temporarily suspend a
      service providing group from delivering services.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: true
    comments: true
    history:
      - list
      - read
    history_rls: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 49
        x-intl:
          en: ID
          nb: ID
          nn: ID
      impacted_system_operator_id:
        description: >-
          Reference to the impacted system operator suspending the service
          providing group.
        format: bigint
        type: integer
        x-no-update: true
        required: false
        x-details: Defaults to the system operator creating the resource.
        x-foreign-key:
          resource: party
          field: id
        example: 7
        x-intl:
          en: Impacted system operator
          nb: Berørt systemoperatør
          nn: Påverka systemoperatør
      service_providing_group_id:
        description: Reference to the service providing group being suspended.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: service_providing_group
          field: id
        example: 13
        x-intl:
          en: Service providing group
          nb: Tjenestelevererende gruppe
          nn: Tenestelevererande gruppe
      reason:
        description: The reason for the suspension.
        format: text
        type: string
        enum:
          - breach_of_conditions
          - significant_group_change
          - other
        example: significant_group_change
        x-intl:
          en: Reason
          nb: Årsak
          nn: Årsak

  - id: entity
    acronym: ENT
    summary: Entity
    # yamllint disable rule:line-length
    description: |-
      Entity - Natural or legal person

      An entity is a natural or legal person that can be a party in the Flexibility Information System.

      Example entity types:

      * Person
      * Organisation
    # yamllint enable rule:line-length
    operations:
      - list
      - read
      - create
      - update
    audit: true
    generate_views: true
    properties:
      id:
        description: |-
          Unique surrogate identifier.

          Note:
          This is a Primary Key.
        format: bigint
        type: integer
        readOnly: true
        example: 14
        x-intl:
          en: ID
          nb: ID
          nn: ID
      business_id:
        description: >-
          The business identifier of the entity. Format depends on
          `business_id_type`.
        format: text
        type: string
        x-no-update: true
        example: '13370000000'
        x-intl:
          en: Business ID
          nb: Forretnings-ID
          nn: Forretnings-ID
      business_id_type:
        description: >-
          The type of the business identifier.
        format: text
        type: string
        x-no-update: true
        example: pid
        x-intl:
          en: Business ID type
          nb: Forretnings-ID-type
          nn: Forretnings-ID-type
      name:
        description: Name of the entity. Maximum 128 characters.
        format: text
        type: string
        example: John Smith
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      type:
        description: The type of the entity, e.g Person, Organisation
        format: text
        type: string
        x-no-update: true
        example: person
        x-intl:
          en: Type
          nb: Type
          nn: Type

  - id: entity_client
    acronym: ECL
    summary: Entity client
    description: >-
      Client linked to an entity for client credentials and JWT grant
      authentication methods.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 14
        x-intl:
          en: ID
          nb: ID
          nn: ID
      entity_id:
        description: Reference to the entity that this client is attached to.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: entity
          field: id
        example: 30
        x-intl:
          en: Entity
          nb: Entitet
          nn: Entitet
      name:
        description: Name of the client.
        format: text
        type: string
        maxLength: 256
        nullable: true
        example: Laptop
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      client_id:
        description: >-
          The identifier of the entity. For use with client credentials
          authentication method.
        format: text
        type: string
        example: addr@flex.test
        x-intl:
          en: Client ID
          nb: Klient-ID
          nn: Klient-ID
      party_id:
        description: >-
          Reference to the party this client allows to assume. A null value
          means the client cannot assume any party.
        format: bigint
        type: integer
        x-foreign-key:
          resource: party
          field: id
        example: 30
        x-intl:
          en: Party
          nb: Party
          nn: Party
      scopes:
        description: >-
          List of scopes granted to the user when it logs in as an entity or
          when it acts as the party. When assuming a party through party
          membership, the least privileged set of scopes will be kept.

          Scopes are inspired from OAuth 2.0 and allow refinement of access
          control and privilege delegation mechanisms.
        type: array
        items:
          "$ref": "#/components/schemas/auth_scope"
        nullable: false
        example: ["read:data"]
        x-intl:
          en: Scopes
          nb: Scopes
          nn: Scopes
      client_secret:
        description: >-
          The secret of the entity. For use with client credentials
          authentication method. Input as plain text but stored encrypted.
        format: text
        type: string
        minLength: 12
        nullable: true
        example: mysupersecretpassword
        x-intl:
          en: Client secret
          nb: Klienthemmelighet
          nn: Klientløyndom
      public_key:
        description:
          The public key of the entity (X.509 SubjectPublicKeyInfo). For use
          with JWT grant authentication method.
        format: text
        type: string
        nullable: true
        pattern: '^-----BEGIN PUBLIC KEY-----\nMIIB[-A-Za-z0-9+/\n]*={0,3}\n-----END PUBLIC KEY-----$'
        example: |-
          -----BEGIN PUBLIC KEY-----
          MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAq3DnhgYgLVJknvDA3clA
          TozPtjI7yauqD/ZuqgZn4KzzzkQ4BzJar4jRygpzbghlFn0Luk1mdVKzPUgYj0V
          kbRlHyYfxahbgOHixOOnXkKXrtZW7yWGjXPqy/ZJ/+kFBNPAzxy7fDuAzKfU3Rn5
          0sBakg95pua14W1oE4rtd4/U+sg2maCq6HgGdCLLxRWwXA8IBtvHZ48i6kxiz9tu
          -----END PUBLIC KEY-----
        x-intl:
          en: Public key
          nb: Offentlig nøkkel
          nn: Offentleg nøkkel

  - id: party
    acronym: PTY
    summary: Party
    # yamllint disable rule:line-length
    description: |-
      The body that interacts with the Flexibility Information System

      A party is the thing that is authorized to access or modify data in the Flexiblity Information System.

      Example party types:

      * Service Provider
      * System Operator
      * End User
    # yamllint enable rule:line-length
    operations:
      - list
      - read
      - create
      - update
    history:
      - list
      - read
    history_rls: true
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 11
        x-intl:
          en: ID
          nb: ID
          nn: ID
      business_id:
        description: >-
          The business identifier of the party. Format depends on
          `business_id_type`.
        format: text
        type: string
        x-no-update: true
        required: false
        example: '1337099000000'
        x-intl:
          en: Business ID
          nb: Forretnings-ID
          nn: Forretnings-ID
      business_id_type:
        description: >-
          The type of the business identifier.
        format: text
        type: string
        x-no-update: true
        default: uuid
        enum:
          - gln
          - uuid
          - eic_x
          - org
        example: gln
        x-intl:
          en: Business ID type
          nb: Forretnings-ID-type
          nn: Forretnings-ID-type
      entity_id:
        description: >-
          Reference to the entity that is the parent of the party.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: entity
          field: id
        example: 30
        x-intl:
          en: Entity
          nb: Entitet
          nn: Entitet
      name:
        description: Name of the party. Maximum 128 characters.
        format: text
        type: string
        example: Flex Energy Supplier
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      role:
        description: >-
          The role of the party. Currently maps to 1:1 to `type`.
          E.g. system_operator, service_provider.
        format: text
        type: string
        x-no-update: true
        example: flex_energy_supplier
        x-intl:
          en: Role
          nb: Rolle
          nn: Rolle
      type:
        description: >-
          The type of the party, e.g SystemOperator, ServiceProvider
        format: text
        type: string
        x-no-update: true
        example: energy_supplier
        x-intl:
          en: Type
          nb: Type
          nn: Type
      status:
        description: The status of the party.
        format: text
        type: string
        default: new
        enum:
          - new
          - active
          - inactive
          - suspended
          - terminated
        example: active
        x-intl:
          en: Status
          nb: Status
          nn: Status

  - id: party_membership
    acronym: PTYM
    summary: Party Membership
    description: |-
      The relation between a party and entity.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: true
    history:
      - list
      - read
    history_rls: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 44
        x-intl:
          en: ID
          nb: ID
          nn: ID
      party_id:
        description: >-
          Reference to the party that the membership links to an entity.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 379
        x-intl:
          en: Party
          nb: Party
          nn: Party
      entity_id:
        description: >-
          Reference to the entity that the party represents.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: entity
          field: id
        example: 30
        x-intl:
          en: Entity
          nb: Entitet
          nn: Entitet
      scopes:
        description: >-
          List of scopes granted to the entity when it acts as the party.
          Scopes are inspired from OAuth 2.0 and allow refinement of access
          control and privilege delegation mechanisms.
        type: array
        items:
          "$ref": "#/components/schemas/auth_scope"
        nullable: false
        example: ["read:data"]
        x-intl:
          en: Scopes
          nb: Scopes
          nn: Scopes

  - id: identity
    acronym: ID
    summary: Identity
    description: >-
      Resource uniquely identifying a user by linking its entity and the
      potentially assumed party.
    operations:
      - read
      - list
    generate_views: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 44
      entity_id:
        description: >-
          Reference to the entity using the identity.
        format: bigint
        type: integer
        readOnly: true
        x-foreign-key:
          resource: entity
          field: id
        example: 3
      entity_name:
        description: >-
          Name of the entity using the identity.
        format: text
        type: string
        readOnly: true
        x-foreign-key:
          resource: entity
          field: name
        example: Martin Andersen
      party_id:
        description: >-
          Reference to the party assumed by the entity.
        format: bigint
        type: integer
        readOnly: true
        nullable: true
        x-foreign-key:
          resource: party
          field: id
        example: 17
      party_name:
        description: >-
          Name of the party assumed by the entity.
        format: text
        type: string
        readOnly: true
        nullable: true
        x-foreign-key:
          resource: party
          field: name
        example: Andersen SO

  - id: technical_resource
    acronym: TR
    summary: Technical Resource
    description: Technical unit being part of a controllable unit.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: false
    history:
      - list
      - read
    history_rls: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      name:
        description: Name of the technical resource. Maximum 128 characters.
        format: text
        type: string
        example: 'Battery Unit #1'
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      controllable_unit_id:
        description: >-
          Reference to the controllable unit that this technical resource
          belongs to.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: controllable_unit
          field: id
        example: 37
        x-intl:
          en: Controllable Unit
          nb: Kontrollerbar enhet
          nn: Kontrollerbar eining
      details:
        description: >-
          Free text details about the technical resource.
        format: text
        type: string
        maxLength: 1024
        nullable: true
        example: |-
          Make: ACME
          Model: Car Charger 3000
        x-intl:
          en: Details
          nb: Detaljer
          nn: Detaljar

  - id: event
    acronym: EVENT
    summary: Event
    description: Event happening in the system.
    operations:
      - list
      - read
    generate_views: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      specversion:
        description: >-
          The version of the CloudEvents specification followed by the resource.
        format: text
        type: string
        readOnly: true
        example: '1.0'
        x-intl:
          en: Specification version
          nb: Spesifikasjonsversjon
          nn: Spesifikasjonsversjon
      time:
        description: The time at which the event was generated.
        format: timestamp with time zone
        type: string
        readOnly: true
        example: 2022-08-08 12:00:00 CET
        x-intl:
          en: Time
          nb: Tidspunkt
          nn: Tidspunkt
      type:
        description: The type of the event.
        format: text
        type: string
        pattern: '^no.elhub.flex.'
        readOnly: true
        example: 'no.elhub.flex.service_providing_group.update'
        x-intl:
          en: Type
          nb: Type
          nn: Type
      source:
        description: The URI of the resource concerned by the event.
        format: text
        type: string
        pattern: '^(\/([a-z][a-z_]*|[0-9]+))+$'
        readOnly: true
        example: '/controllable_unit/4'
        x-intl:
          en: Source
          nb: Kilde
          nn: Kjelde
      subject:
        description: >-
          The URI of the specific subject of the event within the resource
          pointed by `source`.
        x-details: >-
          Used in cases where an event happens on a subresource, but we still
          want to consider it as an event on the main resource, for clarity.
        format: text
        type: string
        nullable: true
        readOnly: true
        example: '/technical_resource/2'
        x-intl:
          en: Subject
          nb: Emne
          nn: Emne
      data:
        description: The data of the event.
        format: text
        type: string
        readOnly: true
        nullable: true
        example: null
        x-intl:
          en: Data
          nb: Data
          nn: Data

  - id: notification
    acronym: NOT
    summary: Notification
    description: Notification about an event happening in the system.
    operations:
      - list
      - read
      - update
    audit: true
    generate_views: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      acknowledged:
        description: Whether the notification was acknowledged by the target user.
        format: boolean
        type: boolean
        example: false
        x-intl:
          en: Acknowledged
          nb: Bekreftet
          nn: Bekrefta
      event_id:
        description: Reference to the event notified by this resource.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: event
          field: id
        example: 37
        x-intl:
          en: Event ID
          nb: Hendelse-ID
          nn: Hending-ID
      party_id:
        description: Reference to the party concerned by this notification.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 37
        x-intl:
          en: Party
          nb: Party
          nn: Party

  - id: accounting_point
    acronym: AP
    summary: Accounting Point
    description: Accounting point for a controllable unit.
    operations:
      - read
      - list
    generate_views: false
    audit: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
      business_id:
        description: >-
          The GSRN metering point id of the accounting point.
        format: text
        type: string
        readOnly: true
        pattern: '^[1-9][0-9]{17}$'
        example: '709000000000000057'
      system_operator_id:
        description: >-
          The system operator of the accounting point.
        format: bigint
        type: integer
        readOnly: true
        x-foreign-key:
          resource: party
          field: id

  - id: accounting_point_balance_responsible_party
    acronym: APBRP
    summary: Accounting Point Balance Responsible Party
    description: >-
      Relation linking a balance responsible party to an accounting point.
    operations:
      - list
    generate_views: false
    audit: false
    properties:
      accounting_point_id:
        description: The ID of the accounting point.
        format: bigint
        type: integer
        readOnly: true
        example: 245
        x-foreign-key:
          resource: accounting_point
          field: id
      balance_responsible_party_id:
        description: The balance responsible party of the accounting point.
        format: bigint
        type: integer
        example: 37
        readOnly: true
        x-foreign-key:
          resource: party
          field: id
      energy_direction:
        description: >-
          The direction of the effect on the balance that the BRP takes
          responsibility for.
        format: text
        type: string
        readOnly: true
        example: 'consumption'
        enum:
          - consumption
          - production
      valid_from:
        description: >-
          The date from which the relation between the accounting point and
          the balance responsible party is valid. Midnight aligned on Norwegian
          timezone.
        format: timestamp with time zone
        type: string
        readOnly: true
        example: 2022-08-08 00:00:00 CET
      valid_to:
        description: >-
          The date until which the relation between the accounting point and
          the balance responsible party is valid. Midnight aligned on Norwegian
          timezone.
        format: timestamp with time zone
        type: string
        readOnly: true
        nullable: true
        example: null

  - id: accounting_point_energy_supplier
    acronym: APES
    summary: Accounting Point Energy Supplier
    description: >-
      Relation linking an energy supplier to an accounting point.
    operations:
      - list
    generate_views: false
    audit: false
    properties:
      accounting_point_id:
        description: The ID of the accounting point.
        format: bigint
        type: integer
        readOnly: true
        example: 45
        x-foreign-key:
          resource: accounting_point
          field: id
      energy_supplier_id:
        description: The energy supplier of the accounting point.
        format: bigint
        type: integer
        example: 7
        readOnly: true
        x-foreign-key:
          resource: party
          field: id
      valid_from:
        description: >-
          The date from which the relation between the accounting point and
          the energy supplier is valid. Midnight aligned on Norwegian timezone.
        format: timestamp with time zone
        type: string
        readOnly: true
        example: 2023-09-09 00:00:00 CET
      valid_to:
        description: >-
          The date until which the relation between the accounting point and
          the energy supplier is valid. Midnight aligned on Norwegian timezone.
        format: timestamp with time zone
        type: string
        readOnly: true
        nullable: true
        example: null

  - id: product_type
    acronym: PT
    summary: Product Type
    description: Product type.
    operations:
      - read
      - list
    generate_views: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 4
        x-intl:
          en: ID
          nb: ID
          nn: ID
      business_id:
        description: The code for this product type.
        format: text
        type: string
        readOnly: true
        example: 'manual_congestion'
        x-intl:
          en: Business ID
          nb: Forretnings-ID
          nn: Forretnings-ID
      name:
        description: The name of the product type.
        format: text
        type: string
        maxLength: 64
        readOnly: true
        example: 'Manual Congestion'
        x-intl:
          en: Name
          nb: Navn
          nn: Namn
      service:
        description: The service offered by the product type.
        format: text
        type: string
        readOnly: true
        example: 'congestion management'
        x-intl:
          en: Service
          nb: Tjeneste
          nn: Teneste
      products:
        description: Examples of products belonging to this product type.
        format: text
        type: string
        readOnly: true
        example: 'LongFlex, ShortFlex'
        x-intl:
          en: Products
          nb: Produkter
          nn: Produkt

  - id: system_operator_product_type
    acronym: SOPT
    summary: System Operator Product Type
    description: >-
      Relation between a system operator and a product type they want to buy.
    operations:
      - list
      - read
      - create
      - update
    audit: true
    generate_views: true
    history:
      - list
      - read
    history_rls: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      system_operator_id:
        description: Reference to the system operator.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 37
        x-intl:
          en: System operator
          nb: Systemoperatør
          nn: Systemoperatør
      product_type_id:
        description: Reference to the product type.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: product_type
          field: id
        example: 8
        x-intl:
          en: Product type
          nb: Produkttype
          nn: Produkttype
      status:
        description: The status of the relation.
        format: text
        type: string
        default: active
        enum:
          - active
          - inactive
        example: active
        x-intl:
          en: Status
          nb: Status
          nn: Status

  - id: service_provider_product_application
    acronym: SPPA
    summary: Service Provider Product Application
    description: >-
      Relation between a service provider and a system operator, for the SP to
      apply for delivering the SO some of the types of product they want to buy
      on a flexibility market.
    operations:
      - list
      - read
      - create
      - update
    audit: true
    generate_views: true
    comments: true
    history:
      - list
      - read
    history_rls: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      service_provider_id:
        description: Reference to the service provider.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 18
        x-intl:
          en: Service provider
          nb: Tjenesteleverandør
          nn: Tenesteleverandør
      system_operator_id:
        description: Reference to the system operator.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 39
        x-intl:
          en: System operator
          nb: Systemoperatør
          nn: Systemoperatør
      product_type_ids:
        description: References to the product types.
        type: array
        items:
          format: bigint
          type: integer
        x-foreign-key:
          resource: product_type
          field: id
        example: [2, 4, 5]
        x-intl:
          en: Product types
          nb: Produkttyper
          nn: Produkttypar
      status:
        description: The status of the application.
        format: text
        type: string
        default: requested
        enum:
          - requested
          - in_progress
          - communication_test
          - not_qualified
          - qualified
        example: in_progress
        x-intl:
          en: Status
          nb: Status
          nn: Status
      qualified_at:
        description: When the product application was last validated.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2022-08-08 12:00:00 CET
        x-intl:
          en: Qualified at
          nb: Kvalifisert ved
          nn: Kvalifisert ved

  - id: service_provider_product_suspension
    acronym: SPPS
    summary: Service Provider Product Suspension
    description: >-
      The relation allowing a procuring system operator to temporarily suspend a
      service provider from delivering them products of the given types.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: true
    comments: true
    history:
      - list
      - read
    history_rls: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 74
        x-intl:
          en: ID
          nb: ID
          nn: ID
      procuring_system_operator_id:
        description: >-
          Reference to the procuring system operator suspending the service
          provider.
        format: bigint
        type: integer
        x-no-update: true
        required: false
        x-details: Defaults to the system operator creating the resource.
        x-foreign-key:
          resource: party
          field: id
        example: 9
        x-intl:
          en: Procuring system operator
          nb: Innkjøpende systemoperatør
          nn: Innkjøpande systemoperatør
      service_provider_id:
        description: Reference to the service provider being suspended.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 52
        x-intl:
          en: Service provider
          nb: Tjenesteleverandør
          nn: Tenesteleverandør
      product_type_ids:
        description: References to the suspended product types.
        type: array
        items:
          format: bigint
          type: integer
        x-foreign-key:
          resource: product_type
          field: id
        example: [1, 7]
        x-intl:
          en: Product types
          nb: Produkttyper
          nn: Produkttypar
      reason:
        description: The reason for the suspension.
        format: text
        type: string
        enum:
          - communication_issues
          - failing_heartbeat
          - system_issues
          - clearing_issues
          - breach_of_conditions
          - other
        example: communication_issues
        x-intl:
          en: Reason
          nb: Årsak
          nn: Årsak

  - id: service_providing_group_product_application
    acronym: SPGPA
    summary: Service Providing Group Product Application
    description: >-
      Relation between a service providing group and a system operator for a
      product type, for the SPG to deliver a product to the SO later.
    operations:
      - list
      - read
      - create
      - update
    audit: true
    generate_views: true
    history:
      - list
      - read
    history_rls: true
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 89
        x-intl:
          en: ID
          nb: ID
          nn: ID
      service_providing_group_id:
        description: Reference to the service providing group.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: service_providing_group
          field: id
        example: 18
        x-intl:
          en: Service providing group
          nb: Tjenestelevererende gruppe
          nn: Tenestelevererande gruppe
      procuring_system_operator_id:
        description: Reference to the procuring system operator.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: party
          field: id
        example: 39
        x-intl:
          en: Procuring system operator
          nb: Innkjøpende systemoperatør
          nn: Innkjøpande systemoperatør
      product_type_ids:
        description: References to the product types.
        type: array
        items:
          format: bigint
          type: integer
        x-foreign-key:
          resource: product_type
          field: id
        example: [2, 4, 5]
        x-intl:
          en: Product types
          nb: Produkttyper
          nn: Produkttypar
      status:
        description: The status of the application.
        format: text
        type: string
        default: requested
        enum:
          - requested
          - prequalification_pending
          - in_progress
          - temporary_qualified
          - prequalified
          - verified
          - rejected
        example: in_progress
        x-intl:
          en: Status
          nb: Status
          nn: Status
      notes:
        description: Free text notes on the current product application status.
        format: text
        type: string
        maxLength: 512
        nullable: true
        example: null
        x-intl:
          en: Notes
          nb: Notater
          nn: Notat
      prequalified_at:
        description: When the product application was last prequalified.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2022-08-08 12:00:00 CET
        x-intl:
          en: Prequalified at
          nb: Prekvalifisert ved
          nn: Prekvalifisert ved
      verified_at:
        description: When the product application was last verified.
        format: timestamp with time zone
        type: string
        nullable: true
        example: 2021-08-08 10:00:00 CET
        x-intl:
          en: Verified at
          nb: Verifisert ved
          nn: Verifisert ved

  - id: service_providing_group_product_suspension
    acronym: SPGPS
    summary: Service Providing Group Product Suspension
    description: >-
      The relation allowing a procuring system operator to temporarily suspend a
      service providing group from delivering products of certain types.
    operations:
      - list
      - read
      - create
      - update
      - delete
    audit: true
    generate_views: true
    history:
      - list
      - read
    comments: true
    history_rls: false
    properties:
      id:
        description: Unique surrogate identifier.
        format: bigint
        type: integer
        readOnly: true
        example: 12
        x-intl:
          en: ID
          nb: ID
          nn: ID
      procuring_system_operator_id:
        description: >-
          Reference to the procuring system operator suspending the service
          providing group.
        format: bigint
        type: integer
        x-no-update: true
        required: false
        x-details: Defaults to the system operator creating the resource.
        x-foreign-key:
          resource: party
          field: id
        example: 91
        x-intl:
          en: Procuring system operator
          nb: Innkjøpende systemoperatør
          nn: Innkjøpande systemoperatør
      service_providing_group_id:
        description: Reference to the service providing group being suspended.
        format: bigint
        type: integer
        x-no-update: true
        x-foreign-key:
          resource: service_providing_group
          field: id
        example: 7
        x-intl:
          en: Service providing group
          nb: Tjenestelevererende gruppe
          nn: Tenestelevererande gruppe
      product_type_ids:
        description: References to the suspended product types.
        type: array
        items:
          format: bigint
          type: integer
        x-foreign-key:
          resource: product_type
          field: id
        example: [3, 6]
        x-intl:
          en: Product typer
          nb: Produkttyper
          nn: Produkttypar
      reason:
        description: The reason for the suspension.
        format: text
        type: string
        enum:
          - failed_verification
          - other
        example: failed_verification
        x-intl:
          en: Reason
          nb: Årsak
          nn: Årsak

  - id: notice
    acronym: NOTICE
    summary: Notice
    description: >-
      Notice to users about various issues or actions expected from them.
    operations:
      - list
    generate_views: false
    properties:
      party_id:
        description: Reference to the party targeted by the notice.
        format: bigint
        type: integer
        readOnly: true
        x-foreign-key:
          resource: party
          field: id
        example: 18
        x-intl:
          en: Party
          nb: Party
          nn: Party
      type:
        description: The type of the notice.
        format: text
        type: string
        pattern: '^no.elhub.flex.'
        readOnly: true
        example: 'no.elhub.flex.service_providing_group_membership.valid_time.outside_contract'
        x-intl:
          en: Type
          nb: Type
          nn: Type
      source:
        description: The URI of the resource concerned by the event.
        format: text
        type: string
        pattern: '^(\/([a-z][a-z_]*|[0-9]+))+$'
        readOnly: true
        example: '/service_providing_group_membership/4'
        x-intl:
          en: Source
          nb: Kilde
          nn: Kjelde
      data:
        description: The data of the notice.
        type: object
        $ref: '#/components/schemas/notice_data'
        readOnly: true
        nullable: true
        example: null
        x-intl:
          en: Data
          nb: Data
          nn: Data
