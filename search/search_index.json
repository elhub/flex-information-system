{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Flexibility Information System","text":"<p>This is the documentation for the Flexibility Information System (FIS) concept that is being developed in the context of the EuroFlex project in Norway. Elhub is leading the work as part of work package 4.</p> <p>Work in progress</p> <p>This documentation is a work in progress. Do not consider any of the details here as final or complete.</p> <p>A flexibility information system, or flexibility register, is a IT system that is used to keep track of (register) data about flexible assets such as demand response resources, energy storage systems, and other controllable loads. The system will be a central part of a future flexibility value chain. We can think of it as a integration- and datahub in the value chain. The value proposal includes</p> <ul> <li>lowering barriers for service providers</li> <li>simplify use of flexible resurces in multiple markets</li> <li>increasing transparency and trust</li> <li>cost effectiveness through centralising common tasks</li> </ul> <p>The following diagram illustrates the concept of a flexibility information system in the Norwegian context. There are many details in the diagram, but there are also still many unanswered questions. Consider it a starting point for discussion and one way to visualise the concept we are developing.</p> <p></p>"},{"location":"#what-does-a-flexibility-information-system-do","title":"What does a Flexibility Information System do?","text":"<p>The heart of a flexibility information system to facilitate communication and data exchange between parties and systems in the value chain for flexibility services. The main parties are</p> <ul> <li><code>system operators</code> - that operates the electricity grid and procure flexibility   services</li> <li><code>service providers</code> - that aggregate and offer flexibility services to system   operators</li> <li><code>end users</code> - the owners of the flexible assets that provide flexibility services</li> </ul> <p>A flexibility information system can also take on additional tasks due to being shared infrastructure in the value chain. An example could be tasks related to imbalance settlement/adjustment and financial transfer.</p>"},{"location":"#network-code-on-demand-response-nc-dr","title":"Network Code on Demand Response (NC DR)","text":"<p>A network code on demand response is currently under development in the EU. We are basing our work on the proposed Flexibility information system as suggested in this regulation.</p> <p>\"flexibility information system\" means a system to record at least the qualification of service providers, the product prequalification, product verification and grid prequalification of SPUs and SPGs and the switch of controllable units for the provision of balancing and local services and to exchange data for such processes;</p> <ul> <li>European Commision - Targeted Consultation - July 2025</li> <li>ACER Recommendation 01-2025 - March 2025</li> <li>ACER public consultation - September 2024</li> </ul>"},{"location":"#centralised-system-or-common-access-point","title":"Centralised system or common access point?","text":"<p>The NC DR specifies that a flexibility information system should be operated and maintained in one of two ways. The first is a system operated and maintained by each procuring system operator with a common access point for service providers and system operators. The second is a centralised flexibility information system operated and maintained by an entity specified in national terms and conditions.</p> <p>We are piloting a centralised FIS. We believe that such a setup has many benefits, e.g. reduced technical complexity by avoiding having many systems appear as one. The decentralised option also fails to adress the challenge of registering CUs only once. To achieve that every connecting (not the procuring) system operator must operate a FIS. Becuase of this the common access point approach also requires system operators - regardless of size and maturity - to operate a FIS. This is not a good fit for Norway where we have a wide variety of system operators.</p>"},{"location":"#integrated-cu-and-sp-modules","title":"Integrated CU and SP modules","text":"<p>Another aspect that is part of the NC DR is that they distinguish between Controllable Unit (CU) and Service Provider (SP) modules. We have decided to integrate these into a single system in our Flexibility Information System.</p> <p>We believe that this is a good choice for a common flexibility information system in Norway as it is a small country with a small number of actors. It is also technically easier to have a single system.</p>"},{"location":"#pilot-flexibility-register","title":"Pilot Flexibility Register","text":"<p>We are piloting the Flexibility Information System as part of the EuroFlex project at flex-test.elhub.no. Participants in the EuroFlex project have access to the pilot system.</p> <p>Warning</p> <p>The Flexibility Information System is a prototype. As such, even though it offers authentication and authorisation features, it should not be considered as a production-level system. Please make sure the data used while testing is fictitious and does not contain any sensitive information (e.g., health data, sexual orientation, etc).</p> <p>Our system stores read-only historical data for some of its resources. This means that wrong data will remain in the system even though the last version of the resource is corrected. Should you inadvertently add sensitive data to a resource, please contact us so that we can manually clean the problematic records.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>This changelog tracks all changes that are visible in our API.</p>"},{"location":"changelog/#26092025","title":"26.09.2025","text":"<ul> <li>Updated the <code>visibility</code> field's specification on the SP product application comment and the SP product suspension comment resources.   Comments now have only two possible visibilities: they can either be private   comments internal to a given party, or comments opened to any party related to   the application or suspension.</li> </ul>"},{"location":"changelog/#16092025","title":"16.09.2025","text":"<ul> <li> <p>Renamed all <code>last_X</code> timestamp fields into <code>X_at</code>.   This touches the following resources: controllable unit, service provider   product application, service providing group grid prequalification, and   service providing group product application.</p> </li> <li> <p>Added <code>inactive</code> status value for Controllable Unit and Service Providing Group.   In the case of controllable unit, this value replaces <code>suspended</code>.</p> </li> <li> <p>Added the Service Provider Product Suspension resource.</p> </li> </ul>"},{"location":"changelog/#29082025","title":"29.08.2025","text":"<ul> <li>Added <code>scopes</code> and <code>party_id</code> fields to the Entity Client resource. </li> </ul>"},{"location":"changelog/#15072025","title":"15.07.2025","text":"<ul> <li> <p>Introduced the Entity Lookup operation.   To be used while administrating memberships for parties related to an   organisation with entities that may not exist or be readable yet.</p> </li> <li> <p>Added <code>scopes</code> field to the Party Membership resource.</p> </li> </ul>"},{"location":"changelog/#01072025","title":"01.07.2025","text":"<ul> <li> <p>Added audit fields and history on the Entity resource.   The resource can now be created and updated by users with the FISO role.</p> </li> <li> <p>Changed the body format of the response for the Controllable Unit Lookup operation.   The operation now returns technical information about the accounting point and   the end user in addition to controllable units and technical resources.   The operation can also return HTTP 403 when the given arguments do not match   each other.</p> </li> </ul>"},{"location":"changelog/#26062025","title":"26.06.2025","text":"<ul> <li>Specified the <code>data</code> field in the Notice resource.   The field turns into an <code>object</code>, whose content depends on the <code>type</code> of the   notice.</li> </ul>"},{"location":"changelog/#03062025","title":"03.06.2025","text":"<ul> <li> <p>Added Accounting Point Energy Supplier resource.</p> </li> <li> <p>Added a notice for inconsistency between Controllable Unit Service Provider and Accounting Point End User.</p> </li> <li> <p>Added end user technical ID to Controllable Unit Service Provider.   This ID is now also returned in the Controllable Unit Lookup operation, so   that SPs can first lookup and then create relations with the required data.</p> </li> <li> <p>Removed the <code>id</code> field from Notice and Accounting Point Balance Responsible Party.   These were non-stable identifiers, not linking to any actual resource.</p> </li> </ul>"},{"location":"changelog/#28052025","title":"28.05.2025","text":"<ul> <li>Removed Connecting System Operator on the Controllable Unit resource.   The information remains available as System Operator ID,   through the Accounting Point ID.</li> </ul>"},{"location":"privacy/","title":"Privacy and Cookies","text":"<p>This documentation and the flexibility pilot platform is developed by Elhub. Please read the general Elhub privacy policy.</p> <p>The service offered on this domain does use cookies and other storage mechanisms in your browser to store user preferences and session information. These are neccessary for the site to function properly. We do not use this information to track you as a user. The following is a list of information that is stored on your device.</p> Key Storage type Expires Purpose and information flex_login cookie 2 minutes              Cookie used to persist information during the login flow.             Removed when login is done.          __Host-flex_session cookie 1 hour Session cookie that is set after you log in. Removed on logout. flexSession localStorage On logout              A local copy of current session information.             Used to speed up interactions in the portal.          mosaic-theme localStorage -              Stores configuration for the theme used in API documentation.          RaStoreFlex.* localStorage On logout              We are storing user preferences and current portal state             in localStorage with the prefix RaStoreFlex. This includes             information like if the menu is open/closed,             current pagination information and similar.             This is neccessary to provide a good user experience.          <p>In addition to the above we use a login solution from Oracle in test environments. Oracle has their own privacy policy.</p>"},{"location":"concepts/end-user/","title":"End Users","text":"<p>Work in progress</p> <p>This is a work document for work group 4 in EuroFlex intended for input and discussion.</p>"},{"location":"concepts/end-user/#context","title":"Context","text":"<p>End users (or final customers/system users) are the owners of the controllable units. An end user in the power market is a Norwegian legal entity and can be an</p> <ul> <li>Individual - a natural person \u2013 identified by their birth or D-number</li> <li>Organization \u2013 a legal person \u2013 identified by their organization number</li> </ul> <p>The end user on a controllable unit is the end user of the accounting point where the controllable unit is connected. The authoritative source for who is the end user on an accounting point is the Norwegian power market's central data hub Elhub. The end user on a metering point change as people and organizations move, new metering points are established and similar. In a production setting, the end user of accounting points will be synced from Elhub to FIS.</p> <p>A FIS can strengthen the end user rights by providing transparency and insight into how their controllable units are used and who has access to their data.</p> <p>But how will the end user interact with the FIS and the business processes? This document discusses and suggests answers to that question.</p>"},{"location":"concepts/end-user/#experience-from-elhub","title":"Experience from Elhub","text":"<p>Elhub is in many ways comparable to the FIS. It, too, deals with end users, personal data, contracts with providers and similar. In general, Elhub provides end users insight into their electricity data, but the actual data in the system is added and maintained by the professional marked parties - energy suppliers and system operators. However, the end user is also required to take part in giving consent to contract changes and approve access to third parties. The following two sub-sections gives a brief history of those two.</p>"},{"location":"concepts/end-user/#non-digital-users","title":"Non digital users","text":"<pre><code>Elhub market processes must support non-digital end users since everyone should\nhave access to electricity. We believe that FIS does not have this requirement\nsince providing flexibility is not a basic requirement for living.\n</code></pre>"},{"location":"concepts/end-user/#energy-supplier-change","title":"Energy supplier change","text":"<p>A supplier change in Elhub is when an energy supplier becomes the supplier for an end user and metering point. Among other things, this gives the energy supplier access to the data of the metering point.</p> <p>When Elhub was first introduced, the supplier change was fully done by the professional marked parties, with no interaction from the end user. The contract with and consent from the end user was an implicit prerequisite and assumed. This trust-based approach lasted for a few years, but is replaced by regulation that requires the energy supplier to get secure consent from the end user and that consent control is done in Elhub. This effectively means that the supplier must prove that they have a contract with the end user for a supplier change to be approved by the system.</p> <p>Secure consent is done when the supplier establishes a contract with the end user. The requirement is for digital consent, and it can be logically split in five parts.</p> <ol> <li>Strong electronic identification - Accurate identification of the user, typically achieved through IDPorten or BankID. Roles in Altinn are used for organizations. This identification must at least be done once, e.g. at the first account creation.</li> <li>Strong authentication \u2013 Mandatory multifactor authentication of the user    at the time of consent proves that it is the actual user of the account that    is giving consent.</li> <li>Recorded \u2013 The consent/contract must be digitally stored so that the supplier can show that the end user gave consent.</li> <li>Checkable \u2013 The digitally recorded consent must be digitally checkable so    that a machine can know both who gave consent and what they gave consent to.    This impacts the format of the record.</li> <li>Verifiable \u2013 The consent record must be trustworthy. In practical terms this means it must be signed or obtained via a trusted party.</li> </ol> <p>Consent verification is done by Elhub when an energy supplier initiates a supplier change. Elhub supports verification of two methods of secure consent.</p> <ol> <li>consent done/obtained in the Elhub system</li> <li>documents signed via approved/trusted vendors</li> </ol>"},{"location":"concepts/end-user/#third-party-access","title":"Third party access","text":"<p>Third parties in the Elhub system are parties that are given access and subscription to an end users data in the system, per metering point.</p> <p>The regular process to get access is initiated by the third party requesting access through the Elhub API. The end user then must log into MinSide at Elhub to approve that access. This process has had some challenges, for instance requiring workarounds for approving access for organizations with complex org-structure and many metering points. To improve the process for individuals a URL/redirect flow has also been introduced.</p>"},{"location":"concepts/end-user/#end-user-involvement-in-network-code-demand-response-ncdr","title":"End user involvement in Network Code Demand Response (NCDR)","text":"<p>Our work in EuroFlex WG4 leans heavily on NC DR. The network code is still being developed, and we have seen varying levels and modes of end user involvement in the processes and principles outlined in different drafts.</p> <p>At the time of writing, the general feel/principle outlined in the current draft is that it is the professional market parties that will interact with FIS. The end user will interact with and make agreements with the providers but is not required nor entitled to give consent or dissent in the FIS. The end user should have full insight and transparency into their data in the FIS.</p> <p>Providing access to data for other parties is not covered by the network code.</p>"},{"location":"concepts/end-user/#end-users-in-the-fis","title":"End users in the FIS","text":"<p>We suggest piloting a concept where changing data in the FIS will generally be done by the professional market parties in the value chain. This is in line with both Elhub and NC DR. As an example, a service provider will sign a contract with an end user, then interact with FIS to record that contract. The end user can then see the contract in the FIS portal.</p> <p>The regulation for a common Norwegian FIS might follow the trend from Elhub and require explicit and/or verifiable consent by end users, especially since this is related to access to data. The level of trust and control will be established by regulation.</p> <p>As a starting point in the pilot register, it will be required that service providers use strong electronic identification and authentication and that they digitally record their agreements and consent. It will be required that the service providers provide an internal identifier to their record of consent when creating a contract on a controllable unit. The FIS will not check nor verify the consent. This solution still relies on trust but does take the consent from being fully implicit to somewhat explicit. It also prepares us for a future where verifiable consent might be required by regulation.</p> <p>At the time of writing, we do not see or want to pilot any specific use-cases for data access like third party access in Elhub. When those needs arise then we must make sure that the process of giving and getting access is smooth but safe.</p>"},{"location":"concepts/end-user/#end-user-and-contract-relations","title":"End user and contract relations","text":"<p>A controllable unit service provider contract is decoupled from the end user and can span multiple end users from Elhub. This means there is no direct relationship between the service provider contract in FIS and the end user contract on the accounting point in Elhub. This allows for more adaptable service arrangements, accommodating changes in end user ownership without disrupting the service provider contract. However, end users access to the controllable unit is given based on continuously updated end user information from Elhub.</p> <p>This raises several discussion points:</p> <ul> <li>Should there be a direct link between the end user at the metering point in   Elhub and the service provider contract in FIS?  <ul> <li>If so, why?</li> </ul> </li> <li>Is it likely that a service provider would enter into a contract with an end user who is not the actual registered end user at the accounting point in Elhub?<ul> <li>If so, would it be problematic if the end user registered in Elhub is the one who has access to the controllable unit data in FIS, and not the one SP has an agreement with?</li> </ul> </li> </ul>"},{"location":"concepts/grid-model/","title":"Grid Model","text":"<p>Work in progress</p> <p>This document is very much work in progress. It highlights some existing models and ideas connected to a possible grid model used in a flexibility information system. In its current state, the document is intended as input for discussion.</p> <p>A grid model is a simplified representation of the physical grid. It should contain geographical or topological information about the grid. Its use would be to support data exchange and aggregation in the value chain of flexibility.</p>"},{"location":"concepts/grid-model/#introduction","title":"Introduction","text":"<p>Flexibility is intended to deliver services in the physical grid: balancing, congestion and voltage. As such, a grid model must be a physical representation of the grid. However, a model can and should be used to simplify the complexity of the real world.</p> <p>The physical grid is split in different levels depending on the voltage level and ownership.</p> <ul> <li>Transmission grid - masked transmission grid operated by TSO</li> <li>Regional grid - generally, regional grids can be operated radially from a   transmission grid point, meshed from a transmission network point, or meshed   between two transmission network points. Operated by DSO, but currently TSO is   responsible for handling bottlenecks.</li> <li>Distribution grid - radial, but with some reduntant connections that   allows the SO to switch/route power in different directions</li> </ul>"},{"location":"concepts/grid-model/#difficulties-in-making-a-simple-model","title":"Difficulties in making a simple model","text":"<p>As stated above, the grid can be thought of as a complex mesh of nodes and edges. It is not a simple tree structure where aggregation of resources can be done by simply moving up the tree. The grid is also not static, but dynamic, and flows/directions are changing all the time. This might require us to have a more complex model than what we would like to have.</p> <p>In the diagrams we are trying to show some example challenges related to the grid model. Nodes in the grid are either drawn as circles or points. Nodes can be grid stations, junction points or similar. Edges are connections like power lines or cables, and are drawn as lines with arrows. The the arrows on the edge indicate the direction of flow. The color of the edge indicate if the edge and/direction direction is active (green) or not (red)</p> <p>.</p> <p>If a node represents a transformer (station), then it might be important to know on which side of the transformer the edges are connected. In the following example diagram, <code>C</code> and <code>T</code> represents the same transformer, but the two graphs are modelling it in different ways.</p> <p>In the first graph edges 1, 2 and 3 are simply connected to the node, but does not indicate on which side of the transformer they are connected. In the second graph, the edges are connected junctions and the junctions are connected to the transformer.</p> <p>If the transformer had a capacity problem (think over-heating), then knowing on which side the edges are connected is important since we see in the second graph that disconnecting/lowering consumption in <code>U</code> does not actually help the transformer.</p> <p>.</p>"},{"location":"concepts/grid-model/#existing-models","title":"Existing models","text":"<p>There are a few existing models that are relevant for the discussion.</p>"},{"location":"concepts/grid-model/#nodes","title":"NODES","text":"<p>In the NODES platform, the local market platform in EuroFlex, system operators define one or more grid areas. An area is then divided into grid nodes. Nodes can exist in a hierarchy, where a node can be a parent to other nodes. The following diagram shows this.</p> <p></p> <p>Assets (controllable units) are connected to the \"lowest level\" node, and the node hierarchy is used when aggregating assets into portfolios. If assets in a portfolio are connected to node <code>B</code>, <code>C</code> and <code>D</code> in the diagram, then the portfolio is connected to node <code>B</code> and can also be used for bids in node <code>A</code>.</p> <p>Nodes in NODES can also be linked between system operators, in a hierarchy. Meaning that a node in a \"sub\" system owners area can be linked to a node in a \"parent\" system owners area.</p>"},{"location":"concepts/grid-model/#balancing-markets-station-groups","title":"Balancing markets - station groups","text":"<p>In Statnett's balancing markets, there is no actual grid model being communicated. When a (B)SP wants to deliver balacing services, part of the process includes requesting station groups (stasjonsgrupper) for the resource(s). Statnett creates station groups based on its own knowledge of the grid and the information about the resource(s) provided by the (B)SP.</p> <p>A station group is defined not only based on the physical reference in the grid, but also:</p> <ul> <li>same balance responsible party (BRP)</li> <li>no bottlenecks</li> <li>same (production) technology</li> </ul> <p>As part of the qualification process done by Statnett, impacted DSOs are given an opportunity to comment on the application.</p> <p>A 2018 report from Statnett highlights the importance of getting more geographical information as part of the bids suggests three high-level solutions:</p> <ol> <li>splitting station groups or defining new geographical levels</li> <li>more detailed geographical information in bids</li> <li>including geography in prequalification and approval from grid owners. This    could include defining \"problem areas\" in the grid that cannot be part of the    balancing markets.</li> </ol>"},{"location":"concepts/grid-model/#balance-settlement-grid-model","title":"Balance Settlement Grid Model","text":"<p>The grid model used in balance settlement is described here.</p> <p></p> <p>The model consists of three types of areas:</p> <ul> <li>Marked Balance Areas (MBA) aka price area</li> <li>Metering Grid Area (MGA) aka settlement areas</li> <li>Sub-Grid Areas   (SGA) e.g. malls and industrial areas/parks</li> </ul> <p>MBAs contains MGAs, and MGAs contains SGAs. Both MGAs and SGAs contain accounting points (AP), where energy is either consumed or produced (or both). MGAs are defined by Statnett as settlement responsible together with the system operators. The division of MGAs is based on the grid topology (e.g. bottlenecks) and the ownership of the metering points within the area.</p> <p>The sub-grid area is connected to MGA via an accounting point in the parent MGA. In addition to this, there are individual accounting points inside the SGA - e.g. stores in a shopping center. There can be different energy suppliers in the accounting points and the SGA is settled by the sub-grid operator. It is assumed that controllable units in the flexibility register will always be referred to the accounting point in the MGA.</p> <p>There are 123 grid owners and 354 MGAs and SGAs. The MGAs are divided into the following types:</p> <ul> <li>17 Transmission</li> <li>52 Regional</li> <li>37 Industrial</li> <li>117 Production</li> <li>92 Distribution</li> </ul> <p>In addition there are 37 sub-grids.</p>"},{"location":"concepts/grid-model/#simplified-national-grid-model-elbits","title":"Simplified National Grid Model (Elbits)","text":"<p>\"Forenklet Nasjonal Nettmodell\" (FNN) is a model developed by Elbits to facilitate easier exchange of basic information about the power grid in Norway. It is a simplification of the CIM100 standard and currently has a data foundation from FOS at Statnett.</p> <p>The model aims to be a reference for central elements in the grid and covers the transmission and regional grids across the entire country. Work is underway to include distribution. It will have common names and IDs for each component, making the grid understandable for both humans and machines.</p> <p>The model includes grid elements and their connections, but e.g. not include switches, breakers etc. It is distributed in a JSON-LD format and looks like a directed graph, but the line direction is random and does not indicate flow.</p> <p>The following is an example derived from the FNN model definition (and not from model data itself). It just provides another view on how the model i structured and how different types are connected.</p> <p></p>"},{"location":"concepts/grid-model/#system-operators-and-ownership","title":"System operators and ownership","text":"<p>The balance settlement grid model allows us to understand how the operation of the grid is split between different system operators. This can be interesting to look at since controllalbe units connected to a distribution grid can be/is used to deliver services in regional or central grids. In NCDR-speak, we can use it to consider who will be connecting, procuring and impacted system operators of a given asset.</p> <p>What we see is that some controllable units, depending on the flow of energy, can have multiple procuring system operators and multiple impacted system operators, even if we are only considering the hierarchy of the grid model (and not defining adjacent system operators as \"impacted\"). The following is an example drawn from the analysis.</p> <p></p> <p>In the diagram, the controllable unit can be used to deliver services for all the system operators. Activation can also impact all the system operators.</p> <p>There are also other \"edge\" cases where we see chains of system operators. Some cases shows a chain of four or more different system operators. Examples are:</p> <ul> <li>Transmission -&gt; Regional -&gt; Distribution -&gt; Distribution</li> <li>Transmission -&gt; Regional -&gt; Production -&gt; Industrial -&gt; Distribution</li> </ul> <p>Further analysis must be done to understand the details in the grid. We are just looking at a very simplified model that e.g. does not account for how the grid is switched. The key takeaway, however, is that we must support having multiple system operators related to the controllable units. It is not the case of \"just\" one local and one central system operator/market for one controllable unit.</p>"},{"location":"concepts/grid-model/#possible-use-cases","title":"(Possible) Use Cases","text":"<p>This section outlines some possible needs for a grid model in the flexibility value chain. Some of these requirements are based on draft network code on demand response.</p>"},{"location":"concepts/grid-model/#knowing-the-location-of-a-controllable-unit","title":"Knowing the location of a controllable unit","text":"<p>The grid model will be used to place the controllable units in the grid - to map accounting point ids to physical assets in the grid and to responsible system operators. This requires unique identification of all nodes and edges. The purpose of this placement is to facilitate aggregation and data exchange (see further requirements).</p> <p>For service providers, knowing the location of the controllable unit can allow them to prioritize which units to get ready for market. This can be based on the current tenders in the market(s).</p> <p>If the flexibliity information system knows the grid location of all accounting points in advance (and not requiring grid owners to add that information), we can also provide \"synchronous\" registration processes that includes assignment to grids.</p> <p>Some accounting points are located in sub-grid areas. The value chain must be able to identify the relation between the accounting points in an SGA with the accounting point for the connection point in the surrounding MGA. FIS can get this information from Elhub.</p>"},{"location":"concepts/grid-model/#aggregation-to-service-providing-groups","title":"Aggregation to service providing groups","text":"<p>Flexibility resources are distributed across many different locations in the grid, many of which are connected in the lowest level: in the distribution grid. And a grid model can be used to aggregate these resources. In a simple case, where the grid is a tree, the aggregation can be done by aggregating the resources in the same branch up to a certain node where services are needed.</p> <p></p> <p>Example: CUs connected to M,N,O and P can be used to deliver services in node M, if there is a congestion issue on the edge between F and M.</p> <p>However, we do know that the grid is not as simple as this, so we must figure out a way to aggregate resources reliably in a more complex grid.</p> <p>The grid model can also be used by system operators to identify SPGs to \"arm\" reservation contracts or end users in underlying system operator grids.</p>"},{"location":"concepts/grid-model/#identifying-impacted-system-operators-for-spg-grid-prequalification","title":"Identifying Impacted System Operators for SPG Grid Prequalification","text":"<p>Impacted System Operators (ISO) should do grid prequalification of service providing groups. A grid model can be used to identify which system operators are impacted by activation of services from a certain SPG. Network Code Demand Response (NCDR) definitions:</p> <p><code>impacted system operator</code> means any DSO or TSO significantly impacted by congestion or voltage issues on the grid of another system operator, or significantly impacted by balancing and local services bids from SPU or SPG connected to another system, or whose system or system users may provide solutions to these issues, or whose data on the system or the system users are necessary to forecast, detect or solve such issues;</p> <p><code>grid prequalification</code> means the process by the connecting system operators and the impacted system operators to ensure that the delivery of balancing or local service(s) by a SPU, a SPG or parts of a SPG does not compromise the safety and operational conditions of connecting and impacted grids;</p>"},{"location":"concepts/grid-model/#temporary-limits","title":"Temporary limits","text":"<p>NCDR defines a flexibility information system as:</p> <p><code>flexibility information system</code> means a system to record at least the qualification of service providers, the product prequalification, product verification and grid prequalification of SPUs and SPGs, the temporary limits set by system operators and the switch of controllable units for the provision of balancing and local services and to exchange of data for such processes;</p> <p>... and article 58 states:</p> <p>The connecting system operators and impacted system operators shall have the right to set or update temporary limits on grid elements, bids, SPUs, SPGs or parts of SPGs in the operational planning to ensure that the delivery of the balancing or local services does not compromise the safe operation of the transmission and distribution systems.</p> <p>To be able to set and communicate limits on grid elements, those grid elements must be modelled in the system.</p>"},{"location":"concepts/grid-model/#data-exchange-in-observability-areas","title":"Data exchange in observability areas","text":"<p>Network Code Demand Response (NCDR) define \"observability areas\" for distribution system operators. Other regulation has this concept for TSO already. They are defined for the purpose of clarifying data exchange scope and scope of coordination.</p> <p><code>DSO observability area</code> means a DSO\u2019s own distribution system and parts of other system operators\u2019 distribution and transmission systems that are relevant for the operation of the DSO distribution system;</p> <p>\"Operation\" could also mean DF (driftsmessig forsvarlig) or FOL (Forskrift om leveringssikkerhet) analysis.</p> <p>A grid model can be used to define these areas and will allow a flexibility information system to give the correct data access and notifications to the eligible system operators.</p> <p>Data exchange between SOs and from FIS to SO include:</p> <ul> <li><code>structure data</code> such as substations, lines, transformers, SGUs, reactors/capacitors</li> <li><code>schedule and forecast data</code> such as planned outages, schedules, production   plans, baselines, forecasts, temporary limits</li> <li><code>real-time data</code> such as actual topology, busbar voltages, active and reactive   power flows and real time measurements</li> <li><code>activations</code> such as activation of balancing services with a controllable unit   in a distribution grid</li> </ul>"},{"location":"concepts/grid-model/#challenges","title":"Challenges","text":"<p>The following is a list of issues that we must tackle.</p> <ol> <li>The grid is not a tree, but a mesh. How do we model the grid in a way that    allows for aggregation of resources?</li> <li>The grid is not static, but dynamic. That is problematic for aggregation and    buying from groups. How do we model the grid in a way that allows for changes    in the grid? We believe that system operators will do more topological    manouvers in the future as the load on the grid increases.<ul> <li>One strategy used in NODES is to define nodes on a low level/below     possible switches.</li> <li>This can also be challenging for long term contracts. What if the grid     has been changed from bid to activation?</li> </ul> </li> <li>Is the current state of the grid sensitive? Can it be shared with all parties    in the value chain?</li> <li>How can we build a grid model incrementally so that we can get value early on    and not wait for the \"full\" model? Making a complete, \"perfect\" national    grid model for flexibility will take time.</li> </ol>"},{"location":"concepts/ready-for-market/","title":"Ready for market","text":"<p>Before a service provider can use a service providing group (SPG) in the market, the SPG must be ready. We can check if an SPG is ready to deliver a specific product type to a specific SO.</p> <p>This document contains a checklist for when an SPG is considered ready for market. A prerequisite for that is understanding how to read and understand the status of the resources in the FIS.</p>"},{"location":"concepts/ready-for-market/#status-and-timestamps","title":"Status and timestamps","text":"<p>Many resources in the register have a status and an associated timestamp. For example a service providing group grid prequalification has the fields <code>status</code> and <code>prequalified_at</code>.</p> <p>A status field represents the current stage of the approval processes of resources. This means different things for different resources, and includes:</p> <ul> <li>approval</li> <li>validation</li> <li>qualification</li> <li>prequalification</li> <li>verification</li> </ul> <p>A status has a finite set of possible values such as <code>pending</code>, <code>in_progress</code> and <code>qualified</code>.</p> <p>The timestamp indicates when the CU or SPG was last approved. This timestamp should be used to determine whether a CU or SPG is considered approved, as the status itself may change for various reasons.</p> <p>If the approval of a CU or SPG is withdrawn, the SO must update the status accordingly and remove the timestamp.</p>"},{"location":"concepts/ready-for-market/#examples","title":"Examples","text":"<p>When SPG product application is initiated for the first time, SO will update status to in_progress. As the SPG has not previously been prequalified or verified, the timestamp field remains empty.</p> Status Prequalified / verified timestamp Ready for market? in_progress No <p>If there are changes to an SPG which require a new approval process, status will be updated to in_progress.</p> Status Prequalified / verified timestamp Ready for market? in_progress 01.01.2025 10:00 Yes <p>If approval is withdrawn, SO updates status and remove the timestsamp.</p> Status Prequalified / verified timestamp Ready for market? rejected No"},{"location":"concepts/ready-for-market/#suspension","title":"Suspension","text":"<p>Suspension is a temporary state set by SO. Suspension is added as a separate field on the resources. On product (pre)qualification, this takes the form of a list of suspended product types. On other resources it is set as a boolean flag indicating that the resource is suspended. To check if resource is suspended, these fields must be checked.</p>"},{"location":"concepts/ready-for-market/#future-checks","title":"Future checks","text":"<p>In addition to status and suspension checks, there are other things that might be relevant to check in the future. Some examles are:</p> <ul> <li>Temporary limits</li> <li>Connection with conditions (like connection with conditions, UKT)</li> </ul>"},{"location":"concepts/ready-for-market/#ready-for-market-checklist","title":"Ready for market checklist","text":"<p>The following is a detailed checklist to verify that an SPG can deliver a product type to an SO. If a step in the checklist results in <code>not ready for market</code>, the SPG is considered not ready, and there is no need to continue the checklist. If SPG passes a step, then proceed to the next step. If all steps are passed, the SPG is ready for market.</p> <p>There are three \"levels\" that must be checked when considering if a SPG is ready.</p> <ul> <li><code>Service Provider</code> - The SP owning the SPG</li> <li><code>Service Providing Group</code> - The group itself and its grid and product (pre)qualifications</li> <li><code>Controllable Unit</code> - The individual units that are part of the SPG</li> </ul> <p>The following sections outline the checklist for each level.</p>"},{"location":"concepts/ready-for-market/#service-provider-checklist","title":"Service provider checklist","text":"<p>We must check the service provider that owns the SPG.</p> # Process/check Description Result 1 SP product application status Check SP product application status If status is <code>not_qualified</code>, then not ready for market 2 SP product application status timestamp Check if SP product application timestamp is present If timestamp is missing, then not ready for market 3 SP product application suspension Check if SP product application is suspended If suspended, then not ready for market"},{"location":"concepts/ready-for-market/#service-providing-group-checklist","title":"Service providing group checklist","text":"<p>We must then check the SPG itself.</p> # Process/check Description Result 1 SPG status Check SPG status If SPG is deactivated, then not ready for market 2 SPG grid prequalification status Check SPG grid prequalification status If SPG grid prequalification status is  <code>not_approved</code>, then not ready for market 3 SPG grid prequalification status timestamp Check if grid prequalification timestamp is present If timestamp is missing, then not ready for market 4 SPG grid prequalification suspension Check if SPG grid prequalification is suspended If suspended, then not ready for market 5 SPG product application status Check SPG product application status If SPG product application status is <code>rejected</code>, then not ready for market 6 SPG product application status timestamps Check if one of SPG product application timestamps is present If status is not <code>temporary_qualified</code> and both <code>prequalified_at</code> and <code>verified_at</code> timestamps are missing, then not ready for market 7 SPG product application status supension Check if SPG product application is suspended If suspended, then not ready for market"},{"location":"concepts/ready-for-market/#controllable-unit-checklist","title":"Controllable unit checklist","text":"<p>An SPG consists of one or more controllable units. When we check if the SPG is ready, then we can check that at least one CU is ready.</p> # Process/check Description Result 1 CU status Check CU status If CU is deactivated, then not ready for market 2 CU grid validation status Check CU grid validation status If CU grid validation status is <code>validation_failed</code>, then not ready for market 3 CU grid validation status timestamp Check if validated timestamp present If timestamp is missing, then not ready for market 4 CU grid validation suspension Check if CU grid validation is suspended If suspended, then not ready for market"},{"location":"concepts/suspension/","title":"Suspension","text":"<p>ACERs recommendation for NC DR has two mentions of \"suspension procedures\".</p> <p>Article 27</p> <p>(d) a \u2018suspension procedure\u2019 allowing system operators to suspend the qualification of a service provider, SPU or SPG;</p> <p>and</p> <p>Article 28</p> <p>(c) a \u2018suspension procedure\u2019 allowing entitled parties to suspend controllable units and ensuring that all affected parties are notified [without undue delay];</p> <p>What does it mean to suspend? The word has many nuances, but a good definition is to stop something from being active.</p> <p>The suspension can either be temporary or permanent, but the context of the ACER recommendation suggests that it is temporary - for a period of time.</p> <p>Another aspect of suspension is that it is sometimes considered as a punishment because someone has done something wrong. We do not interpret suspension to signal or exclusively be about sanctioning, but rather just a way to enforce or convey temporary deactivation.</p> <p>A broad definition of suspension also implies that it can be done both by the party that is doing the activity (I am suspending my activity), but also by someone else (You must suspend your activity). We consider suspension in this context to only apply to situations where one party suspends an activity on of another. In cases where a service provider needs to temporarily pause its activities at the CU or SPG level, we see this as a temporary deactivation and will follow a separate deactivation processes.</p> <p>In total, our definition of suspension is:</p> <p>Suspension: Temporary deactivation done by entitled parties to pause another party's activities.</p>"},{"location":"concepts/suspension/#who-can-suspend","title":"Who can suspend?","text":"<p>Suspension can happen on all levels. It can be on both regular resources and the one that represent relationships (like product applications).</p> Level AKA Who Comment CU Grid Validation CSO SPG Grid Prequalification ISO SPG Product Application Prequalification PSO SP Product Application Qualification PSO SP Approval RME Must techincally be done by FISO"},{"location":"concepts/time-series/","title":"Time Series","text":"<p>This document is an overview of time-series in the context of a flexibility value chain. It is by no means exhaustive or final, but an attempt to capture some important aspects and needs.</p> <p>By time series we mean a sequence of data points collected, recorded or stored at successive points in time, often at regular intervals. The value of a data point is, in our context, electrical quantities.</p>"},{"location":"concepts/time-series/#types","title":"Types","text":"<p>Time series can be of different types. The following is the definition of the types that we think are relevant in the context of a flexibility value chain.</p> Type Norsk Description Origin Measured values M\u00e5lte verdier, uavhenging av metode        A measure is a sampling/one-time value of a quantity or capacity. It       is typically done by a sensor or dedicated metering device.      <p>The service provider (technical aggregator) or end user has DMD       data.</p> <p>The system operator also has so-called SCADA-data from sensors/local       control system/IED.</p> Metering values M\u00e5lte verdier fra en m\u00e5ler        Metering is about keeping track of e.g. the flow of energy over a       period using a meter. The recorded values are metered values       and typically comes from smart meters (often referred to as AMS) or       dedicated meters.      <p>The system operator has data from conventional and smart meters.       The metering values on accounting points are sent to Elhub and available       there. The system operator also has meter data from other meters in the       grid, e.g. on transformers.</p> Calculated values Beregnede verdier        A general term for values that are based on some kind of formula or       calculation. The consumption of a certain asset might be calculated by       using a combination timeseries from different sources.      Baseline Prognose / Prognosert volum over en tidsperiode        A counterfactual reference about the electrical quantities that       would have been withdrawn or injected if there had been no activation of       services.             The calculation of baseline can be done by the service provider       (or its baseline provider), system operator(s) or by a trusted/neutral       entity like FIS or third party/marketplace system.      Consumption plan Forbruksplan        These are plans for consumption of energy that are set       before any activation happens for system, balancing, local or       voltage services.      Plans are provided by service providers.  Production plan Produksjonsplan        These are plans for production of energy that are set       before any activation happens for system, balancing, local or       voltage services.      Plans are provided by balance responsible parties or service providers. Timetable Kj\u00f8replan <p>This is the plan, after considering the delivery of services \u2013       the actual, continuously updated plan.</p> <p>Mostly useful for service providers but could also be relevant to       communicate to system operators.</p> Activated volume Aktivert volum        The delivered volume. Calculated using the respective       baseline, when necessary, and taking into account compensation effects, if       applicable      Delivered volume Levert volum Same as activated volume. Quantified volume Kvantifisert volum Same as activated volume. Verified volume Verifisert volum        Same as activated volume but with additional verification done by       system operator.      Traded volume Handlet volum        This is the volume as agreed in the market/bids. Useful to compare       against the actually activated volume.      <p>There are other types of time series-like data that is highly relevant for baselining or optimization but is not included because we believe that it is not relevant for others in the value chain. Examples are weather data, moving holidays, spot-prices, grid-tariffs and so on.</p>"},{"location":"concepts/time-series/#logical-levels","title":"Logical levels","text":"<p>Time series are usually linked to logical levels, typically the resources we use to model the flexibility domain. These logical levels are:</p> <ul> <li>Service Providing Group (SPG) / Portfolio</li> <li>Accounting Point (AP) / Metering point (MP)</li> <li>Controllable Unit (CU) / Asset</li> <li>Technical Resource (TR)</li> </ul>"},{"location":"concepts/time-series/#origins","title":"Origins","text":"<p>The origin of a time-series is the physical or concrete source of the data, i.e. where it comes from. We are using this nomenclature to distinguish between the different types of time-series origins.</p> Origin Abbr Type Typical granularity Responsible Comment Smart meter SM Meter 15M/60M Connecting System Operator Often talked about as AMS Home Area Network-port HAN Measurement Minimum every 10 seconds Service Provider HAN port of SM Sub meter SUB Meter 15M/60M Service Provider Typically a MID compliant meter used to improve energy transparency and encourage energy-saving behaviors or a meter used in subgrid. Dedicated Measurement Device DMD Measurement Service Provider See below Dedicated Meter DM Meter Realtime/1M/15M Service Provider See below Calculated CALC Virtual Realtime/1M/15M Service Provider"},{"location":"concepts/time-series/#dmd-vs-dm","title":"DMD vs DM","text":"<p>Regulation (EU) 2024/1747 defines a Dedicated Measurement Device (DMD) as</p> <p>a device linked to or embedded in an asset that provides demand response or flexibility services on the electricity market or to system operators</p> <p>We have chose to \"split\" this term in two, depending on the nature of the measurement. If the measurement is a meter, i.e. a device that measures cumulative flow of energy, then we call it a Dedicated Meter (DM).</p>"},{"location":"concepts/time-series/#measuring-instrument-directive-mid","title":"Measuring Instrument Directive (MID)","text":"<p>Directive 2014/32/EU is known as the Measuring Instrument Directive and outlines the requirements for a wide range of measuring instruments, including active electrical energy meters. MID compliance means that the meter gone through an independent conformity assessment.</p>"},{"location":"concepts/time-series/#characteristics","title":"Characteristics","text":"<p>The nature of a time-series can vary greatly, some characteristics to consider are</p> <ul> <li>Granularity - Time-resolution expressed as a duration like 1h,   15m and similar</li> <li>Quality \u2013 e.g. is it measured or metered and accuracy of   measurements and baselines</li> <li>Reliability \u2013 in the data stream</li> <li>Frequency \u2013 delay in the data stream</li> <li>Timeline \u2013 e.g. future or historic data</li> <li>Audit \u2013 essentially bi-temporal data</li> </ul>"},{"location":"concepts/time-series/#baselines","title":"Baselines","text":"<p>As defined above, a baseline is a counterfactual reference about the electrical quantities that would have been withdrawn or injected if there had been no activation of services.</p> <p>Baseline can be calculated on any logical level or origin, depending on the use. It is typically the service provider that has access to the most reliable (and possibly market sensitive) data that can be used to calculate an accurate baseline. They also often know the most about the assets general usage patterns. In situations where there is other loads on the same accounting point, it is unlikely that the service provider (or anyone else for that matter) can calculate a baseline that is accurate enough to be used for settlement.</p> <p>Depending on method, baseline can also be calculated by another party, but that might require data from the service provider to be transferred in advance.</p> <p>The fundamental problem with a baseline is that it is not possible to verify its correctness - it is counterfactural after all. We must rather determine a strategy that helps us to agree that the baseline is trustworthy or acceptable. There some main strategies to do this that can be used on their own or in combination:</p> <ul> <li>Standard method - calculated using a standard, deterministic, agreed-upon   method where input data is trusted and the calculation can be repeted at any   point in time.</li> <li>Auditable method - calculated using a method that can be audited, e.g. by   providing the input data and method.</li> <li>Trusted party - calculated by a trusted (third-)party with no vested   interest in the outcome</li> <li>Validate over time - calculated and communicated ahead-of-time and   validated continiously/over time by comparing it to actual metered values when   no trade is going on. This requires that the baseline is calculated   continously.</li> </ul> <p>Each of these strategies allows different methods of calculating baselines as well as put different requirements on the systems and the service provider.</p>"},{"location":"concepts/time-series/#baseline-methods","title":"Baseline methods","text":"<p>The following sections outline some of the methods that can be used to calculate baselines. These are methods that has been surfaced in our work group discussions.</p>"},{"location":"concepts/time-series/#black-box","title":"Black box","text":"<p>The baseline is calculated using a unspecified method that is concidered a \"black box\" by the value chain. This is typically done by the service provider (SP), potentially based on confidential input, using a proprietary algorithm.</p> <p>The black box method is the one that allows for the most innovation and allows the SP to use the best available data and methods, e.g. machine learning. However, it is also the most opaque and ensuring trust in this baseline can only be done by validating it over time.</p>"},{"location":"concepts/time-series/#plan","title":"Plan","text":"<p>This method uses a consumption or production plan as the baseline. Similar to the black box method, the plan can be validated over time to ensure trust in its accuracy. This method is only applicable to assets that are actively managed and have a clear operational profile, like industrial processes.</p>"},{"location":"concepts/time-series/#meter-before","title":"Meter before","text":"<p>The \"Meter before\" method uses the metered values before the activation as the baseline. This method should use the metered values for the same time period as the Imbalance Settlement Period (ISP) - 1h or 15m - as values typically will fluctuate between the ISPs.</p>"},{"location":"concepts/time-series/#meter-before-and-after","title":"Meter before and after","text":"<p>Similar to the \"Meter before\" method, but uses an average of the metered values before and after.</p>"},{"location":"concepts/time-series/#sliding-window","title":"Sliding window","text":"<p>A sliding window baseline is a baseline that is calculated using a sliding window of historical data. The window is typically a fixed time period, e.g. the last 5 days, and the baseline is calculated using the data in that window.</p> <p>This method can also use other inputs such as weather data, holidays, and other factors that can impact the consumption or production of energy.</p>"},{"location":"concepts/time-series/#zero","title":"Zero","text":"<p>The baseline is set to zero. Could be useful e.g. for fossil fuel generators or batteries. It can only be used if the asset is in contracted to not consume and/or produce energy for the periods it is part of a reservation contract.</p>"},{"location":"concepts/time-series/#quantification-and-verification","title":"Quantification and verification","text":"<p>When establishing how much flex has been delivered we conceptually split the activity in two: quantification and verification. These look very similar - and can sometime be one and the same - but does have different purposes.</p>"},{"location":"concepts/time-series/#quantification","title":"Quantification","text":"<p>Quantification is the continious activity of calculating the delivered volume after each and every activation. The purpose of quantification is to be able to do settlement. Quantification is about establishing the quantity of energy that was delivered, using a method that gives \"good\" and \"fair\" enough result for us to agree to using it.</p> <p>There are three main methods for quantifying the activated volume:</p> <ul> <li>Assumed delivery - where the activated volume is assumed to be the   same as what was traded in the market.</li> <li>Baseline comparison - where the activated volume is calculated by comparing   the baseline to the metered values.</li> <li>Reported delivery - where the activated volume is reported by the   service provider based on agreed upon terms.</li> </ul> <p>Quantification is done to support three types of settlement:</p> <ul> <li>Quantification for service settlement - must end up on the SPG   level since that is where the bids are.</li> <li>Quantification for imbalance adjustment and financial transfer - must be   done at the level of accounting point (AP) or lower (CU/TR). NOTE - See the   section   Non- or over-consumed energy due to activation of flexibility   for more details about imbalance settlement.</li> <li>Quantification for end user compensation - must be done at the level of   the accounting point (AP) or lower (CU/TR), since that is where the end user   is linked. While it is the service provider that is responsible for this and   has the agreement with the end user, it is important that any potential   flexibility volumes shown in a flexibility information system matches the   quantities that SP is using to compensate the end user, to avoid confusion and   distrust.</li> </ul> <p>For some assets it is easy and practical to quantify the activated volume on the CU or AP level, e.g. a single battery facility or large boilers.</p> <p>For other cases, such as a group of many small assets, it might not be practical to quantify the activated volume on the CU/AP level. By quantifying on the SPG level, we can use the \"law of large numbers\" to get a good prediction of the baseline (and thus the activated volume). Also, if quantification is done using the assumed delivery method, then the quantification happens on the SPG level per definition.</p> <p>Having consistent quantification (e.i. the quantification \"add up\" between the levels) can follow one one of two main strategies:</p> <ul> <li>aggregate - sum - quantification is done on the lower level, e.g. CU or   TR, and then aggregated to the SPG level.</li> <li>allocate - split . the quantification is done on the SPG level and then   allocated to the lower levels, using some kind of distribution factor.</li> </ul> <p>Allocation can be done with:</p> <ul> <li>fixed factors<ul> <li>even split</li> <li>per SPG</li> </ul> </li> <li>dynamic factors<ul> <li>assigned by SP per bid/activation - this required activation data</li> <li>assigned by doing an approximate quantification on the lower level</li> </ul> </li> </ul>"},{"location":"concepts/time-series/#verification","title":"Verification","text":"<p>Verification is an activity done by the system operator to check that a service was actually delivered. The system operator might want to assess both that the agreed volume was delivered and that the service was delivered with the right quality and in compliance with the product requirements of the specific products.</p> <p>Verification is targeted on the SPG level, where service is delivered.</p> <p>It might be callenging to properly verify that a service was delivered. Some challenges are</p> <ul> <li>access to data of high enough quality and granularity</li> <li>a trusted source of data</li> <li>noise in data - for instance if the flexible asset represents only part of the   energy consumption on an accounting point</li> <li>finding and applying the correct method to verify the service delivery</li> </ul> <p>Verification can be done for every trade or activation, but given the challenges it might be that it is feasible to only do it every now and then. This could for instance be once at application time and then ad-hoc or at certain intervals during the lifetime of the service providing group.</p> <p>If, however, verification of volume is done for every trade, then we can also consider it as quantification and the result should be used for settlement. It is however expected that we will see that quantification is done with a simplified method or with a higher degree of trust than what verification implies. Current TSO and DSO markets both quantify with simplified methods.</p> <p>The verification might include</p> <ul> <li>comparing the quantified volume to what is observed in the accounting point</li> <li>getting additional data from the service provider or others - e.g. high   granularity data - and doing analysis on that</li> </ul> <p>It is at the system operator's discretion to decide how and when to verify the service delivery, as long as it does not put an additional/undue burden on the service provider.</p>"},{"location":"concepts/time-series/#activation-data","title":"Activation data","text":"<p>Activation data is the data related to an activation of a flexible resource. For manual activation markets this is bid acceptance. For automatic reserves it is when thresholds for delivering service was met. It includes information about</p> <ul> <li>activated volume</li> <li>time period</li> <li>service providing group</li> </ul> <p>To be able to quantify the activated volume for imbalance settlement, we might need to know, after the delivery of service, which CU that was actually activated. This can be:</p> <ul> <li>simple boolean - <code>yes</code>/<code>no</code></li> <li>an actual contribution factor</li> </ul>"},{"location":"concepts/time-series/#non-or-over-consumed-energy-due-to-activation-of-flexibility","title":"Non- or over-consumed energy due to activation of flexibility","text":"<p>Activation of balancing and local services from fully independent service providers impacts the balance responsible party (BRP) and energy supplier (ES) on the accounting point(s) financially. Non-consumed or over-consumed energy can result in a financial loss or gain depending on prices, direction of activation and original balance of the BRP.</p> <p>The BRP and ES will be impacted in two ways:</p> <ul> <li>Financial - due to less/more energy sold/bought</li> <li>Imbalance settlement - since the balance of the BRP will be affected by   the activated volume</li> </ul> <p>The imbalance settlement impact is of course also financial and sometimes work in \u201copposite direction\u201d to the direct financial one. We should consider and handle the impacts independently since prices are different and impact is on ES vs BRP.</p> <p>How to handle this in DSO markets is still pending regulation, and the current approach in the EuroFlex pilot is to do nothing. The current situation is also that a large majority of service providers are BRPs, and not independent.</p> <p>In the TSO market, a split between roles for Balance Service Provider (BSP) and BRP is underway. This is not a fully independent service provider, but a small first step in that direction. Mitigation of the impact on imbalance settlement will be handled with imbalance adjustment, where the imbalance caused by activation is adjusted in the settlement. The financial impact will be handled by requiring bi-lateral agreements between BSP and the BRP. Also, all bids will be required to be with the same BRP.</p> <p>Centrally done financial transfer, where money is transferred between the parties, based on a set price (spot), is another way to mitigate the financial impact. A more elaborate method, called financial compensation, could consider the actual cost of the BRP and compensate that.</p> <p>One could also envision using the markets to mitigate the impacts. The BRP could be notified about activation and do intra-day trading to \u201ccover the difference\". The (D)SO could be required to make a counter-activation, i.e. an activation in the opposite direction to ensure system balance This could be used to mitigate the impacts if the counter-activation is for the correct BRP/ES. It will be close to impossible to ensure that as it will require additional methods for handling impact.</p> <p>The methods described in this section are summarized in the table below. The columns imbalance settlement and financial show if the methods are applicable to mitigate that specific impact.</p> Method Imbalance settlement Financial Comment Do nothing YES YES          Simple, and can be sufficient if traded volume is not \u201cnoticeable\u201d.         This method is applicable, but not really a full-fledged         \"solution\".      Bi-lateral agreement NO YES          Does not scale and is a barrier to entry for the service providers.         This is a sort of bi-lateral financial transfer.      Counter-activation YES NO          Ensures system balance, but will be close to impossible to use for         mitigating impact      Intra-day trading YES NO Financial transfer NO YES          Centrally handled. Price will not be \u201ccorrect\u201d, but probably good         enough?      Financial compensation NO YES Complicated. Imbalance adjustment YES NO <p>We believe that the most interesting methods to pilot for local flexibility markets and a common national flexibility register are do nothing, imbalance adjustment and financial transfer. It is ultimately regulation that will decide, but we can investigate if centrally handled imbalance adjustment and financial transfer is feasible at a reasonable complexity/cost.</p>"},{"location":"concepts/time-series/#meteredmeasured-data-administrators","title":"Metered/Measured Data Administrators","text":"<p>We find the definition of Metered Data Administrator (MDA) e.g. in Implementing Regulation (EU) 2023/1162.</p> <p>means a party responsible for storing validated historical metering and consumption data and distributing these data to final customers and/or eligible parties;</p> <p>Elhub is the de-facto MDA in Norway for smart meters on the accounting point level. There is specific party assigned as administrators for sub-meter or dedicated meter/measurement device data.</p>"},{"location":"concepts/time-series/#challenges","title":"Challenges","text":"<p>The following are some challenges that has been identified and must be addressed but are not directly in scope to \u201csolve\u201d in this overview.</p>"},{"location":"concepts/time-series/#data-privacy","title":"Data privacy","text":"<p>The higher the granularity of data, the more sensitive it becomes. This is relevant only for personal data, i.e. values tied to a private address or a sole proprietorship company.</p>"},{"location":"concepts/time-series/#data-access-and-flow","title":"Data access and flow","text":"<p>Securing every entitled party access to time-series is one of the challenges we must solve. Does it flow via a Flexibility Information System (FIS), directly between the involved parties or via some other platform/mechanism.</p>"},{"location":"concepts/time-series/#clock-drift","title":"Clock drift","text":"<p>If the time of different meter and measurement equipment is not in sync, then using those values together will produce incorrect results.</p>"},{"location":"concepts/time-series/#granularity-and-frequency-of-ams-data","title":"Granularity and frequency of AMS data","text":"<p>The AMS meters are considered of high integrity, but the lack of 15-minute data and delay in when the data is available via Elhub makes it less ideal to use for planning and baselining.</p>"},{"location":"concepts/time-series/#needs","title":"Needs","text":"<p>The rest of this document contains tables describing needs for different time-series in the flexibility value chain, based on the different aspects highlighted above.</p> <p>In short:</p> <ul> <li>Who \u2013 needs and has data</li> <li>What \u2013 the needs are</li> </ul> <p>We are making up some roles/responsibilities that is currently not defined elsewhere but since it is undefined who will do it, we single them out for clarity.</p> <ul> <li>Baseline provider \u2013 the party responsible for creating the baseline for a   given (group of) asset(s)</li> <li>Activated volume calculator \u2013 the party responsible for calculating activated   volume</li> </ul> <p>This document does not intend to specify any technical requirements to data interchange formats, though we should not be scared of recording some details, e.g. about current implementation/requirements.</p> <p>We generally want to express needs in a user-story like format. However, it also makes sense to structure the data in tabular format for easier filtering and mental processing.</p> <p>As such, we have tried to specify tables that accommodate something that looks like a Five Ws user story template like phrase.</p> <p>As <code>&lt;who&gt;</code>, I want <code>&lt;need/level/resolution/frequency&gt;</code> because <code>&lt;purpose&gt;</code></p> <p>Some abbreviations</p> <ul> <li>ISP \u2013 imbalance settlement period (1h / 15 m)</li> </ul> Who Need Level Res. Frequency Purpose Notes Imbalance settlement responsible Activated volume AP ISP D+1 Do imbalance adjustment per balance responsible party.          Relevant for TSO markets if regulation allows fully         independent service providers. Relevant for DSO markets         if regulation states that imbalance adjustment must be         done.      Balance Responsible Party and Service Providers Activated volume AP ISP D+1 Do financial transfers with energy suppliers.          When BRP/SP is responsible for the financial settlement with SP/ES         due to relying on bi-lateral agreement between SP and BRP.      Energy Supplier Activated volume AP ISP D+1 To be informed about activations Flexibility market Activated volume SPG 15m Same day Settle the activated flex.          Depending on the market/rules, this can be pay-as-bid, calculated         with use of baseline.      Flexibility marked Baseline SPG 15m Ahead of trading Bid screening and ensuring that there is \u201cavailable\u201d flex This is currently done in both NODES and Statnett markets. Service provider Activated volume AP/CU 15m Same day Share rewards with end user. It is not given that the SP will distribute rewards based on the actual activated volume per CU. Depends on the agreement between the SP and end user. Service provider Metered values SM/AMS 15m Real time Planning and optimizations Baseline provider Measured values TR 1m Real time Create good baselines Baseline provider Metered values SM/AMS 15m Real time Create good baselines Activated volume calculator Metered values 15m Same day Calculate activated volume          It is not given that the Activated volume is derived from         baseline/metered on the same level. An example can be for groups:         Baseline and activated is calculated on the SPG level, then the         activated is \u201cdistributed\u201d on the CUs via some key/algorithm.      Activated volume calculator Baseline 15m Same day Calculate activated volume System operator Baseline CU/AP At least ISP Same day Verifiy the provision of the service System operator Updated baseline - Ahead of trading When baseline change To have the best available data for verification System operator Corrected baseline - After trading When baseline have errors To be able to correct in case of errors System operator Parallell baselines - - - Assess different baseline methods over time System operator Baseline Continuously ahead of trading Validate baseline (if provided by service provider)          Validating baseline can be done by comparing the baseline to actual         metered values over time.      System operator Metered values AP/AMS At least ISP Verify the provision of the service          Procuring system operator might not be the connecting system         operator, so they might not have this data."},{"location":"guides/get-ready-for-market/","title":"Get ready for market","text":"<p>Before a service provider can participate in the market, several registration and qualification steps must be completed. The process starts with an empty Flexibility Information System (FIS) and ends with service providing groups that are fully validated, (pre)qualified, and ready for market participation.</p> <p>The diagram below highlights the key steps and their dependencies. It is not a map of all the processes, but shows the processes required for service providers and system operators to participate in the market.</p>"},{"location":"guides/get-ready-for-market/#prerequisites","title":"Prerequisites","text":"<ul> <li>System operator is registered in FIS.</li> <li>System operator has registered the products they want to procure in FIS.</li> </ul>"},{"location":"guides/get-ready-for-market/#process-groups","title":"Process Groups","text":"<p>The registration and qualification steps can be grouped into two purposes, which explains why these processes are necessary for market participation:</p> <ol> <li> <p>Ensuring safe operation Covers the technical registration of controllable units and the formation of service providing groups. This ensures that units do not compromise system security when participating in the market. Approved by connecting/impacted system operators.  </p> </li> <li> <p>Ensuring delivery capability Covers product applications and (pre)qualification steps for both service providers and service providing groups. This ensures that the provider can actually deliver the requested product type according to the requirements. Approved by procuring system operators.  </p> </li> </ol>"},{"location":"guides/get-ready-for-market/#registration-and-qualification-overview","title":"Registration and Qualification Overview","text":"<p>The following diagram shows how service providers move from an empty FIS to being ready for market:</p> <p></p> <p>The diagram shows us that a service provider can register all their data at once, and that the (pre)qualification processes can run in parallel.</p>"},{"location":"guides/get-ready-for-market/#notation","title":"Notation","text":"<p>We are using the following notation:</p> <ul> <li><code>ellipses</code> - start and end states</li> <li><code>rectangles</code> - processes<ul> <li><code>solid border</code> - main process (Processes)</li> <li><code>dotted border</code> - sub-process driving/responsible market party</li> </ul> </li> <li>colors indicating the driving/responsible market party for a (sub-)process<ul> <li><code>green</code> - system operator</li> <li><code>blue</code> - service provider</li> <li><code>red</code> - flexibility information system operator</li> <li><code>white</code> - unspecified</li> </ul> </li> <li><code>arrows</code> - dependencies between processes</li> </ul> <p>!!! note \"For a detailed definition of when a Service Providing Group (SPG) is considered ready for market\"</p> <pre><code>See the [Ready for market](../concepts/ready_for_market.md) concept page.\n</code></pre>"},{"location":"guides/getting-started/","title":"Getting Started","text":"<p>This page contains some help to get started using the Flexibility Information System Portal.</p>"},{"location":"guides/getting-started/#authentication","title":"Authentication","text":"<p>Prior to any other possible action, you must authenticate in the portal. The only page you can access as an anonymous user is the login page, automatically showed the first time you reach the URL where the system is hosted.</p> <p></p> <p>When you click on the <code>SIGN IN</code> button, you will be redirected to and external identity provider at Oracle Cloud Identity and Access Management (IAM) to authenticate.</p> <p></p> <p>Here, you must enter your credentials. These are the test credentials you have received by e-mail from us. The username is a fictive personal id (f\u00f8dselsnummer) and the password is what you created when you activated the account. Once done, you will be redirected back to the portal as an authenticated user.</p>"},{"location":"guides/getting-started/#assume-a-party","title":"Assume a party","text":"<p>Once logged in, you can access to the dashboard, a welcome page containing some important information and links, but you can also access the documentation for instance, and the Assume Party page, which is where you will be redirected by default after logging in :</p> <p></p> <p>On this page, you must choose a party in the list and click <code>ACT ON BEHALF OF THIS PARTY</code>. Finally, you will be redirected to the dashboard.</p> <p>For more detailed information about authentication, please head to the dedicated documentation page.</p>"},{"location":"guides/getting-started/#user-interface-of-the-flexibility-information-system","title":"User interface of the Flexibility Information System","text":"<p>Here is an example of resource page on the information system :</p> <p></p> <p>The user interface of the system is organised as the following :</p>"},{"location":"guides/getting-started/#1-navigation-menu","title":"1. Navigation menu","text":"<p>This menu can be used to switch between the various resources you may want to interact with.</p>"},{"location":"guides/getting-started/#2-breadcrumbs","title":"2. Breadcrumbs","text":"<p>This component is here to help you identify better where you are currently standing in the hierarchy of the information system, and allow you to jump back to the parent pages by clicking one of the links in the chain.</p>"},{"location":"guides/getting-started/#3-resource-information","title":"3. Resource information","text":"<p>This section can vary according to the type of page you are looking at. The example page is listing some records, but other pages allow creating, viewing or editing individual records.</p>"},{"location":"guides/getting-started/#4-user-menu","title":"4. User menu","text":"<p>This menu is there to remind you of who you are logged in as, and which party you are acting as. The party can be changed by clicking on the right-most component and going back to the Assume Party page.</p>"},{"location":"guides/test-data/","title":"Test Data","text":"<p>Each test user has its own set of test data generated into the system. This includes:</p> <ul> <li>a set of parties that can be used to interact with the system - one of each type</li> <li>a set of 1000 accounting point that is connected to the test users system operator</li> </ul> <p>To facilitate testing across parties, e.g. with multiple service providers, there is also a \"common\" set of parties that can be used.</p>"},{"location":"guides/test-data/#party-names","title":"Party names","text":"<p>The party names are set using the test user's first name and just appends the party abbreviation to it. For example, if the test user's first name is <code>John</code>, the party names will be <code>John SP</code>, <code>John SO</code>, etc.</p> <p>For the common test user, the party names are <code>Felles SP</code>, <code>Felles SO</code>, etc.</p>"},{"location":"guides/test-data/#generated-gln-and-gsrn","title":"Generated GLN and GSRN","text":"<p><code>GLN</code> is used for party identifiers and <code>GSRN</code> is used for accounting point identifiers.</p> <p>The test data is generated using the last three digits of the fake social security number (SSN) of the test user. This means that the test data for a user with SSN <code>12345678901</code> will be generated using the last three digits <code>901</code>.</p> <p>One \"problem\" with GLNs and GSRNs is that they have a check digit as a final digit. This means that you as a test user simply cannot increment to the \"next\" id. Therefore we provide functionality below to show the test data based on the last three digits of the SSN.</p> <p>The format of the GLN and GSRN is as follows:</p> <ul> <li>GLN - <code>13370</code> + 3-digit SSN suffix + 4-digit increment + check digit</li> <li>GSRN - <code>13370000000</code> + 3-digit SSN suffix + 3-digit increment + check digit</li> </ul> <p>Use the input boxes to change the SSN suffix and the user's first name. Your test data will show up below.</p> <p>Tip</p> <p>The values for the common test user is <code>0</code> and <code>Felles</code>.</p> SSN Suffix: User Firstname: Parties <p>         These are the test parties for .     </p> <ul> <li>                  -                  </li> </ul> Accounting points <p>         This list contains 1000 accounting points where          is the connecting system operator.     </p> <ul> <li> </li>"},{"location":"processes/","title":"Processes","text":"<p>This section of the documentation describes the business processes in the flexibility value chain. The processes assumes that there is one common Norwegian flexibility information system (FIS).</p> <p>The processes describe the sequence of activities that are done to achieve a goal. They are business processes and not technical processes in the FIS, but does provide quite a lot of details about how interaction will be done with the FIS API. All interactions with the FIS is done via syncronous calls to the Resource-oriented JSON-over-HTTP(s) Data API. The FIS API will be implemented to support the processes and enforce certain rules/policies such as data validation, state transitions and notifications.</p> <p>User experience will differ from the process descriptions</p> <p>The process descriptions are a generalized view of how interactions are done between parties and systems in the value chain. It does not show the actual user experience, but rather logical steps that must be performed, e.g. towards the FIS API.</p> <p>It is up to the FIS UI and market party backend system to provide a good user experience on top. Some interactions might be fully automated between systems, some might be chained together from a single user interface and some cases might require the user to follow the process steps quite literally.</p>"},{"location":"processes/#process-documentation","title":"Process documentation","text":"<p>Each process is documented in its own sub-page. The detail level varies between them. The intent is to provide just as much detail as needed to understand the process, but not more to avoid unnecessary rework when we change the processes.</p> <p>Some parts of the process might look more like a detailed procedure than a process while other parts are high-level and fairly unspecific. The lack of details can be either because we are missing information at present or because there is no need to specify in great detail. Over time, the processes will become more detailed.</p> <p>The following sub-sections describe some of the common elements of the process documentation. Other sections and elements will be added to the individual process pages as needed.</p>"},{"location":"processes/#high-level-description","title":"High level description","text":"<p>Each process has a high level description that describes the process.</p>"},{"location":"processes/#prerequisites","title":"Prerequisites","text":"<p>We are using prerequisites as a wide term to include all assumption, preconditions, dependencies, constraints and other conditions that must be met before a process can be done as documented.</p>"},{"location":"processes/#sequence","title":"Sequence","text":"<p>We are using PlantUML sequence diagrams to document the flow of the processes. The diagrams are simplified, business oriented descriptions of how the process should flow. Most of the time, we are not caring about error conditions or other exceptional cases. The process details the so-called \"happy path\".</p> <p>The diagram definition is a simple text format that is easy to read and write and is included for download.</p>"},{"location":"processes/#process-list","title":"Process list","text":"<p>The following is a list of processes where the Flexibility Information System might take part in. This is an evolving list. If we have started detailing the process, you will find that the process heading is a link to a sub-page. You can also use the menu to find process details.</p>"},{"location":"processes/#controllable-unit","title":"Controllable unit","text":""},{"location":"processes/#controllable-unit-lookup","title":"Controllable Unit Lookup","text":"<p>Before a service provider registers or switch a controllable unit, they must look up the controllable unit to see if it is already registered in the system.</p>"},{"location":"processes/#controllable-unit-registration","title":"Controllable unit registration","text":"<p>Register of a CU and data from a service provider and/or system user. Includes steps for connecting system operators to validate the information provided - Controllable Unit Grid Validation.</p>"},{"location":"processes/#controllable-unit-update","title":"Controllable unit update","text":"<p>Update of controllable unit information from service provider and/or system user. Includes steps for connecting system operators to validate the information provided (CU grid validation).</p>"},{"location":"processes/#service-provider-switching-initiated-by-the-new-service-provider","title":"Service provider switching initiated by the new service provider","text":"<p>Switching of a controllable unit between service providers. Initiated by new service provider.</p>"},{"location":"processes/#service-provider-contract-revocation-and-termination","title":"Service provider contract revocation and termination","text":"<p>Ending the service provider contract on a controllable unit. Initiated by end user, implicit contract termination or service provider.</p>"},{"location":"processes/#controllable-unit-suspension","title":"Controllable unit suspension","text":"<p>Entitled parties can suspend a controllable unit.</p>"},{"location":"processes/#controllable-unit-de-registration","title":"Controllable unit de-registration","text":"<p>Removing a controllable unit from the system. Must not be part of any SPG.</p>"},{"location":"processes/#service-provider","title":"Service provider","text":""},{"location":"processes/#service-provider-registration-and-approval","title":"Service provider registration and approval","text":"<p>Registering a new service provider and approval by the flexibility information system operator.</p>"},{"location":"processes/#service-provider-suspension","title":"Service provider suspension","text":"<p>Entitled parties, such as the regulator, can suspend a service provider.</p>"},{"location":"processes/#service-provider-update","title":"Service provider update","text":"<p>Update of service provider information from service provider.</p>"},{"location":"processes/#service-provider-product-application-and-qualification","title":"Service provider product application and qualification","text":"<p>A service provider applies for products with a specific procuring system operator. The application includes all the product types the service provider wants to offer to that specific system operator. The procuring system operator will qualify the service provider for the product(s). Includes communication test.</p>"},{"location":"processes/#service-provider-product-suspension","title":"Service provider product suspension","text":"<p>Suspension of a service provider product application and qualification initiated by system operator.</p>"},{"location":"processes/#service-provider-de-registration","title":"Service provider de-registration","text":"<p>De-registration of a service provider.</p>"},{"location":"processes/#service-providing-groups","title":"Service providing groups","text":"<p>The following lists the processes related to service providing groups. We are not modelling service proving units but rather treat them as a special case of service providing groups.</p>"},{"location":"processes/#service-providing-group-registration","title":"Service providing group registration","text":"<p>Registering a new service providing group. Includes grid prequalification.</p>"},{"location":"processes/#service-providing-group-suspension","title":"Service providing group suspension","text":"<p>Suspension of a service providing group grid prequalification initiated by system operator.</p>"},{"location":"processes/#update-service-providing-group","title":"Update service providing group","text":"<p>Update of service providing group information from service provider.</p>"},{"location":"processes/#assigning-controllable-units-to-groups","title":"Assigning controllable units to group(s)","text":"<p>Assigning controllable units to a group from service provider.</p>"},{"location":"processes/#removing-controllable-units-from-groups","title":"Removing controllable units from group(s)","text":"<p>Removing controllable units from a group from service provider.</p>"},{"location":"processes/#de-register-service-providing-group","title":"De-register service providing group","text":"<p>Removing a service providing group from the system.</p>"},{"location":"processes/#service-providing-group-product-application-and-prequalification","title":"Service providing group product application and prequalification","text":"<p>Service providers apply for product types with their SPGs. This includes product pre-qualification that might end in temporary qualification until the product verification is concluded. Includes procuring system operators to confirm the SPG characteristics registered by the service provider.</p>"},{"location":"processes/#service-providing-group-product-suspension","title":"Service providing group product suspension","text":"<p>This process is used to suspend the prequalification of a SPG. Initiated by system operator.</p>"},{"location":"processes/#product","title":"Product","text":"<p>Product management by system operators.</p>"},{"location":"processes/#system-operator-product-registration","title":"System operator product registration","text":"<p>The procuring system operator register what product types (according to national table of equivalences) they will procure.</p>"},{"location":"processes/#product-update","title":"Product update","text":"<p>Update of product information from procuring system operators.</p>"},{"location":"processes/#product-de-registration","title":"Product de-registration","text":"<p>Removing a product from the system.</p>"},{"location":"processes/#temporary-limits","title":"Temporary limits","text":""},{"location":"processes/#set-update-or-remove-temporary-limits-on-grid-elements","title":"Set, update or remove temporary limits on grid elements","text":"<p>Temporary limits on grid elements. Initiated by system operator.</p>"},{"location":"processes/#set-update-or-remove-temporary-limits-on-service-providing-groups","title":"Set, update or remove temporary limits on service providing groups","text":"<p>Temporary limits on service providing groups. Initiated by system operator.</p>"},{"location":"processes/#grid-topology","title":"Grid topology","text":"<p>TODO - processes related to maintaining the grid topology.</p>"},{"location":"processes/#metering-values","title":"Metering values","text":"<p>TODO - processes related to collecting, validating, storing and distributing metering values and other time-series like baselines.</p>"},{"location":"processes/#imbalance-adjustment","title":"Imbalance adjustment","text":"<p>TODO - processes related to imbalance adjustment.</p>"},{"location":"processes/#not-in-scope","title":"Not in scope","text":"<p>This section includes processes and procedures outlined in NCDR and/or other documents that are deemed out-of-scope for a Norwegian Flexibility Information System</p>"},{"location":"processes/#export-of-data-from-the-norwegian-flexibility-information-system","title":"Export of data from the Norwegian Flexibility Information System","text":"<p>NCDR states that:</p> <p>To avoid vendor and operator lock-ins, all data stored in the SP modules and CU modules shall be portable.</p> <p>This is not relevant since we are assuming the national terms in norway will dictate a single, integrated system operated by the system responsible.</p>"},{"location":"processes/#set-update-or-remove-temporary-limits-on-bids","title":"Set, update or remove temporary limits on bids","text":"<p>This must be handled in the market place.</p>"},{"location":"processes/controllable-unit-lookup/","title":"CU Lookup","text":"<p>This process is used to look up information about controllable units before initiating controllable unit registration or service provider switching, in order to verify whether the unit is already registered in the system.</p> <p>Before starting the CU registration or switching process, the service provider needs to verify the linkage between the end user and the accounting point / CU, as well as validate CU data. This process retrieves the necessary information from FIS, to ensure that the service provider has sufficient data to determine the appropriate process to execute.</p> <p>To prevent unauthorized use, FIS requires the end user id for the service provider to access CU data.</p>"},{"location":"processes/controllable-unit-lookup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Service provider has a consent from the end user to request data on the   accounting point / CU.</li> <li>Service provider knows the end user id and other key information about   accounting point / CU.</li> <li>CU ID provided from FIS must be used in service provider switching.</li> </ul>"},{"location":"processes/controllable-unit-lookup/#request-and-response","title":"Request and response","text":"<p>The input to the controllable unit lookup contains three fields:</p> <ul> <li>end user (EU) business identifier</li> <li>accounting point (AP) business identifier</li> <li>controllable unit (CU) business identifier</li> </ul> <p>The request must contain EU and one of AP or CU. If that requirement is not met, or the format of the input is malformed, the request will be rejected with a <code>400 - Bad Request</code> response.</p> <p>If the request is valid, but the requested resource (CU or AP) does not exist, the response will be <code>404 - Not Found</code>. If the requested resource exist, but the end user does not match the end user associated with the CU or AP, the response will be <code>403 - Forbidden</code>.</p> <p>Upon a successful request, the response will be <code>200 - Ok</code> and contain the following fields.</p> Field Abbr Description end_user EU Technical identifier for the end user. accounting_point AP Information about the accounting point, including its identifier. controllable_units CU A list of controllable units, if found. Each containing a list of technical resources. <p>The following table describes the possible combinations of input parameters and the expected response. The column <code>Next action</code> is just ment as a guide.</p> CU AP AP exists CU(s) exists EU matches HTTP response Response Next action Yes No \u2754 \u274c \u2754 404 - Not found ErrorMessage Check request data Yes No \u2754 \u2705 \u274c 403 - Forbidden ErrorMessage Check request data Yes No \u2754 \u2705 \u2705 200 - Ok EU, AP, CU(1) Create contract No Yes \u274c \u2754 \u2754 404 - Not found ErrorMessage Check request data No Yes \u2705 \u2754 \u274c 403 - Forbidden ErrorMessage Check request data No Yes \u2705 \u274c \u2705 200 - Ok EU, AP, CU(0) Create CU No Yes \u2705 \u2705 \u2705 200 - Ok EU, AP, CU(n) Evaluate returned CUs"},{"location":"processes/controllable-unit-lookup/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/controllable-unit-registration/","title":"CU Registration","text":"<p>This process describes the registration of a controllable unit (CU) in the flexibility register as a Service Provider. It also includes grid validation for the system operator to validate the information provided.</p> <p>A CU is considered new until the status is changed to active. Once grid validation is requested, any changes to the CU is considered an update, and handled by the update process. Grid validation on the CU level is done by the connecting system operator.</p> <p>The connecting system operator will during the validation process be able to inform SP about missing details.</p>"},{"location":"processes/controllable-unit-registration/#prerequisites","title":"Prerequisites","text":"<ul> <li>The service provider runs controllable unit lookup to check if CU exists in   the flexibility information system</li> <li>Controllable Unit does not exist in the flexibility information system</li> <li>Service Provider knows the metering point id of the accounting point for the   controllable unit</li> <li>Flexibility Information System knows<ul> <li>the system operator and end user of all metering points (from Elhub)</li> <li>mapping of grid nodes in local markets to grid nodes in transmission   system operator markets</li> </ul> </li> <li>There is no national grid model that includes all metering point ids. Requires   system operator to map metering points to grid nodes.</li> </ul>"},{"location":"processes/controllable-unit-registration/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/controllable-unit-update/","title":"CU Update","text":"<p>Update of controllable unit information from service provider. Includes steps for connecting system operators to validate the information provided (CU grid validation) if needed.</p>"},{"location":"processes/controllable-unit-update/#prerequisites","title":"Prerequisites","text":"<ul> <li>Controllable Unit exist in the flexibility information system.</li> <li>Service provider has access to the controllable unit.</li> <li>The system operator evaluates if the update triggers the need for new grid validation.<ul> <li>If the change does not trigger new grid validation, system operator should   update last validated time.</li> <li>If the change triggers new grid validation, system operator should update   to relevant status and initiate grid validation without undue delay.</li> </ul> </li> </ul>"},{"location":"processes/controllable-unit-update/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/revocation/","title":"SP Contract Revocation and Termination","text":"<p>This process is used to terminate the service provider contract for the controllable unit. The process can be triggered by one of the following:</p> <ul> <li>Service contract revocation by end user.</li> <li>Implicit contract termination triggered by updated end user information in   Elhub (Metering Point Administrator).</li> <li>Service contract termination by service provider.</li> </ul> <p>Updated end user information from Elhub can occur for several reasons, such as:</p> <ul> <li>Move in of a new end user, which automatically terminates the current end user.</li> <li>Move out of the current end user.</li> <li>Deactivation of an accounting point, which results in the termination of the   current end user.</li> <li>Corrections to move ins and move outs, which trigger updates on end users.</li> </ul> <p>In all these cases, FIS does not have insight into the reasons behind the updates from Elhub. Therefore, it is important for the service provider to actively monitor these updates and verify them against their end users, to assess whether the update trigger an implicit contract termination. Note that updates on end user information from Elhub can be both in the future and back in time.</p>"},{"location":"processes/revocation/#prerequisites","title":"Prerequisites","text":"<ul> <li>The service provider acts on behalf of the end user in all scenarios.</li> <li>End users access to the controllable unit is given based   on continuously updated end user information from Elhub.</li> <li>A controllable unit service provider contract is decoupled from the end user   and can span multiple end users from Elhub.</li> <li>The service provider must verify the information given by FIS when informed   of an implicit contract termination.</li> <li>The service provider must update affected service providing groups if the CU   contract is revoked or terminated.</li> </ul>"},{"location":"processes/revocation/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-provider-product-application/","title":"SP Product Application and Qualification","text":"<p>A service provider applies for products with a specific procuring system operator. The application includes all the product types the service provider wants to offer to that specific system operator.</p> <p>One at the time</p> <p>The service provider should only initiate one application per product type, then wait for that application to be processed before initiating another application for the same product type towards another system operator. This prevents double/duplicate work for the system operators. The qualification process done by the system operator will be much lighter when the service provider is already qualified for the product type by another system operator.</p> <p>The service provider will have to apply for the product type(s) they want to deliver for every procuring system operator they want to deliver to, but if the service provider is already qualified for the product type by another procuring system operation, the qualification process can be simplified by letting the flexibility information system automatically move the application ahead to communication test.</p>"},{"location":"processes/service-provider-product-application/#prerequisites","title":"Prerequisites","text":"<ul> <li>The service provider is registered and approved by the flexibility information   system operator.</li> <li>Service provider data is updated. The data used in qualifying is registered on   the service provider, not the application itself.</li> <li>The service provider will identify and nominate a system operator to do the   qualification. This is done as part of the application.</li> </ul>"},{"location":"processes/service-provider-product-application/#qualification-checks","title":"Qualification checks","text":"<p>The procedure for qualifying a SP will differ based on what product types the SP is applying for. The qualification is about ensuring that the service provider is capable of delivering the specific type of product. The qualification is done by a procuring system operator.</p> <p>Also note that the service provider has been vetted as part of the registration process and that SPG product application will happen later.</p> <p>The following is a list of types-of-checks that might be relevant for the qualification, depending on the product type.</p> <ul> <li>Banking information.</li> <li>Financial security.</li> <li>Trading license from the Norwegian Energy   Regulatory Authority (RME).</li> <li>Settlement agreement with settlement responsible for imbalance settlement.</li> <li>User agreement with the procuring system operator/market operator.</li> <li>Qualifying the service providers technical solutions for activation, including   full chain of systems involved.</li> <li>Communication test.</li> <li>Operational capabilities e.g. operations center and on-call procedures.</li> </ul>"},{"location":"processes/service-provider-product-application/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-provider-product-suspension/","title":"SP Product Suspension","text":"<p>This process is used to suspend the service provider product qualification temporarily. The suspension is done by a procuring system operator and is registered in the flexibility information system (FIS) by updating the relevant SP product application. By registering it in the FIS, both the service provider and other relevant procuring system operators will be made aware of the suspension.</p> <p>The suspension is valid for the following combination.</p> <ul> <li><code>service provider</code> - the one that is suspended</li> <li><code>procuring system operator</code> - the one that suspends</li> <li><code>product types</code> - a list of product types that the SP is qualified for</li> </ul> <p>This means that the suspension does not impact other procuring system operators. Procuring system operators that have qualified the service provider for the same product type will however be notified of the suspension.</p> <p>The system operator must include the reason for suspension when suspending. The reason for suspension is a predefined list. There are two reasons for that. The first is that the PSO is only allowed to suspend for valid reasons. The other is that it allows for a greater degree of automation in the process.</p> Reason Description <code>communication_issues</code> There are communication issues between the service provider and the procuring system operator. <code>failing_heartbeat</code> If SP does not respond to heartbeat, SO may consider the SP to be unavailable for activation. <code>system_issues</code> There are issues with the service providers systems. Their back office systems used in delivering flexibility. <code>clearing_issues</code> Delayed or lack of payment. <code>failed_verification</code> The agreed upon service has not been delivered - in multiple consecutive trades. <code>other</code> Should generally not be used, but can in cases where PSO have a valid reason for suspension that is outside the other defined reasons. <p>Depending on the reason for suspension, the system operator should warn the service provider in advance of the suspension. The reasons for suspension that require a warning in advance of the suspension - and how that warning is conveyed - must be specified in the terms and conditions of the product type or service.</p> <p>The process also includes reinstatement of the service provider qualification, i.e. removing the suspension.</p>"},{"location":"processes/service-provider-product-suspension/#prerequisites","title":"Prerequisites","text":"<ul> <li>The issue that triggers the suspension is temporary.</li> <li>Adding and lifting a suspension is instantaneus. There is no need to   communicate suspension or reinstatement ahead in time.</li> <li>End users should not be notified about or view the suspension in FIS. Service   providers will notify end users when necessary and dependent on the agreement   between them and the end user.</li> <li>The suspension of the SP qualification will impact the   ready for market   status for a SPG.</li> </ul>"},{"location":"processes/service-provider-product-suspension/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-provider-registration-and-approval/","title":"SP Registration and Approval","text":"<p>Service provider registration is the process of registering the service provider with the Flexibility Information System. It starts with a new service provider that wants to take part in the market(s) and end once the service provider is successfully registered in the Flexibility Information System and can apply for products and start adding/modifying controllable units and service providing groups.</p>"},{"location":"processes/service-provider-registration-and-approval/#existing-processes","title":"Existing Processes","text":"<p>This section lists some existing processes that has been used as inspiration or input to the design of the process.</p> <ul> <li>Balancing markets - Statnett</li> <li>EuroFlex R&amp;D</li> <li>Ny akt\u00f8r - Elhub</li> </ul>"},{"location":"processes/service-provider-registration-and-approval/#prerequisites","title":"Prerequisites","text":"<p>The following is a list of conditions that must be met before the process can successfully be executed.</p> <ul> <li>It is assumed that the service provider does not have a party identifier,   either GLN or EIC-X, and as such the process includes a step to request one.</li> <li>The Ediel register is a national register of market participants in the   power sector. It is natural that the service provider is registered there first.</li> </ul>"},{"location":"processes/service-provider-registration-and-approval/#approval-checks","title":"Approval checks","text":"<p>The approval of a service provider by FIS is based on the following types-of-checks.</p> <ul> <li>The legal entity (organization) is registered in Br\u00f8nn\u00f8ysundsregisteret. The   main organization number is used in the registration process.</li> <li>The service provider has a valid party identifier (GLN or EIC-X).</li> <li>Contact information is provided (in Ediel).</li> <li>The service provider has signed a user agreement with FIS.</li> </ul> <p>The approval process does not include any steps to verify that the service provider is capable of delivering services/products. Such qualification will be handled in the product application and qualification process.</p>"},{"location":"processes/service-provider-registration-and-approval/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-provider-switching/","title":"SP Switching Initiated by New SP","text":"<p>The end user contacts a new service provider in order to obtain a new contract for controllable unit services and ending of the contract with the present service provider</p>"},{"location":"processes/service-provider-switching/#prerequisites","title":"Prerequisites","text":"<ul> <li>There exists a valid contract between the new service provider and the end   user, and all contract requirements from the old contract have been met.</li> <li>The service provider acts on behalf of the end user.</li> <li>The service provider gets necessary information to perform the switch by doing   controllable unit lookup.</li> <li>The controllable unit will remain with the old service provider\u2019s control and   useable for operations until the contract start date for new service provider.</li> <li>The old service provider must update affected service providing groups.</li> </ul>"},{"location":"processes/service-provider-switching/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-providing-group-grid-suspension/","title":"SPG grid suspension","text":"<p>This process is used to suspend the service providing group (SPG) temporarily. The suspension is done by an impacted system operator and is registered in the flexibility information system (FIS) by creating a SPG grid suspension. By registering it in the FIS, both the service provider, relevant procuring and impacted system operators will be made aware of the suspension.</p> <p>The suspension is valid for the following combination:</p> <ul> <li><code>service providing group</code>- the SPG that is suspended.</li> <li><code>service provider</code> - the supplier of the SPG.</li> <li><code>impacted system operator</code>- the one that suspends.</li> </ul> <p>All procuring system operators will be affected by the suspension as the SPG will no longer be approved to deliver services. Procuring system operators and impacted system operators will receive notification of the suspension.</p> <p>Suspension is a powerful tool, and might not be the right way to limit the use of a SPG. A SPG grid suspension will effectively prevent the SPG from delivering any services to any PSO. The ISO must consider using softer tools such as temporary limits.</p> <p>The impacted system operator must include the reason for suspension when suspending. The reason for suspension is a predefined list. There are two reasons for that. The first is that the ISO is only allowed to suspend for valid reasons. The other is that it allows for a greater degree of automation in the process.</p> Reason Description <code>breach_of_conditions</code> The SPG grid prequalification status is conditionally_approved and SPG repeatedly breaches the conditions. <code>significant_group_change</code> In cases where the SPG is altered significantly and ISO needs time to consider if they need to do a new grid prequalification or use other tools. <code>other</code> Should generally not be used, but can in cases where ISO has a valid reason for suspension that is outside the other defined reasons. <p>Depending on the reason for suspension, the system operator should warn the service provider in advance of the suspension. The reasons for suspension that require a warning in advance of the suspension - and how that warning is conveyed - must be specified in the national terms and conditions.</p> <p>The process also includes reinstatement of the service providing group grid prequalification, i.e. removing the suspension.</p>"},{"location":"processes/service-providing-group-grid-suspension/#prerequisites","title":"Prerequisites","text":"<ul> <li>The issue that triggers the suspension is temporary.</li> <li>Adding and lifting a suspension is instantaneous. There is no need to   communicate suspension or reinstatement ahead in time.</li> <li>End users should not be notified about or view the suspension in FIS. Service   providers will notify end users when necessary and dependent on the agreement   between them and the end user.</li> <li>The suspension of the SPG will impact the   ready for market   status for a SPG.</li> </ul>"},{"location":"processes/service-providing-group-grid-suspension/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-providing-group-product-application/","title":"SPG Product Application and Prequalification","text":"<p>A service provider applies for a combination of a SPG and a product type with a specific procuring system operator.</p> <p>The service provider will have to apply for the combination of a SPG and a product type for every procuring system operator they want to deliver to. The system operator will assess if a prequalification or a verification is needed, and simplify if certain conditions are met.</p>"},{"location":"processes/service-providing-group-product-application/#prerequisites","title":"Prerequisites","text":"<ul> <li>The   service provider is registered   and approved by the flexibility information system operator.</li> <li>The service provider has   registered the Service Providing Group.</li> </ul>"},{"location":"processes/service-providing-group-product-application/#prequalification-checks","title":"Prequalification checks","text":"<p>The procedure for prequalifying a SPG will differ based on what product types the SP is applying for. The checks also might differ based on the composition of the SPG.</p> <p>Also note that the service provider has been vetted as part of the registration and product application processes.</p> <p>The following is a list of types-of-checks that might be relevant for the prequalification.</p> <ul> <li>The SPG has the necessary technical capabilities to deliver the product type.</li> <li>The Service provider has been qualified for offering services to the SO for   the specific product type as part of the   service provider product application process.</li> <li>Activation test</li> </ul>"},{"location":"processes/service-providing-group-product-application/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/service-providing-group-registration/","title":"SPG Registration","text":"<p>Service Providing Group registration is the process of registering a new SPG, adding CUs and ends once grid prequalification is completed. The process is initiated by the Service Provider.</p> <p>A Service Providing Group (SPG) is considered as new until the status is changed to active. When this happens, grid prequalification notifications are sent to all ISOs. Once grid prequalification has been requested, any changes to the SPG is considered an update, and handled by the update process.</p>"},{"location":"processes/service-providing-group-registration/#prerequisites","title":"Prerequisites","text":"<ul> <li>Controllable units are registered and assigned to the Service Provider.</li> <li>Service Providing Unit is not modelled in the process. We do not have a clear   understanding of the reasoning behind distinguishing between the two.</li> <li>Creating a SPG will commonly be done from another system, e.g. SP backoffice   systems or the market systems. The actor that does changes towards the FIS   will still be the service provider, so the process does not model those   systems specifically. The FIS is considered the system of record for the SPG information.</li> </ul>"},{"location":"processes/service-providing-group-registration/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"processes/system-operator-product-registration/","title":"SO Product Registration","text":"<p>The procuring system operator register what product types they intend to procure.</p>"},{"location":"processes/system-operator-product-registration/#prerequisites","title":"Prerequisites","text":"<p>The following are prerequisites for this process:</p> <ul> <li>Flexibility Information System as a list of product types defined by national   terms and conditions with reference to table of equivalences</li> </ul>"},{"location":"processes/system-operator-product-registration/#sequence","title":"Sequence","text":"<p>Full Size | PlantUML description</p> <p></p>"},{"location":"resources/","title":"Resources","text":"<p>Info</p> <p>Use the navigation menu to find the resource you are looking for.</p> <p>This section of the documentation describes the resources in the API. This page explains some concepts that are common to the resource pages. It also contains an overview of the resources.</p> <p>The following diagram shows all the resources in the system and how they are connected. The boxes are resources and the arrows are relationships. The label on the relationship is the name of the field on the resource where the arrow originate. Think of the arrows as foreign keys/references.</p> <p>Resources marked with \ud83d\udd70\ufe0f have a corresponding <code>_history</code> resource (see details below).</p> <p>Future resources are dotted and marked with \ud83d\udee0\ufe0f.</p> <p></p> <p>Details about each resource can be found on the page for the specific resource. Use the navigation menu to find the resource.</p>"},{"location":"resources/#status","title":"Status","text":"<p>As we are exposing a resource-oriented data API, the various business processes are not represented as resources in our database and the endpoints are not explicitly tied to a particular process. Instead, we represent stateful content in the resources as status fields in the database, that can be updated along the life of a given resource to conceptually move it between the steps of a process.</p> <p>The status fields generally have an initial state (e.g., <code>new</code>), used from the creation of the resource to the start of a process involving it, and a terminal state (e.g., <code>terminated</code>) to represent end of life.</p>"},{"location":"resources/#status-and-transitions","title":"Status and transitions","text":"<p>We are using directed graph diagrams to show statuses and their transitions.</p> <ul> <li><code>point</code> - the starting point</li> <li><code>rectangles</code> - statuses</li> <li><code>oval</code> - \"End state\". Only FIS operator can move out of this state.</li> <li>The following colors indicate the driving/responsible market party for a transition<ul> <li><code>green</code> - system operator</li> <li><code>blue</code> - service provider</li> <li><code>pink</code> - flexibility information system</li> <li><code>black</code> - is used when multiple market parties can/are updating the status</li> </ul> </li> </ul> <p>We are generally just showing some example transitions that we think are relevant. The system will not restrict the transitions to these, unless there are very specific reasons. This means that, in general, that the procedures and processes will dictate transitions, but it will not be enforced by the system.</p> <p>Example (from controllable unit):</p> <p></p>"},{"location":"resources/#history","title":"History","text":"<p>On most resources we are tracking historic versions in a separate resource suffixed by <code>_history</code>. If the main resource is <code>controllable_unit</code>, then the history resource is <code>controllable_unit_history</code>.</p> <p>Field Level Authorization for the history resource follows the main resource, except it is read only. The history record also contains three additional fields. The table below shows what these fields are and where they inherit FLA from.</p> Name Description Format Reference FLA &lt;resource&gt;_id Id of the resource that this history is for bigintGeneratedRead only <code>id</code> replaced_at Time the resource was replaced timestamp with time zoneGeneratedRead only <code>recorded_at</code> replaced_by Id of the identity that replaced the resource bigintGeneratedRead only <code>recorded_by</code> <p>Resource Level Authorization for the history resource are documented in the same place as the main resource and typically start with <code>&lt;action&gt; history ..</code>.</p>"},{"location":"resources/#notifications","title":"Notifications","text":"<p>When <code>create</code>, <code>update</code>, or <code>delete</code> actions are performed on a resource, events are usually recorded. The events are notified to certain parties. The rules for who is notified for each event are documented on the resource page in the <code>Notifications</code> section.</p> <p>If the action is performed by a party that is listed as the recipient of the notification, the notification is not sent.</p>"},{"location":"resources/#validation-rules","title":"Validation rules","text":"<p>Each resource is subject to several layers of validation to ensure consistency in the database. The validations are documented on each individual page.</p>"},{"location":"resources/#field-format-validation","title":"Field format validation","text":"<p>The first layer is field format, stated for each field on the page of each resource in the field table. It ensures every field belongs to a correct set of values, independently of other fields and other resources. Expressed in the field table.</p>"},{"location":"resources/#inter-field-validation","title":"Inter-field validation","text":"<p>The second layer is inter-field validation. It checks that the fields in a given resource entry are consistent with each other. Expressed as a list of validation rules.</p>"},{"location":"resources/#resource-level-validation","title":"Resource-level validation","text":"<p>The third layer is resource-level validation. This layer has a broader scope than one resource because it checks several resources are consistent with each other. For instance, it can perform checks in other resource tables thanks to the foreign keys.</p>"},{"location":"resources/#process-level-validation","title":"Process-level validation","text":"<p>The fourth and last layer is process-level validation. It is the highest level of validation because it is linked to the business processes manipulating the database. It must verify that steps of a given process happen in the right order, and that this reflects in the database.</p>"},{"location":"resources/accounting_point/","title":"Accounting Point","text":"<p>A metering point where the consumption or production of electricity is measured and settled.</p> <p>Provides a way for parties to identify the system operator of the accounting point.</p> <p>Data from Elhub.</p>"},{"location":"resources/accounting_point/#business-identifiers","title":"Business Identifiers","text":"<p>The business identifier is the GSRN metering point id.</p>"},{"location":"resources/accounting_point/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/accounting_point/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only business_id The GSRN metering point id of the accounting point. textPattern: <code>^[1-9][0-9]{17}$</code>Read only system_operator_id The system operator of the accounting point. bigintRead only party.id recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/accounting_point/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/accounting_point/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/accounting_point/#authorization","title":"Authorization","text":""},{"location":"resources/accounting_point/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/accounting_point/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#common","title":"Common","text":"Policy key Policy Status AP-COM001 Read all accounting points. DONE"},{"location":"resources/accounting_point/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R business_id R R R R R R R R system_operator_id R R R R R R R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/accounting_point_balance_responsible_party/","title":"Accounting Point Balance Responsible Party","text":"<p>Relation linking a balance responsible party to an accounting point.</p> <p>Data from Elhub.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/accounting_point_balance_responsible_party/#fields","title":"Fields","text":"Name Description Format Reference accounting_point_id The ID of the accounting point. bigintRead only accounting_point.id balance_responsible_party_id The balance responsible party of the accounting point. bigintRead only party.id energy_direction The direction of the effect on the balance that the BRP takes responsibility for. textOne of: <code>consumption</code>, <code>production</code>Read only valid_from The date from which the relation between the accounting point and the balance responsible party is valid. Midnight aligned on Norwegian timezone. timestamp with time zoneRead only valid_to The date until which the relation between the accounting point and the balance responsible party is valid. Midnight aligned on Norwegian timezone. timestamp with time zoneRead only"},{"location":"resources/accounting_point_balance_responsible_party/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#authorization","title":"Authorization","text":""},{"location":"resources/accounting_point_balance_responsible_party/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status APBRP-FISO001 Read all APBRP. DONE"},{"location":"resources/accounting_point_balance_responsible_party/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#system-operator","title":"System Operator","text":"Policy key Policy Status APBRP-SO001 Read APBRP when they are system operator on the AP. DONE"},{"location":"resources/accounting_point_balance_responsible_party/#service-provider","title":"Service Provider","text":"Policy key Policy Status APBRP-SP001 Read APBRP on periods where they are related to a CU on the AP. DONE"},{"location":"resources/accounting_point_balance_responsible_party/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_balance_responsible_party/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG accounting_point_id R R R R R R R R balance_responsible_party_id R R R R R R R R energy_direction R R R R R R R R valid_from R R R R R R R R valid_to R R R R R R R R"},{"location":"resources/accounting_point_energy_supplier/","title":"Accounting Point Energy Supplier","text":"<p>Relation linking an energy supplier to an accounting point.</p> <p>Data from Elhub.</p>"},{"location":"resources/accounting_point_energy_supplier/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/accounting_point_energy_supplier/#fields","title":"Fields","text":"Name Description Format Reference accounting_point_id The ID of the accounting point. bigintRead only accounting_point.id energy_supplier_id The energy supplier of the accounting point. bigintRead only party.id valid_from The date from which the relation between the accounting point and the energy supplier is valid. Midnight aligned on Norwegian timezone. timestamp with time zoneRead only valid_to The date until which the relation between the accounting point and the energy supplier is valid. Midnight aligned on Norwegian timezone. timestamp with time zoneRead only"},{"location":"resources/accounting_point_energy_supplier/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/accounting_point_energy_supplier/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/accounting_point_energy_supplier/#authorization","title":"Authorization","text":""},{"location":"resources/accounting_point_energy_supplier/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/accounting_point_energy_supplier/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status APES-FISO001 Read all APES. DONE"},{"location":"resources/accounting_point_energy_supplier/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#system-operator","title":"System Operator","text":"Policy key Policy Status APES-SO001 Read APES when they are system operator on the AP. DONE"},{"location":"resources/accounting_point_energy_supplier/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/accounting_point_energy_supplier/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG accounting_point_id R R R R R R R R energy_supplier_id R R R R R R R R valid_from R R R R R R R R valid_to R R R R R R R R"},{"location":"resources/controllable_unit/","title":"Controllable Unit","text":"<p>A controllable unit is defined as \"a single power-generating module and/or demand unit\" in public consultation on the draft network code on demand response.</p> <p>The controllable unit is connected to a single accounting point. This restriction is there to provide a unambiguous connection between the controllable unit and the balance responsible party of the energy supplier. This enables us to do imbalance adjustment.</p> <p>The accounting point is also used to determine the locational information of the controllable unit.</p>"},{"location":"resources/controllable_unit/#business-identifiers","title":"Business Identifiers","text":"<p>Controllable units are identified by a UUID. UUID are simple and easy to generate and requires no coordination with external bodies (like GS1 or ENTSO-E). It is a un-complicated way to ensure uniqueness.</p> <p>The UUIDs are generated by the system when a CU is created.</p>"},{"location":"resources/controllable_unit/#status-transitions-for-grid-validation","title":"Status transitions for grid validation","text":"<p>The following diagram shows the transitions for the grid validation status of controllable units. It normally starts as <code>pending</code>, then the system operator takes over to conclude on their validation or signal that information is missing. On any change to a technical information on a controllable unit or one of its technical resources, the grid validation status is reset to <code>pending</code> if not already <code>pending</code> or in statuses <code>in_progress</code> or <code>validated</code>.</p> <p>If the service provider significantly updates data on a controllable unit that has already been <code>validated</code> by CSO, then the CSO has the option to re-validate. The <code>validated_at</code> field can be used in combination with history on the controllable unit to determine if a significant change has occurred. The CSO can then either reset the status before doing the validation or directly do the validation and just update the <code>validated_at</code> timestamp.</p> <p>Full Size | Plantuml description | How to read the diagram</p> <p></p>"},{"location":"resources/controllable_unit/#status-transitions-for-controllable-unit","title":"Status transitions for controllable unit","text":"<p>The following diagram shows the status and its transitions for controllable unit. The Service Provider is responsible for creating a new controllable unit. Initially, the status is set to \"new.\" Once the CU registration is complete, the Service Provider updates the status to \"active.\" After termination, the status can only be edited by a FIS operator.</p> <p>Full Size | Plantuml description | How to read the diagram</p> <p></p>"},{"location":"resources/controllable_unit/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/controllable_unit/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate key. bigintRead only business_id Unique business identifier for the controllable unit. textPattern: <code>^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$</code>Read only name Free text name of the controllable unit. textRequiredMax length: <code>512</code> start_date The usage date when the controllable unit is first active. date status The status of the controllable unit. textOne of: <code>new</code>, <code>active</code>, <code>inactive</code>, <code>terminated</code>Default: <code>new</code>Always <code>new</code> when created. Can then be updated to the other values. Once <code>terminated</code>, only editable by a FIS operator. regulation_direction The regulation direction of the controllable unit. <code>up</code> means it can be used to increase production or decrease consumption, while <code>down</code> means to decrease production or increase consumption. textOne of: <code>up</code>, <code>down</code>, <code>both</code>Required<code>up</code> maximum_available_capacity Maximum continuous active power that the controllable unit can produce or consume, i.e. deliver for balancing and congestion services, in kilowatts. decimalRequiredMin: <code>0</code>Max: <code>999999.999</code>Multiple of: <code>0.001</code> is_small Whether the controllable unit is small or not, following NCDR. booleanRead only minimum_duration The minimum activation duration in seconds. bigintMin: <code>0</code> maximum_duration The maximum activation duration in seconds. bigintMin: <code>0</code> recovery_duration The minimum recovery duration between activations in seconds. bigintMin: <code>0</code> ramp_rate The rate of power per unit of time to reach empty or full power for the controllable unit, in kilowatts per minute. decimalMin: <code>0.001</code>Multiple of: <code>0.001</code> accounting_point_id Reference to the accounting point that the controllable unit is connected to. bigintRequiredNon-updatable accounting_point.id grid_node_id Reference to the node that the controllable unit is connected to. textPattern: <code>^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$</code> grid_validation_status The grid validation status of the controllable unit. textOne of: <code>pending</code>, <code>in_progress</code>, <code>incomplete_information</code>, <code>validated</code>, <code>validation_failed</code>Default: <code>pending</code> grid_validation_notes Free text notes on the current grid validation status. textMax length: <code>512</code> validated_at When the controllable unit was last validated. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/controllable_unit/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status CU-VAL001 If both <code>minimum_duration</code> and <code>maximum_duration</code> are specified, then the minimum duration must be lower than the maximum duration. DONE CU-VAL002 If <code>grid_validation_status</code> is set to <code>validated</code>, then <code>validated_at</code> must already be specified in the resource or the request. DONE CU-VAL003 If <code>grid_validation_status</code> is set to <code>validation_failed</code>, then <code>validated_at</code> must be unset in the resource or by the request. DONE"},{"location":"resources/controllable_unit/#notifications","title":"Notifications","text":"Action Recipient Comment create Connecting SO create End user of the accounting point update Active SP update Connecting SO When status is not <code>new</code>"},{"location":"resources/controllable_unit/#authorization","title":"Authorization","text":""},{"location":"resources/controllable_unit/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/controllable_unit/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit/#balance-responsible-party","title":"Balance Responsible Party","text":"Policy key Policy Status CU-BRP001 Read CU data that are connected to AP where they are BRP. Only for the contract period. DONE CU-BRP002 Read CU history that are connected to AP where they are BRP. Only for the contract period. DONE"},{"location":"resources/controllable_unit/#end-user","title":"End User","text":"Policy key Policy Status CU-EU001 Read CU data that are connected to AP where they are EU. Only for when they are EU on the AP. DONE CU-EU002 Read CU history that are connected to AP where they are EU. Only for when they are EU on the AP. DONE"},{"location":"resources/controllable_unit/#energy-supplier","title":"Energy Supplier","text":"Policy key Policy Status CU-ES001 Read CU data that are connected to AP where they are ES. Only for the contract period. DONE CU-ES002 Read CU history that are connected to AP where they are ES. Only for the contract period. DONE"},{"location":"resources/controllable_unit/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status CU-FISO001 Read, create and update all CU. DONE CU-FISO002 Read all CU history. DONE"},{"location":"resources/controllable_unit/#market-operator","title":"Market Operator","text":"Policy key Policy Status CU-MO001 Read CU that are connected to their market. Only for the period CU is active in the market. TODO CU-MO002 Read history on CU that are connected to their market. Only history on the period the CU is active in the market. TODO"},{"location":"resources/controllable_unit/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit/#system-operator","title":"System Operator","text":"Policy key Policy Status CU-SO001 Read and update CU that are connected to AP belonging to SO. DONE CU-SO002 Read CU belonging to SPG that the SO can see. DONE CU-SO003 Read history on CU that they can read. DONE"},{"location":"resources/controllable_unit/#service-provider","title":"Service Provider","text":"Policy key Policy Status CU-SP001 Read CU data for the period they are SP. DONE CU-SP002 Create new CU. DONE CU-SP003 Update CU where they are current SP. DONE CU-SP004 Read CU history for the period they are SP. DONE CU-SP005 Read CU they created. DONE"},{"location":"resources/controllable_unit/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R business_id R R R R R R R R name R R R RCU R R RCU R regulation_direction R R R RCU R R RCU R maximum_available_capacity R R R RCU R R RCU R is_small R R R R R R R R start_date R R R RCU R R RCU R status R R R RU R R RU R minimum_duration R R R RCU R R RCU R maximum_duration R R R RCU R R RCU R recovery_duration R R R RCU R R RCU R ramp_rate R R R RCU R R RCU R accounting_point_id R R R RC R R RC R grid_node_id R R R RCU R RU R R grid_validation_status R R R RCU R RU R R grid_validation_notes R R R RCU R RU R R validated_at R R R RCU R RU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/controllable_unit_service_provider/","title":"Controllable Unit Service Provider","text":"<p>The relation that links a controllable unit to a service provider. It represents a contract in the real world. A controllable unit shall be assigned to a maximum of one service provider per activation period.</p>"},{"location":"resources/controllable_unit_service_provider/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/controllable_unit_service_provider/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate key. bigintRead only controllable_unit_id Reference to the controllable unit this relation links to a service provider. bigintRequiredNon-updatable controllable_unit.id service_provider_id Reference to the <code>party</code> (service provider) this relation links to a controllable unit. bigintRequiredNon-updatable party.id end_user_id Technical ID of the end user behind the accounting point. bigintRequiredNon-updatable party.id contract_reference The service providers internal reference to the contract with the end user. Typically an internal identifier to a stored document or consent record. textRequiredMax length: <code>128</code>The content of this field will not be checked by the system, but is intended to make sure that the service has a digitally stored proof of their contract with the end user on the controllable unit. valid_from The date from which the relation between the controllable unit and the service provider is valid. Midnight aligned on Norwegian timezone. timestamp with time zone valid_to The date until which the relation between the controllable unit and the service provider is valid. Midnight aligned on Norwegian timezone. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/controllable_unit_service_provider/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status CUSP-VAL001 Valid time is frozen after 2 weeks for SP. DONE CUSP-VAL002 New contracts added by SP must be created 2-4 weeks ahead of their start unless the CU has no current contract. DONE CUSP-VAL003 For the sake of data quality, new contracts added by SP and directly taking place after another contract cannot have the same end user. DONE"},{"location":"resources/controllable_unit_service_provider/#notifications","title":"Notifications","text":"Action Recipient Comment create, update, delete SP create, update, delete Connecting SO create, update, delete End user(s) in charge of the AP during the CU-SP contract"},{"location":"resources/controllable_unit_service_provider/#authorization","title":"Authorization","text":""},{"location":"resources/controllable_unit_service_provider/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/controllable_unit_service_provider/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#end-user","title":"End User","text":"Policy key Policy Status CUSP-EU001 Read CUSP that overlap with the period where they own the AP. DONE CUSP-EU002 Read CUSP history records that overlap with the period where they owned the AP. DONE"},{"location":"resources/controllable_unit_service_provider/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status CUSP-FISO001 Read, create, update and delete all CUSP. DONE CUSP-FISO002 Read history on CUSP that they can read. DONE"},{"location":"resources/controllable_unit_service_provider/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#system-operator","title":"System Operator","text":"Policy key Policy Status CUSP-SO001 Read CUSP on CU they can read. DONE CUSP-SO002 Read history on CUSP that they can read. DONE"},{"location":"resources/controllable_unit_service_provider/#service-provider","title":"Service Provider","text":"Policy key Policy Status CUSP-SP001 Create, read, update and delete CUSP where they are SP. DONE CUSP-SP002 Read history on CUSP that they can read. DONE"},{"location":"resources/controllable_unit_service_provider/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/controllable_unit_service_provider/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R controllable_unit_id R R R RC R R RC R service_provider_id R R R RC R R RC R end_user_id R R R RC R R RC R contract_reference R R R RCU R R RCU R valid_from R R R RCU R R RCU R valid_to R R R RCU R R RCU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/entity/","title":"Entity","text":"<p>A legal (organisation) or natural person. Used in authentication.</p>"},{"location":"resources/entity/#business-id-types","title":"Business ID types","text":"<p>According to the type of entity, not all types of business ID can be used. Here are the acceptable values for entities:</p> Type of entity Acceptable types of business ID Organisation <code>org</code> (organisasjonsnummer) Person <code>pid</code> (f\u00f8dselsnummer), <code>email</code>"},{"location":"resources/entity/#lookup","title":"Lookup","text":"<p>A lookup operation can be performed to check whether a business ID is already linked to an existing entity in the system, and create the entity if it does not already exist. This allows users to manage more easily party memberships related to their organisation, and possibly create entities for their colleagues.</p> <ul> <li>API Documentation for Lookup</li> </ul>"},{"location":"resources/entity/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/entity/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier.Note:This is a Primary Key. bigintRead only business_id The business identifier of the entity. Format depends on <code>business_id_type</code>. textRequiredNon-updatable business_id_type The type of the business identifier. textRequiredNon-updatable name Name of the entity. Maximum 128 characters. textRequired type The type of the entity, e.g Person, Organisation textRequiredNon-updatable recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/entity/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/entity/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/entity/#authorization","title":"Authorization","text":""},{"location":"resources/entity/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/entity/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/entity/#entity_1","title":"Entity","text":"Policy key Policy Status ENT-ENT001 Read their own ENT DONE"},{"location":"resources/entity/#common","title":"Common","text":"Policy key Policy Status ENT-COM001 Read all organisation ENT DONE ENT-COM002 Read all entities that are members of the current party. DONE ENT-COM003 Read parent entity of current party. DONE"},{"location":"resources/entity/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/entity/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/entity/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/entity/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status ENT-FISO001 Read, create and update all entities. DONE"},{"location":"resources/entity/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/entity/#organisation","title":"Organisation","text":"Policy key Policy Status ENT-ORG001 Read all entities belonging to parties owned by the organisation. DONE ENT-ORG002 Read all entities with business id type <code>email</code>. Temporary policy for test environments with email based entities for professional users. DONE"},{"location":"resources/entity/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/entity/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/entity/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/entity/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R R name R R R RCU R R R R R type R R R RC R R R R R business_id R R R RC R R R R R business_id_type R R R RC R R R R R recorded_at R R R R R R R R R recorded_by R R R R R R R R R"},{"location":"resources/entity_client/","title":"Entity Client","text":"<p>Client linked to an entity for client credentials and JWT grant authentication methods. An entity can have several clients registered.</p>"},{"location":"resources/entity_client/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/entity_client/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only entity_id Reference to the entity that this client is attached to. bigintRequiredNon-updatable entity.id name Name of the client. textMax length: <code>256</code> client_id The identifier of the entity. For use with client credentials authentication method. textRequired party_id Reference to the party this client allows to assume. A null value means the client cannot assume any party. bigintRequired party.id scopes List of scopes granted to the user when it logs in as an entity or when it acts as the party. When assuming a party through party membership, the least privileged set of scopes will be kept.Scopes are inspired from OAuth 2.0 and allow refinement of access control and privilege delegation mechanisms. RequiredArray client_secret The secret of the entity. For use with client credentials authentication method. Input as plain text but stored encrypted. textMin length: <code>12</code> public_key The public key of the entity (X.509 SubjectPublicKeyInfo). For use with JWT grant authentication method. textPattern: <code>^-----BEGIN PUBLIC KEY-----\\nMIIB[-A-Za-z0-9+/\\n]*={0,3}\\n-----END PUBLIC KEY-----$</code> recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/entity_client/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status ECL-VAL001 Entity clients can only target a party the entity can assume. DONE"},{"location":"resources/entity_client/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/entity_client/#authorization","title":"Authorization","text":""},{"location":"resources/entity_client/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/entity_client/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#entity","title":"Entity","text":"Policy key Policy Status ECL-ENT001 Read, create, update and delete their own clients. DONE"},{"location":"resources/entity_client/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status ECL-FISO001 Read all clients. DONE"},{"location":"resources/entity_client/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#organisation","title":"Organisation","text":"Policy key Policy Status ECL-ORG001 Read clients on the entity owning the organisation party. DONE ECL-ORG002 Create, update and delete clients on the entity owning the organisation party, when the user is a human. DONE"},{"location":"resources/entity_client/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/entity_client/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R R entity_id R R R R R R R R RC name R R R R R R R R RCU client_id R R R R R R R R R party_id R R R R R R R R RCU scopes R R R R R R R R RCU client_secret R R R R R R R R RCU public_key R R R R R R R R RCU recorded_at R R R R R R R R R recorded_by R R R R R R R R R"},{"location":"resources/event/","title":"Event","text":"<p>An event happening in the system.</p>"},{"location":"resources/event/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/event/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only specversion The version of the CloudEvents specification followed by the resource. textRead only time The time at which the event was generated. timestamp with time zoneRead only type The type of the event. textPattern: <code>^no.elhub.flex.</code>Read only source The URI of the resource concerned by the event. textPattern: <code>^(\\/([a-z][a-z_]*\\|[0-9]+))+$</code>Read only data The data of the event. textRead only"},{"location":"resources/event/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/event/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/event/#authorization","title":"Authorization","text":""},{"location":"resources/event/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/event/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/event/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/event/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/event/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/event/#end-user","title":"End User","text":"Policy key Policy Status EVENT-EU001 Read events related to controllable units when they are EU on the AP. DONE EVENT-EU002 Read events related to CUSP when they are EU on the AP. DONE EVENT-EU003 Read events related to technical resources when they are EU on the AP. DONE"},{"location":"resources/event/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/event/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status EVENT-FISO001 Read all events. DONE"},{"location":"resources/event/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/event/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/event/#system-operator","title":"System Operator","text":"Policy key Policy Status EVENT-SO001 Read all events related to CU, CUSP, TR, SOPT, SPPA, SPPS, SPPAC, SPPSC, SPG, SPGM, SPGGP, SPGPA. DONE"},{"location":"resources/event/#service-provider","title":"Service Provider","text":"Policy key Policy Status EVENT-SP001 Read events related to controllable units (except lookup) when they are SP on the CU. DONE EVENT-SP002 Read events related to technical resources when they are SP on the CU. DONE EVENT-SP003 Read events related to CUSP when they are the SP. DONE EVENT-SP004 Read events related to SPPA concerning themselves. DONE EVENT-SP005 Read events related to comments on SPPA concerning themselves, when they can see the comments. DONE EVENT-SP006 Read events related to service providing groups when they own them. DONE EVENT-SP007 Read events related to SPG memberships when they own the SPG. DONE EVENT-SP008 Read events related to SPG grid prequalifications when they own the SPG. DONE EVENT-SP009 Read events related to SPG product applications when they own the SPG. DONE EVENT-SP010 Read events related to SOPT. DONE EVENT-SP011 Read events related to SPPS when they are the SP. DONE EVENT-SP012 Read events related to comments on SPPS concerning themselves, when they can see the comments. DONE"},{"location":"resources/event/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/event/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R specversion R R R R R R R R time R R R R R R R R type R R R R R R R R source R R R R R R R R data R R R R R R R R"},{"location":"resources/identity/","title":"Identity","text":"<p>Resource uniquely identifying a user by linking its entity and the potentially assumed party.</p>"},{"location":"resources/identity/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/identity/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only entity_id Reference to the entity using the identity. bigintRead only entity.id entity_name Name of the entity using the identity. textRead only entity.name party_id Reference to the party assumed by the entity. bigintRead only party.id party_name Name of the party assumed by the entity. textRead only party.name"},{"location":"resources/identity/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/identity/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/identity/#authorization","title":"Authorization","text":""},{"location":"resources/identity/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/identity/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/identity/#entity","title":"Entity","text":"Policy key Policy Status ID-ENT001 Read all identities. DONE"},{"location":"resources/identity/#common","title":"Common","text":"Policy key Policy Status ID-COM001 Read all identities. DONE"},{"location":"resources/identity/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/identity/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/identity/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/identity/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"<p>No policies.</p>"},{"location":"resources/identity/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/identity/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/identity/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/identity/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/identity/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/identity/#field-level-authorization","title":"Field Level Authorization","text":"<p>Externally influenced FLA</p> <p>This resource contains fields joined from other resources:</p> <ul> <li><code>entity_*</code> fields come from the <code>entity</code> resource ;</li> <li><code>party_*</code> fields come from the <code>party</code> resource.</li> </ul> <p>Therefore, <code>identity</code> follows the RLA of these other resources for these fields, and the authorizations below may apply only partially. In the case where the user is not allowed to read the fields from the other resource, null values will be showed in the <code>identity</code> resource.</p> <p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R R entity_id R R R R R R R R R entity_name R R R R R R R R R party_id R R R R R R R R R party_name R R R R R R R R R"},{"location":"resources/notice/","title":"Notice","text":"<p>Notice to users about various issues or actions expected from them.</p>"},{"location":"resources/notice/#context","title":"Context","text":"<p>The following is an overview of notices with description and actions required from the responsible party.</p> Type Description Responsible Party Action required no.elhub.flex.controllable_unit.grid_node_id.missing Grid node ID missing CSO Update CU with grid node no.elhub.flex.controllable_unit.grid_validation_status.incomplete_information Grid validation status incomplete information SP Update missing information no.elhub.flex.controllable_unit.grid_validation_status.pending Grid validation status pending CSO Verify CU for grid verification and update status no.elhub.flex.controllable_unit_service_provider.valid_time.outside_contract Inconsistency: CUSP valid while end user is not valid on the AP SP Update CUSP to match the updated end user data from Elhub no.elhub.flex.party.missing Party listed by an external source but not registered in the system FISO Create party to match the latest data fetched from the external source no.elhub.flex.party.outdated Mismatch in party data between system and an external source FISO Update party to match the latest data fetched from the external source no.elhub.flex.party.residual Party registered in the system but not listed by an external source FISO Delete party to match the latest data fetched from the external source no.elhub.flex.service_provider_product_application.status.requested SP product application status requested PSO Initiate SP product qualification and update status no.elhub.flex.service_providing_group.balance_responsible_party.multiple Inconsistency: Multiple BRPs in a single SPG SP Make sure the SPG only contains CU currently associated to the same BRP on their accounting point no.elhub.flex.service_providing_group_grid_prequalification.status.requested SPG grid prequalification status requested ISO Initiate SPG grid prequalification and update status no.elhub.flex.service_providing_group_membership.valid_time.outside_contract Inconsistency: SPG contains expired CU(s) SP Validate and update SPG membership no.elhub.flex.service_providing_group_product_application.status.requested SPG product application status requested PSO Initiate SPG product prequalification and update status no.elhub.flex.service_provider_product_suspension.product_type.not_qualified Inconsistency: suspending a SP on a product type that they are no longer qualified for PSO Delete the suspension because it is useless no.elhub.flex.service_provider_product_suspension.lingering Inactivity: nothing has happened on the suspension in 2 weeks PSO Suspension is a temporary procedure. Consider reinstating the SP or removing their qualification."},{"location":"resources/notice/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/notice/#fields","title":"Fields","text":"Name Description Format Reference party_id Reference to the party targeted by the notice. bigintRead only party.id type The type of the notice. textPattern: <code>^no.elhub.flex.</code>Read only source The URI of the resource concerned by the event. textPattern: <code>^(\\/([a-z][a-z_]*\\|[0-9]+))+$</code>Read only data The data of the notice. Read only"},{"location":"resources/notice/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/notice/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/notice/#authorization","title":"Authorization","text":""},{"location":"resources/notice/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/notice/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/notice/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/notice/#common","title":"Common","text":"Policy key Policy Status NOTICE-COM001 Read notices targeted to them. DONE"},{"location":"resources/notice/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/notice/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/notice/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/notice/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status NOTICE-FISO001 Read all notices. DONE"},{"location":"resources/notice/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/notice/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/notice/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/notice/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/notice/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/notice/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG party_id R R R R R R R R type R R R R R R R R source R R R R R R R R data R R R R R R R R"},{"location":"resources/notification/","title":"Notification","text":"<p>A notification of an event happening in the system.</p>"},{"location":"resources/notification/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/notification/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only acknowledged Whether the notification was acknowledged by the target user. booleanRequired event_id Reference to the event notified by this resource. bigintRequiredNon-updatable event.id party_id Reference to the party concerned by this notification. bigintRequiredNon-updatable party.id recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/notification/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/notification/#authorization","title":"Authorization","text":""},{"location":"resources/notification/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/notification/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/notification/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/notification/#common","title":"Common","text":"Policy key Policy Status NOT-COM001 Read and acknowledge notifications targeting them. DONE"},{"location":"resources/notification/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/notification/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/notification/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/notification/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status NOT-FISO001 Read all notifications. DONE"},{"location":"resources/notification/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/notification/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/notification/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/notification/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/notification/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/notification/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R acknowledged RU RU RU RU RU RU RU RU event_id R R R R R R R R party_id R R R R R R R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/party/","title":"Party","text":"<p>The thing that interacts with and are authorized in the Flexibility Information System.</p> <p>A party can have different types, e.g. system operator or end user.</p>"},{"location":"resources/party/#business-identifiers","title":"Business Identifiers","text":"<p>Business identifiers for party originate outside of the system. The system itself will not generate or administer these identifiers. As an example, a service provider registration procedure will require the party to obtain a GLN from GS1 or an EIC-X from ENTSO-E prior to registration (probably via the Ediel Register).</p> <p>We support both GLN and EIC-X as identifiers for parties, since they are both used and globally unique.</p> <p>The exception to this rule is the End User party type, which is not required to have an external business identifier. End Users are modelled as parties to standardize/simplify the authorization logic. For those parties, the system will generate a UUID as the business identifier.</p>"},{"location":"resources/party/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/party/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only business_id The business identifier of the party. Format depends on <code>business_id_type</code>. textNon-updatable business_id_type The type of the business identifier. textOne of: <code>gln</code>, <code>uuid</code>, <code>eic_x</code>, <code>org</code>Default: <code>uuid</code>Non-updatable entity_id Reference to the entity that is the parent of the party. bigintRequiredNon-updatable entity.id name Name of the party. Maximum 128 characters. textRequired role The role of the party. Currently maps to 1:1 to <code>type</code>. E.g. system_operator, service_provider. textRequiredNon-updatable type The type of the party, e.g SystemOperator, ServiceProvider textRequiredNon-updatable status The status of the party. textOne of: <code>new</code>, <code>active</code>, <code>inactive</code>, <code>suspended</code>, <code>terminated</code>Default: <code>new</code> recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/party/#validation-rules","title":"Validation Rules","text":"Policy key Policy Status PTY-VAL001 <code>business_id_type</code> is UUID if and only if the party is an <code>end_user</code>. DONE PTY-VAL002 <code>business_id</code> is not required if <code>business_id_type</code> is UUID (it will be generated). DONE PTY-VAL003 <code>business_id_type</code> is ORG if and only if the party is an <code>organisation</code>. DONE"},{"location":"resources/party/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/party/#authorization","title":"Authorization","text":""},{"location":"resources/party/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/party/#entity","title":"Entity","text":"Policy key Policy Status PTY-ENT001 Read all PTY whose memberships they can read DONE PTY-ENT002 Read all PTY that they own DONE"},{"location":"resources/party/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/party/#common","title":"Common","text":"Policy key Policy Status PTY-COM001 Read history on PTY that they can read. DONE PTY-COM002 Read all PTY that are not <code>end_user</code> DONE PTY-COM003 Read all PTY whose memberships they can read DONE"},{"location":"resources/party/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/party/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/party/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/party/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status PTY-FISO001 Create, read and update all PTY DONE"},{"location":"resources/party/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/party/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/party/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/party/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/party/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/party/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R R name R R R RCU R R R R R business_id R R R RC R R R R R business_id_type R R R RC R R R R R entity_id R R R RC R R R R R type R R R RC R R R R R role R R R RC R R R R R status R R R RU R R R R R recorded_at R R R R R R R R R recorded_by R R R R R R R R R"},{"location":"resources/party_membership/","title":"Party Membership","text":"<p>Entities memberships on different parties. Basically assigns persons or organisations to parties.</p>"},{"location":"resources/party_membership/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/party_membership/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only party_id Reference to the party that the membership links to an entity. bigintRequiredNon-updatable party.id entity_id Reference to the entity that the party represents. bigintRequiredNon-updatable entity.id scopes List of scopes granted to the entity when it acts as the party. Scopes are inspired from OAuth 2.0 and allow refinement of access control and privilege delegation mechanisms. RequiredArray recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/party_membership/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/party_membership/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/party_membership/#authorization","title":"Authorization","text":""},{"location":"resources/party_membership/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/party_membership/#entity","title":"Entity","text":"Policy key Policy Status PTYM-ENT001 Read all the PTYM concerning the current entity DONE PTYM-ENT002 Read all the PTYM in parties that they own DONE"},{"location":"resources/party_membership/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#common","title":"Common","text":"Policy key Policy Status PTYM-COM001 Read all the PTYM concerning the current party DONE PTYM-COM002 Read all the history of PTYM concerning the current party DONE"},{"location":"resources/party_membership/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status PTYM-FISO001 Create, read, and delete all PTYM DONE PTYM-FISO002 Read all PTYM history DONE"},{"location":"resources/party_membership/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#organisation","title":"Organisation","text":"Policy key Policy Status PTYM-ORG001 Read, create, update and delete PTYM on all parties owned by the entity owning the organisation party. DONE PTYM-ORG002 Read PTYM history on all parties owned by the entity owning the organisation party. DONE"},{"location":"resources/party_membership/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/party_membership/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R R entity_id R R R RC R R R R RC party_id R R R RC R R R R RC scopes R R R RCU R R R R RCU recorded_at R R R R R R R R R recorded_by R R R R R R R R R"},{"location":"resources/product_type/","title":"Product Type","text":"<p>A type of product to be bought by system operators on a flexibility market. This resource is a read-only enumeration.</p>"},{"location":"resources/product_type/#context","title":"Context","text":"<p>The list of product types is defined by national terms and conditions with reference to table of equivalences.</p> <p>The following is a list of product types, with their corresponding product categories and example/specific products. NODES/EuroFlex currently has three congestion products: LongFlex, ShortFlex and MaxUsage. Statnett has a set of products, and we also used a nice overview from Energinet as input.</p> <p>The is list is not final nor exhaustive</p> <p>The list of product types is defined for discussion and will probably be adjusted/extended.</p> Business ID Name Service Products <code>manual_congestion</code> Manual Congestion congestion management LongFlex, ShortFlex <code>automatic_congestion</code> Automatic Congestion congestion management MaxUsage <code>automatic_voltage</code> Automatic Voltage voltage control <code>manual_voltage</code> Manual Voltage voltage control <code>automatic_fast_frequency</code> Fast Frequency balancing FFR Profil, FFR Flex <code>automatic_frequency_containment</code> Frequency Containment balancing FCR-N, FCR-D <code>automatic_frequency_restoration</code> Automatic Frequency Restoration balancing aFRR CM <code>manual_frequency_restoration</code> Manual Frequency Restoration balancing mFRR EAM, mFRR CM <code>manual_frequency_restoration_disruption</code> Frequency Disruption balancing mFRR-D"},{"location":"resources/product_type/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/product_type/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only business_id The code for this product type. textRead only name The name of the product type. textMax length: <code>64</code>Read only service The service offered by the product type. textRead only products Examples of products belonging to this product type. textRead only"},{"location":"resources/product_type/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/product_type/#notifications","title":"Notifications","text":"<p>No notifications.</p>"},{"location":"resources/product_type/#authorization","title":"Authorization","text":""},{"location":"resources/product_type/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/product_type/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/product_type/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/product_type/#common","title":"Common","text":"Policy key Policy Status PT-COM001 Read all product types. DONE"},{"location":"resources/product_type/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/product_type/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/product_type/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/product_type/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"<p>No policies.</p>"},{"location":"resources/product_type/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/product_type/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/product_type/#system-operator","title":"System Operator","text":"<p>No policies.</p>"},{"location":"resources/product_type/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/product_type/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/product_type/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R business_id R R R R R R R R name R R R R R R R R service R R R R R R R R products R R R R R R R R"},{"location":"resources/service_provider_product_application/","title":"Service Provider Product Application","text":"<p>The relation that links a service provider to a system operator, for the SP to apply for delivering the SO some of the types of product they want to buy on a flexibility market. The SP can apply for one or more product types, several times, for a given SO.</p>"},{"location":"resources/service_provider_product_application/#status-transitions","title":"Status transitions","text":"<p>The following diagram shows the status transition we envision for an application/qualification resource. We think of the \"application\" as a resource in the system, that can be created and updated. The status of the application is updated as the process and lifecycle of the application progresses.</p> <p>Full Size | Graphviz description | How to read the diagram</p> <p></p>"},{"location":"resources/service_provider_product_application/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_provider_product_application/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only service_provider_id Reference to the service provider. bigintRequiredNon-updatable party.id system_operator_id Reference to the system operator. bigintRequiredNon-updatable party.id product_type_ids References to the product types. RequiredArray of bigint product_type.id status The status of the application. textOne of: <code>requested</code>, <code>in_progress</code>, <code>communication_test</code>, <code>not_qualified</code>, <code>qualified</code>Default: <code>requested</code> notes Free text notes on the current product application status. textMax length: <code>512</code> qualified_at When the product application was last validated. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_provider_product_application/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status SPPA-VAL001 Inserted <code>product_type_ids</code> must be active product types asked by the SO. DONE SPPA-VAL002 If <code>status</code> is set to <code>qualified</code>, then <code>qualified_at</code> must already be specified in the resource or the request. DONE SPPA-VAL003 If <code>status</code> is set to <code>not_qualified</code>, then <code>qualified_at</code> must be unset in the resource or by the request. DONE"},{"location":"resources/service_provider_product_application/#notifications","title":"Notifications","text":"Action Recipient Comment create, update, delete SO create, update, delete SP"},{"location":"resources/service_provider_product_application/#authorization","title":"Authorization","text":""},{"location":"resources/service_provider_product_application/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_provider_product_application/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#common","title":"Common","text":"Policy key Policy Status SPPA-COM001 Read history on SPPA that they can read. DONE"},{"location":"resources/service_provider_product_application/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPPA-FISO001 Read and update all SPPA. DONE"},{"location":"resources/service_provider_product_application/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#system-operator","title":"System Operator","text":"Policy key Policy Status SPPA-SO001 Read all SPPA. DONE SPPA-SO002 Update SPPA targeting them. DONE"},{"location":"resources/service_provider_product_application/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPPA-SP001 Read and create SPPA concerning themselves. DONE SPPA-SP002 Update their SPPA when status is <code>requested</code>. DONE"},{"location":"resources/service_provider_product_application/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R service_provider_id R R R R R R RC R system_operator_id R R R R R R RC R product_type_ids R R R RU R R RCU R status R R R RU R RU R R notes R R R RU R RU R R qualified_at R R R RU R RU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_provider_product_application_comment/","title":"Service Provider Product Application Comment","text":"<p>Comment made by a party involved in a service provider product application. Several comments can be added to a given application.</p>"},{"location":"resources/service_provider_product_application_comment/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_provider_product_application_comment/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only service_provider_product_application_id Reference to the service provider product application. bigintRequiredNon-updatable service_provider_product_application.id created_by Reference to the identity that created the comment. bigintRead only created_at When the comment was added to the application. timestamp with time zoneRead only visibility The level of visibility of the comment. textOne of: <code>same_party</code>, <code>any_involved_party</code>Default: <code>same_party</code>Comments marked <code>same_party</code> are visible only to the party that creates them, whereas comments marked <code>any_involved_party</code> can be seen by all parties involved in the application. content Free text content of the comment. textRequiredMax length: <code>2048</code>This field can contain rich text in raw HTML format. Its content should be sanitised on the client side before being displayed, as there is currently no check performed on the server. recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_provider_product_application_comment/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/service_provider_product_application_comment/#notifications","title":"Notifications","text":"Action Recipient Comment create, update SO and SP of SPPA when they can see the comment"},{"location":"resources/service_provider_product_application_comment/#authorization","title":"Authorization","text":""},{"location":"resources/service_provider_product_application_comment/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_provider_product_application_comment/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#common","title":"Common","text":"Policy key Policy Status SPPAC-COM001 Read history on SPPAC that they can read. DONE SPPAC-COM002 Update SPPAC that they created. DONE SPPAC-COM003 Create SPPAC on SPPA that they are linked to. DONE"},{"location":"resources/service_provider_product_application_comment/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPPAC-FISO001 Read, create and update all SPPAC. DONE"},{"location":"resources/service_provider_product_application_comment/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#system-operator","title":"System Operator","text":"Policy key Policy Status SPPAC-SO001 Read SPPAC that the visibility allows. DONE"},{"location":"resources/service_provider_product_application_comment/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPPAC-SP001 Read SPPAC that the visibility allows. DONE"},{"location":"resources/service_provider_product_application_comment/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_application_comment/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R service_provider_product_application_id R R R RC R RC RC R created_by R R R R R R R R created_at R R R R R R R R visibility R R R RCU R RCU RCU R content R R R RCU R RCU RCU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_provider_product_suspension/","title":"Service Provider Product Suspension","text":"<p>The relation allowing a procuring system operator to temporarily suspend a service provider from delivering them products of the given types.</p>"},{"location":"resources/service_provider_product_suspension/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_provider_product_suspension/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only procuring_system_operator_id Reference to the procuring system operator suspending the service provider. bigintNon-updatableDefaults to the system operator creating the resource. party.id service_provider_id Reference to the service provider being suspended. bigintRequiredNon-updatable party.id product_type_ids References to the suspended product types. RequiredArray of bigint product_type.id reason The reason for the suspension. textOne of: <code>communication_issues</code>, <code>failing_heartbeat</code>, <code>system_issues</code>, <code>clearing_issues</code>, <code>failed_verification</code>, <code>other</code>Required recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_provider_product_suspension/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status SPPS-VAL001 Suspended <code>product_type_ids</code> must be product types that the SO has qualified the SP for. DONE"},{"location":"resources/service_provider_product_suspension/#notifications","title":"Notifications","text":"Action Recipient Comment create, update, delete SP Suspended SP create, update, delete SO All PSOs procuring the same product type from the same SP"},{"location":"resources/service_provider_product_suspension/#authorization","title":"Authorization","text":""},{"location":"resources/service_provider_product_suspension/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_provider_product_suspension/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPPS-FISO001 Create, read, update and delete all SPPS. DONE SPPS-FISO002 Read all SPPS history. DONE"},{"location":"resources/service_provider_product_suspension/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#system-operator","title":"System Operator","text":"Policy key Policy Status SPPS-SO001 Create, read, update and delete their own SPPS. DONE SPPS-SO002 Read history on their own SPPS. DONE SPPS-SO003 Read SPPS targeted at any SP they have qualified for at least one of the product types. DONE SPPS-SO004 Read history on SPPS targeted at any SP they had qualified for at least one of the product types. DONE"},{"location":"resources/service_provider_product_suspension/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPPS-SP001 Read SPPS targeting them. DONE SPPS-SP002 Read history on SPPS targeting them. DONE"},{"location":"resources/service_provider_product_suspension/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R procuring_system_operator_id R R R RC R RC R R service_provider_id R R R RC R RC R R product_type_ids R R R RCU R RCU R R reason R R R RCU R RCU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_provider_product_suspension_comment/","title":"Service Provider Product Suspension Comment","text":"<p>Comment made by a party involved in a service provider product suspension. Several comments can be added to a given suspension.</p>"},{"location":"resources/service_provider_product_suspension_comment/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_provider_product_suspension_comment/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only service_provider_product_suspension_id Reference to the service provider product suspension. bigintRequiredNon-updatable service_provider_product_suspension.id created_by Reference to the identity that created the comment. bigintRead only created_at When the comment was added to the suspension. timestamp with time zoneRead only visibility The level of visibility of the comment. textOne of: <code>same_party</code>, <code>any_involved_party</code>Default: <code>same_party</code>Comments marked <code>same_party</code> are visible only to the party that creates them, whereas comments marked <code>any_involved_party</code> can be seen by all parties involved in the suspension. content Free text content of the comment. textRequiredMax length: <code>2048</code>This field can contain rich text in raw HTML format. Its content should be sanitised on the client side before being displayed, as there is currently no check performed on the server. recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_provider_product_suspension_comment/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/service_provider_product_suspension_comment/#notifications","title":"Notifications","text":"Action Recipient Comment create, update SO and SP of SPPS when they can see the comment"},{"location":"resources/service_provider_product_suspension_comment/#authorization","title":"Authorization","text":""},{"location":"resources/service_provider_product_suspension_comment/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_provider_product_suspension_comment/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#common","title":"Common","text":"Policy key Policy Status SPPSC-COM001 Update SPPSC that they created. DONE"},{"location":"resources/service_provider_product_suspension_comment/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPPSC-FISO001 Read, create and update all SPPSC. DONE SPPSC-FISO002 Read history on all SPPSC. DONE"},{"location":"resources/service_provider_product_suspension_comment/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#system-operator","title":"System Operator","text":"Policy key Policy Status SPPSC-SO001 Create SPPSC on SPPS where they are PSO. DONE SPPSC-SO002 Read SPPSC that the visibility allows. DONE SPPSC-SO003 Read history on SPPSC that the visibility allows. DONE"},{"location":"resources/service_provider_product_suspension_comment/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPPSC-SP001 Create SPPSC on SPPS where they are SP. DONE SPPSC-SP002 Read SPPSC that the visibility allows. DONE SPPSC-SP003 Read history on SPPSC that the visibility allows. DONE"},{"location":"resources/service_provider_product_suspension_comment/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_provider_product_suspension_comment/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R service_provider_product_suspension_id R R R RC R RC RC R created_by R R R R R R R R created_at R R R R R R R R visibility R R R RCU R RCU RCU R content R R R RCU R RCU RCU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_providing_group/","title":"Service Providing Group","text":"<p>A group of controllable units to be used in a flexibility product on the market.</p>"},{"location":"resources/service_providing_group/#status-transitions-for-service-providing-group","title":"Status transitions for service providing group","text":"<p>The following diagram shows the status and its transitions for service providing groups.</p> <p>The service provider is responsible for creating a new service providing group. Initially, the status is set to <code>new</code>. Once the SPG registration is complete, the service provider updates the status to <code>active</code>. SPG grid prequalification resources are created on activation for each impacted system operator. The service provider can terminate the service providing group at any time. After termination, the status can only be edited by a FIS operator.</p> <p>Full Size | Plantuml description | How to read the diagram</p> <p></p>"},{"location":"resources/service_providing_group/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_providing_group/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate key. bigintRead only name Free text name of the service providing group. textRequiredMax length: <code>128</code> service_provider_id Reference to the <code>party</code> (service provider) managing the group. bigintRequiredNon-updatable party.id status The status of the group. textOne of: <code>new</code>, <code>active</code>, <code>inactive</code>, <code>terminated</code>Default: <code>new</code>Always <code>new</code> when created. Can then be updated to the other values. Once <code>terminated</code>, only editable by a FIS operator. recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_providing_group/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status SPG-VAL001 An empty service providing group cannot be activated. DONE"},{"location":"resources/service_providing_group/#notifications","title":"Notifications","text":"Action Recipient Comment create, update SP update SO on member CU When status is not <code>new</code>"},{"location":"resources/service_providing_group/#authorization","title":"Authorization","text":""},{"location":"resources/service_providing_group/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_providing_group/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#common","title":"Common","text":"Policy key Policy Status SPG-COM001 Read history on SPG that they can read. DONE"},{"location":"resources/service_providing_group/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPG-FISO001 Read, create and update all SPG. DONE"},{"location":"resources/service_providing_group/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#system-operator","title":"System Operator","text":"Policy key Policy Status SPG-SO001 Read SPG containing grid prequalification resources they can read. DONE SPG-SO002 Read SPG containing product applications targeted at them. DONE"},{"location":"resources/service_providing_group/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPG-SP001 Read, create and update SPG that belongs to them. DONE"},{"location":"resources/service_providing_group/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R name R R R RCU R R RCU R service_provider_id R R R RC R R RC R status R R R RU R R RU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_providing_group_grid_prequalification/","title":"Service Providing Group Grid Prequalification","text":"<p>A resource tracking the grid prequalification status of a service providing group. One SPG grid prequalification per impacted system operator.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#status-transitions-for-grid-prequalification","title":"Status transitions for grid prequalification","text":"<p>Full Size | Plantuml description | How to read the diagram</p> <p></p>"},{"location":"resources/service_providing_group_grid_prequalification/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_providing_group_grid_prequalification/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate key. bigintRead only service_providing_group_id Reference to the service providing group whose grid prequalification is tracked by the current resource. bigintRequiredNon-updatable service_providing_group.id impacted_system_operator_id Reference to the <code>party</code> that is the impacted system operator. bigintRequiredNon-updatable party.id status The status of the grid prequalification for this service providing group. textOne of: <code>requested</code>, <code>in_progress</code>, <code>conditionally_approved</code>, <code>approved</code>, <code>not_approved</code>Default: <code>requested</code>Always <code>requested</code> when created. Can then be updated to the other values. notes Free text notes on the current prequalification status. textMax length: <code>512</code> prequalified_at When the current grid prequalification was last approved. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_providing_group_grid_prequalification/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status SPGGP-VAL001 If <code>status</code> is set to <code>approved</code> or <code>conditionally_approved</code>, then <code>prequalified_at</code> must already be specified in the resource or the request. DONE SPGGP-VAL002 If <code>status</code> is set to <code>not_approved</code>, then <code>prequalified_at</code> must be unset in the resource or by the request. DONE"},{"location":"resources/service_providing_group_grid_prequalification/#notifications","title":"Notifications","text":"Action Recipient Comment create, update SP of SPG, Impacted SO"},{"location":"resources/service_providing_group_grid_prequalification/#authorization","title":"Authorization","text":""},{"location":"resources/service_providing_group_grid_prequalification/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#common","title":"Common","text":"Policy key Policy Status SPGGP-COM001 Read history on SPGGP that they can read. DONE"},{"location":"resources/service_providing_group_grid_prequalification/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPGGP-FISO001 Read, create and update all SPGGP. DONE"},{"location":"resources/service_providing_group_grid_prequalification/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#system-operator","title":"System Operator","text":"Policy key Policy Status SPGGP-SO001 Read and update SPGGP for which the SO is the impacted system operator. DONE SPGGP-SO002 Read SPGGP related to SPG they can see. DONE"},{"location":"resources/service_providing_group_grid_prequalification/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPGGP-SP001 Read SPGGP attached to a SPG which the SP is in charge of. DONE"},{"location":"resources/service_providing_group_grid_prequalification/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_grid_prequalification/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R service_providing_group_id R R R RC R R R R impacted_system_operator_id R R R RC R R R R status R R R RU R RU R R notes R R R R R RU R R prequalified_at R R R RU R RU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_providing_group_membership/","title":"Service Providing Group Membership","text":"<p>The relation that links a controllable unit to a service providing group. A service providing group can contain several controllable units, and a controllable unit can belong to several groups at the same time.</p>"},{"location":"resources/service_providing_group_membership/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_providing_group_membership/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate key. bigintRead only controllable_unit_id Reference to the controllable unit this relation links to a service providing group. bigintRequiredNon-updatable controllable_unit.id service_providing_group_id Reference to the service providing group this relation links to a controllable unit. bigintRequiredNon-updatable service_providing_group.id valid_from The date from which the relation between the controllable unit and the service providing group is valid. Midnight aligned on Norwegian timezone. timestamp with time zoneRequired valid_to The date until which the relation between the controllable unit and the service providing group is valid. Midnight aligned on Norwegian timezone. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_providing_group_membership/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/service_providing_group_membership/#notifications","title":"Notifications","text":"Action Recipient Comment create, update, delete SP of SPG, Impacted SO on SPGGP"},{"location":"resources/service_providing_group_membership/#authorization","title":"Authorization","text":""},{"location":"resources/service_providing_group_membership/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_providing_group_membership/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPGM-FISO001 Read, create, update and delete all SPG membership relations. DONE SPGM-FISO002 Read history on all SPG membership relations. DONE"},{"location":"resources/service_providing_group_membership/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#system-operator","title":"System Operator","text":"Policy key Policy Status SPGM-SO001 Read SPGM belonging to SPGs they can read. DONE SPGM-SO002 Read history on SPGM belonging to SPGs they can read. DONE"},{"location":"resources/service_providing_group_membership/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPGM-SP001 Create and update SPGM for SPGS that belongs to them, on periods where they are SP for the CU. DONE SPGM-SP002 Read, delete SPGM for SPGS that belongs to them. DONE SPGM-SP003 Read history on SPGM for SPGS that belongs to them. DONE"},{"location":"resources/service_providing_group_membership/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_membership/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R controllable_unit_id R R R RC R R RC R service_providing_group_id R R R RC R R RC R valid_from R R R RCU R R RCU R valid_to R R R RCU R R RCU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/service_providing_group_product_application/","title":"Service Providing Group Product Application","text":"<p>Relation uniquely linking a service providing group and a system operator for a product type, for the SPG to deliver a product to the SO later.</p>"},{"location":"resources/service_providing_group_product_application/#application-status-transitions","title":"Application status transitions","text":"<p>The following diagram shows the status transitions for service providing group applications. This resource supports the application process and is updated as it progresses.</p> <p>The service provider is responsible for creating a new SPG product application. Initially, the status is set to <code>requested</code>. The system operator then takes over until the application is either <code>prequalified</code>, <code>verified</code> or <code>rejected</code>. If it rejected, the service provider can make updates and propose the application again.</p> <p>Full Size | Graphviz description | How to read the diagram</p> <p></p>"},{"location":"resources/service_providing_group_product_application/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/service_providing_group_product_application/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only service_providing_group_id Reference to the service providing group. bigintRequiredNon-updatable service_providing_group.id procuring_system_operator_id Reference to the procuring system operator. bigintRequiredNon-updatable party.id product_type_ids References to the product types. RequiredArray of bigint product_type.id status The status of the application. textOne of: <code>requested</code>, <code>prequalification_pending</code>, <code>in_progress</code>, <code>temporary_qualified</code>, <code>prequalified</code>, <code>verified</code>, <code>rejected</code>Default: <code>requested</code> notes Free text notes on the current product application status. textMax length: <code>512</code> prequalified_at When the product application was last prequalified. timestamp with time zone verified_at When the product application was last verified. timestamp with time zone recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/service_providing_group_product_application/#validation-rules","title":"Validation Rules","text":"Validation rule key Validation rule Status SPGPA-VAL001 Product applications can only be created on active SPGs. DONE SPGPA-VAL002 Product applications can only be created on active system operator product types. DONE SPGPA-VAL003 The SP opening the product application must be qualified for all the product types by the SO. DONE SPGPA-VAL004 If <code>status</code> is set to <code>prequalified</code>, then <code>prequalified_at</code> must already be specified in the resource or the request. DONE SPGPA-VAL005 If <code>status</code> is set to <code>verified</code>, then <code>verified_at</code> must already be specified in the resource or the request. DONE SPGPA-VAL006 If <code>status</code> is set to <code>rejected</code>, then both <code>prequalified_at</code> and <code>verified_at</code> must be unset in the resource or by the request. DONE"},{"location":"resources/service_providing_group_product_application/#notifications","title":"Notifications","text":"Action Recipient Comment create, update Procuring SO, SP of SPG"},{"location":"resources/service_providing_group_product_application/#authorization","title":"Authorization","text":""},{"location":"resources/service_providing_group_product_application/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/service_providing_group_product_application/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#common","title":"Common","text":"Policy key Policy Status SPGPA-COM001 Read history on SPGPA that they can read. DONE"},{"location":"resources/service_providing_group_product_application/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SPGPA-FISO001 Read and update all SPGPA. DONE"},{"location":"resources/service_providing_group_product_application/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#system-operator","title":"System Operator","text":"Policy key Policy Status SPGPA-SO001 Read SPGPA for SPGs that have at least one SPGPA targeting the SO. DONE SPGPA-SO002 Update SPGPA targeting them. DONE"},{"location":"resources/service_providing_group_product_application/#service-provider","title":"Service Provider","text":"Policy key Policy Status SPGPA-SP001 Create and read SPGPA for SPG they are in charge for. DONE SPGPA-SP002 Update SPGPA for SPG they are in charge for, when the status is <code>requested</code>. DONE"},{"location":"resources/service_providing_group_product_application/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/service_providing_group_product_application/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R service_providing_group_id R R R R R R RC R procuring_system_operator_id R R R R R R RC R product_type_ids R R R RU R RU RCU R status R R R RU R RU RU R notes R R R RU R RU R R prequalified_at R R R RU R RU R R verified_at R R R RU R RU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/system_operator_product_type/","title":"System Operator Product Type","text":"<p>The relation that links a system operator to a type of product they want to buy on a flexibility market. The system operator creates one resource for each product type they ask for.</p>"},{"location":"resources/system_operator_product_type/#status-transitions-for-system-operator-product-type","title":"Status transitions for system operator product type","text":"<p>The system operator can ask for a product type temporarily or periodically. The <code>status</code> field on the resource is there to give this information. A system operator product type resource always starts as <code>active</code>, but it can be marked <code>inactive</code> when the system operator does not need the product.</p>"},{"location":"resources/system_operator_product_type/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/system_operator_product_type/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only system_operator_id Reference to the system operator. bigintRequiredNon-updatable party.id product_type_id Reference to the product type. bigintRequiredNon-updatable product_type.id status The status of the relation. textOne of: <code>active</code>, <code>inactive</code>Default: <code>active</code> recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/system_operator_product_type/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/system_operator_product_type/#notifications","title":"Notifications","text":"Action Recipient Comment create All active SPs, SO on SOPT update, delete SO on SOPT"},{"location":"resources/system_operator_product_type/#authorization","title":"Authorization","text":""},{"location":"resources/system_operator_product_type/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/system_operator_product_type/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#common","title":"Common","text":"Policy key Policy Status SOPT-COM001 Read history on SOPT that they can read. DONE SOPT-COM002 Read all SOPT. DONE"},{"location":"resources/system_operator_product_type/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#end-user","title":"End User","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#energy-supplier","title":"Energy Supplier","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status SOPT-FISO001 Read, create and update all SOPT. DONE"},{"location":"resources/system_operator_product_type/#market-operator","title":"Market Operator","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#system-operator","title":"System Operator","text":"Policy key Policy Status SOPT-SO001 Read, create and update SOPT concerning themselves. DONE"},{"location":"resources/system_operator_product_type/#service-provider","title":"Service Provider","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/system_operator_product_type/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R system_operator_id R R R RC R RC R R product_type_id R R R RC R RC R R status R R R RU R RU R R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"resources/technical_resource/","title":"Technical Resource","text":"<p>This resource holds technical details about units and resources that the controllable unit consists of. The purpose of this resource is to register information that can help procuring system operators performing product pre-qualification and simplify that evaluation if controllable units are identical. A controllable unit can contain several technical resources.</p>"},{"location":"resources/technical_resource/#relevant-links","title":"Relevant links","text":"<ul> <li>API Documentation</li> <li>Download docx</li> </ul>"},{"location":"resources/technical_resource/#fields","title":"Fields","text":"Name Description Format Reference id Unique surrogate identifier. bigintRead only name Name of the technical resource. Maximum 128 characters. textRequired controllable_unit_id Reference to the controllable unit that this technical resource belongs to. bigintRequiredNon-updatable controllable_unit.id details Free text details about the technical resource. textMax length: <code>1024</code> recorded_at When the resource was recorded (created or updated) in the system. timestamp with time zoneRead only recorded_by The identity that recorded the resource. bigintRead only"},{"location":"resources/technical_resource/#validation-rules","title":"Validation Rules","text":"<p>No validation rules.</p>"},{"location":"resources/technical_resource/#notifications","title":"Notifications","text":"Action Recipient Comment create, update, delete Active SP on CU create, update, delete Connecting SO on CU If CU status is not <code>new</code>"},{"location":"resources/technical_resource/#authorization","title":"Authorization","text":""},{"location":"resources/technical_resource/#resource-level-authorization","title":"Resource Level Authorization","text":"<p>Below is the RLA for the resource. The default policy is deny.</p>"},{"location":"resources/technical_resource/#entity","title":"Entity","text":"<p>No policies.</p>"},{"location":"resources/technical_resource/#anonymous","title":"Anonymous","text":"<p>No policies.</p>"},{"location":"resources/technical_resource/#common","title":"Common","text":"<p>No policies.</p>"},{"location":"resources/technical_resource/#balance-responsible-party","title":"Balance Responsible Party","text":"Policy key Policy Status TR-BRP001 Read TR data when they are BRP on the AP. Only for the contract period. DONE TR-BRP002 Read TR history when they are BRP on the AP. Only for the contract period. DONE"},{"location":"resources/technical_resource/#end-user","title":"End User","text":"Policy key Policy Status TR-EU001 Read TR data when they are EU on the AP. Only for when they are EU on the AP. DONE TR-EU002 Read TR history when they are EU on the AP. Only for when they are EU on the AP. DONE"},{"location":"resources/technical_resource/#energy-supplier","title":"Energy Supplier","text":"Policy key Policy Status TR-ES001 Read TR data when they are ES on the AP. Only for the contract period. DONE TR-ES002 Read TR history when they are ES on the AP. Only for the contract period. DONE"},{"location":"resources/technical_resource/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"Policy key Policy Status TR-FISO001 Read, create, update and delete all TR. DONE TR-FISO002 Read all TR history. DONE"},{"location":"resources/technical_resource/#market-operator","title":"Market Operator","text":"Policy key Policy Status TR-MO001 Read TR data on CU that are connected to their market. Only for the period CU is active in the market. TODO TR-MO002 Read TR history on CU that are connected to their market. Only history on the period the CU is active in the market. TODO"},{"location":"resources/technical_resource/#organisation","title":"Organisation","text":"<p>No policies.</p>"},{"location":"resources/technical_resource/#system-operator","title":"System Operator","text":"Policy key Policy Status TR-SO001 Read TR belonging to CU that the SO can see. DONE TR-SO002 Read history on TR belonging to CU that the SO can see. DONE"},{"location":"resources/technical_resource/#service-provider","title":"Service Provider","text":"Policy key Policy Status TR-SP001 Create, update and delete TR on CU where they are current SP. DONE TR-SP002 Read TR data for the period they are SP on the CU. DONE TR-SP003 Read TR history for the period they are SP on the CU. DONE"},{"location":"resources/technical_resource/#third-party","title":"Third Party","text":"<p>No policies.</p>"},{"location":"resources/technical_resource/#field-level-authorization","title":"Field Level Authorization","text":"<p>For party type abbreviations, check the auth docs</p> FIELD ANON BRP ES EU FISO MO SO SP TP ORG id R R R R R R R R name R R R RCU R R RCU R controllable_unit_id R R R RC R R RC R details R R R RCU R R RCU R recorded_at R R R R R R R R recorded_by R R R R R R R R"},{"location":"technical/api-design/","title":"API Design","text":"<p>TLDR;</p> <p>The Flexibility Information System API is a <code>Resource-oriented JSON-over-HTTP(s) Data API</code>.</p>"},{"location":"technical/api-design/#design-goals","title":"Design goals","text":"<p>Our design goals are</p> <ul> <li>simple and clear</li> <li>easy to use - APIs are for humans (developers)</li> <li>simple to maintain</li> <li>cache friendly (including invalidation)</li> <li>well-documented</li> <li>discoverable</li> <li>facilitates gradual rewrite from postgREST to a custom API implementation</li> </ul>"},{"location":"technical/api-design/#json-over-https","title":"JSON over HTTPS","text":"<p>We use JSON as the data format and HTTPS as the transport protocol. JSON is the de-facto standard for data exchange on the web. It is light-weight, fairly easy to read and versatile. It is not as rich as XML and simple as CSV, but basically all tooling around web APIs support JSON.</p>"},{"location":"technical/api-design/#synchronous-and-stateless","title":"Synchronous and stateless","text":"<p>We use a synchronous request-response model. This means that the client sends a request to the server and waits for a response. The server processes the request and sends a response back to the client.</p> <p>This is in contrast to the asynchronous models e.g. in the Elhub API (EMIF) where the client needs to poll the server for responses separately from the request.</p>"},{"location":"technical/api-design/#resource-oriented","title":"Resource-oriented","text":"<p>We rely on resource-oriented design when designing our api.</p> <p>Its core principle is to define named resources that can be manipulated using a small number of methods. The resources and methods are known as nouns and verbs of APIs.</p> <p>Nouns are (collections of) resources, and verbs are realized via a combination of path and HTTP method. We do not use Remote Procedure Call (RPC) style paths. An example can be a <code>controllable_unit</code>.</p> Verb Path HTTP Method RPC Style Create /controllable_unit POST CreateControllableUnit List /controllable_unit GET ListControllableUnits Read /controllable_unit/{id} GET ReadControllableUnit Update /controllable_unit/{id} PATCH UpdateControllableUnit Delete /controllable_unit/{id} DELETE DeleteControllableUnit <p>We do not use the <code>PUT</code> method simply because we do not need it. This is in line with the design in the JSON:API spec.</p> <p>In case of actual RPC style methods, we use the <code>Call</code> verb.</p> <p>typicode/json-server is very simple api design that has been used as a reference.</p>"},{"location":"technical/api-design/#common-fields","title":"Common fields","text":"<p>We implement a few common fields on all resources. These are</p> Field Type Description <code>id</code> bigint Unique identifier <code>recorded_at</code> timestamp with time zone Time the resource was last recorded (created or updated) <code>recorded_by</code> bigint Id of the identity that last recorded the resource"},{"location":"technical/api-design/#history","title":"History","text":"<p>We provide history as a separate resource on the api. The history resource provide the same fields as the main resource, but with the addition and adjustments of a few of the fields.</p> Field Type Description <code>id</code> bigint Unique identifier of the historic record <code>&lt;resource&gt;_id</code> bigint Id of the resource that this history is for <code>replaced_at</code> timestamp with time zone Time the resource was replaced <code>replaced_by</code> bigint Id of the identity that replaced the resource <p>The history records are available via a resource path that appends <code>_history</code> to the resource name. Example for <code>controllable_unit</code>.</p> <p>The only allowed action/method is <code>read</code>/<code>GET</code>.</p> Path Methods Description <code>/controllable_unit_history</code> GET List all history records <code>/controllable_unit_history/{id}</code> GET Get a specific history record <code>/controllable_unit_history?controllable_unit_id=eq.{id}</code> GET List history records for a specific controllable unit <code>/controllable_unit/{id}/history</code> GET Redirects (<code>307</code>) to the path shown above."},{"location":"technical/api-design/#events-and-notifications","title":"Events and notifications","text":"<p>Every resource modification in the system leads to an event being recorded. Events contain data identifying precisely which resource was touched and what is the nature of the modification done.</p> <p>The server then turns events into notifications that the user can read and acknowledge as part of the processes supported by the Flexibility Information System.</p> <p>Events and notifications are reachable in the API as regular resources like the others, i.e., through the <code>/event</code> and <code>/notification</code> endpoint families.</p>"},{"location":"technical/api-design/#notices","title":"Notices","text":"<p>Strongly enforcing consistency and closely following processes is a hard task in a system that is optimised for change and where users can make mistakes.</p> <p>In order to store decently reliable data while still keeping a maintainable system in the long run, we generally make sure that new data entering the system are consistent with existing data, but we tolerate some level of temporary inconsistency or invalidity for some resources. This has several advantages, such as sparing us the need for advanced rollback mechanisms.</p> <p>However, even if we do not enforce it as strictly in the database, we consider that such issues should be fixed eventually. This is the purpose of the notice resource. It detects inconsistencies or invalid states in ongoing processes and exposes them through the API for each user to see what actions on the system are expected from them. This allows making mistakes but also detecting and fixing them in a decent time, ensuring eventually strong consistency between the resources in the system in a flexible way.</p>"},{"location":"technical/api-design/#time-dependent-resources-and-fields","title":"Time dependent resources and fields","text":"<p>Some resources or fields are time dependent. We model timelines as a collection of resources with valid time intervals defined by <code>valid_from</code> (inclusive) and <code>valid_to</code> (exclusive). If a field is time-dependent, we model it as a separate resource.</p> <p>In the following sections we will use an example of <code>controllable_unit</code> that has a <code>service_provider</code> relation that changes over time. This is modelled as a separate resource <code>controllable_unit_service_provider</code>. In a tabular layout it looks like this:</p> id controllable_unit_id service_provider_id valid_from valid_to 1 1 1 2020-07-01 2020-07-06 2 1 2 2020-07-06 2020-07-11 3 1 3 2020-07-11 null <p>The <code>controllable_unit_id</code> identifies a distinct timeline, while a specific entry is identified by the <code>id</code>.</p> <p>The following diagram shows how these three entries are layed out in the timeline.</p> <p></p>"},{"location":"technical/api-design/#reading-a-timeline","title":"Reading a timeline","text":"<p>If you want to see all entries in a timeline you need to query the collection with a filter that identifies the timeline. For our example, that means a specific <code>controllable_unit_id</code>, so the operation would look something like this:</p> <p>GET /controllable_unit_service_provider?controllable_unit_id=eq.1</p>"},{"location":"technical/api-design/#adding-a-new-or-updating-a-entry-to-the-timeline","title":"Adding a new or updating a entry to the timeline","text":"<p>When adding a new entry to the timeline, you basically add a new resource like with other collections. However, the create operation will also modify or delete other entries to ensure a non-overlapping timeline.</p> <p>Say we want to add the following entry to our example timeline:</p> POST /controllable_unit_service_provider<pre><code>{\n    \"controllable_unit_id\": 1,\n    \"service_provider_id\": 4,\n    \"valid_from\": \"2020-07-03T00:00:00.000Z\",\n    \"valid_to\": \"2020-07-15T00:00:00.000Z\"\n}\n</code></pre> <p>The following diagram shows the timeline before and after adding the entry. The entries are identified by the id.</p> <p></p> <p>As shown, entry <code>2</code> is removed and entry <code>1</code> and <code>3</code> is modified to fit with the new resource.</p> <p>If the new entry is fully overlapped by an existing entry, then the create will result in a gap in the timeline. As seen in the following diagram, entry <code>4</code> is modified and limited to the start of the new entry <code>5</code>, leaving a gap between <code>5</code> and <code>3</code>.</p> <p></p> <p>Updating a entry is similar to adding a new entry. If the valid time range is increased, then other entries will be modified or deleted to ensure a non-overlapping timeline.</p> <p>If you want to update a resource, like set an end date on the current relation (where <code>valid_to</code> is null), then you would do a update operation on that specific resource.</p> PATCH /controllable_unit_service_provider/3<pre><code>{\n    \"valid_to\": \"2020-08-15T00:00:00.000Z\"\n}\n</code></pre> <p>Gaps are allowed</p> <p>The update mechanisms does not care about gaps in the timeline, they are generally allowed. This means that the logic does not adjust the timeline (i.e. update other entries) if a entry is deleted or its valid time is decreased.</p>"},{"location":"technical/api-design/#history-on-time-dependent-resources","title":"History on time-dependent resources","text":"<p>We provide history on time-dependent resources as well. This follows the same pattern as the regular history. Time dependent resources with history provides bi-temporal data.</p>"},{"location":"technical/api-design/#restoring-a-timeline","title":"Restoring a timeline","text":"<p>Restoring a timeline is done with regular updates. You would need to do a <code>PATCH</code> operations on the specific entries. The typical workflow would be:</p> <ol> <li>List the history of the timeline (possibly filtered by record time)</li> <li>Find the history entries that should to be restored</li> <li>Do a <code>PATCH</code> operation on the specific entries with the old data to restore it</li> </ol> <p>Deleted entries are only soft-deleted in the system by setting <code>valid_from</code> and <code>valid_to</code> as null. These resources also accept <code>PATCH</code> operations. A <code>PATCH</code> to restore a deleted resource requires that the <code>valid_from</code> is set to a non-null value.</p> <p>No revert or rollback operations</p> <p>We do not provide a revert operation that restores a timeline to a specific point in time. Restore must be done on the individual entries in sequence.</p> <p>We do not provide a rollback operation to undo all the changes that occurred due to a specific <code>PATCH</code> or <code>POST</code>. Rollback operations are hard to get right in situations where there could be multiple changes to the timeline since the point in time you want to rollback to.</p>"},{"location":"technical/api-design/#rich-text-fields","title":"Rich text fields","text":"<p>Some text fields actually support rich text content. For simplicity, we chose HTML as the format of rich text fields, as it is a very common format readily available in all web browsers, which are likely to be the host of the frontend environments that will interact with our API.</p> <p>In such cases, where data stored in a system must be interpreted in order to be displayed, this data should always go through a sanitisation step before being used. This sanitisation can happen one or several times, before storing the data or after retrieving it. For now, rich text fields are a test feature, so we choose not to validate their content on the server side. It is therefore left to the responsibility of our users to sanitise the content of rich text fields before exploiting it. Note that the default user interface we offer as part of our test platform use components performing the expected sanitisation.</p>"},{"location":"technical/api-design/#naming-and-casing","title":"Naming and casing","text":"<p>Singular vs plural is basically a matter of taste. We just had to pick one. We use singular names on all resources. This is a design choice to make the API more consistent with the data model in the database, where the singular names are nice.</p> <p>Another way we make the API consistent with the database is by using <code>snake_case</code> for resource/collection, field names and enumerations. This allows us to have the same name across all layers.</p>"},{"location":"technical/api-design/#identifiers","title":"Identifiers","text":"<p>We use <code>id</code> as the primary identifier for all resources. The <code>id</code> is a unique integer generated by a sequence in the system. It is a surrogate key.</p> <p>Where relevant we also store natural keys or other identifiers on the resources. If so, these are usually stored in a field name <code>business_id</code>. If the resources support multiple types of identifiers, we include a <code>business_id_type</code> field as part of the identifier.</p> <p>Finding a resource by this identifier can be done by filtering on the <code>business_id</code> field. E.g. <code>GET /controllable_unit?business_id=eq.123456</code>.</p>"},{"location":"technical/api-design/#discoverability-and-documentation-via-openapi-310","title":"Discoverability and documentation via OpenAPI 3.1.0","text":"<p>Provide discoverability via OpeanAPI 3.1.0 document and generated documentation. We are using 3.1 over 3.0 due to the full support of JSON Schema.</p> <p>We are following a spec-first approach where we define the API in an OpenAPI document first and implement later. This allows us to switch implementations while having a stable api/document. It comes at the cost of having to maintain the document manually. This maintenance is however eased through the use of templating to avoid repeating ourselves and making mistakes. Templating also normalises the API by making sure similar operations lead to similar endpoints.</p>"},{"location":"technical/api-design/#note-on-restful-and-hateoas","title":"Note on RESTful and HATEOAS","text":"<p>We cannot talk about API design without talking about RESTful APIs and HATEOAS.</p> <p>REST stands for REpresentational State Transfer. RESTful APIs are APIs that adhere to the REST architectural constraints. First coined by Roy Fielding in his doctoral dissertation, REST is a set of constraints that, when followed, enable a loose coupling between clients and servers. This loose coupling is achieved by having the server send hypermedia links to the client, which the client can then use to navigate the API. This is known as HATEOAS, or Hypermedia As The Engine Of Application State.</p> <p>Implemeting a RESTful API is not easy, and most APIs that claim to be RESTful are not. For some good reading on this topic, check out the following links:</p> <ul> <li>Hypermedia APIs vs Data APIs</li> <li>REST APIs must be hypertext-driven</li> </ul> <p>We believe that RESTful APIs are really powerful, but complex. The true value of a RESTful API is evolveability. On the Richardson Maturity Model that evolveability is only achieved at level 3, with a true Hypermedia API. For that to work, we put a lot of constraints on clients. As an example, our clients would not be able to rely on fixed resource names or hierarchies.</p> <p>We are aiming for level 2 on the Richardson Maturity Model. We are ok with a higher degree of coupling between clients and servers.</p> <p>But we try not to call our API REST or RESTful since the terms have very different meanings depending on who you ask. We are calling our API style a <code>Data API</code>.</p>"},{"location":"technical/api-design/#links","title":"Links","text":"<p>One of the major benefits of the REST architectural style is that links are very explicit by being part of the response. Our API does not return links, but we provides information on how to navigate the API in the documentation. The OpenAPI spec is a bit limited in this regard. The Link Object also doesn't display well (or at all) in the generated docs tools.</p> <p>We provide a <code>links</code> object in the  <code>20*</code> response to <code>Read</code> requests, but omit it in <code>List</code>, <code>Create</code> and <code>Update</code> requests. This is just to limit the amount of toil/busywork related to maintaining the OpenAPI document.</p> <p>We also document the link as part of the textual field description in the OpenAPI schemas.</p>"},{"location":"technical/auth/","title":"Auth","text":"<p>This document describes the authentication and authorization model, principles and concepts we are following in the Flexibility Information System. It is a quite comprehensive document and contains alot of nitty-gritty details - even about implementation. We are using it both as a design document and documentation. You can use it as a reference and for understanding how we are doing things.</p> <p>The document assumes that you have some basic knowledge around the topic, such as the distiction between authentication and authorization, but we will try to add external links to relevant resources where appropriate (like we just did \ud83d\ude09).</p> <p>Note</p> <p>We use auth as a short form for authentication and authorization in this document.</p>"},{"location":"technical/auth/#overview","title":"Overview","text":"<p>We think of auth as a layered system, where each layer has a specific purpose and responsibility. The layers are independent of each other and a request is required to pass all the layers to be allowed access. The following diagram shows the layers we have in our model.</p> <p></p> <p>The layers in the auth model are there to protect our resources. These resources take the form of data or remote procedure calls (RPCs) in our APIs. You can think of a resource as a path in our API, e.g. <code>/api/v0/controllable_unit/</code>. Authorization protects what actions (create, read, update, delete, call) the user can do on the resources.</p> <ol> <li>Session or token validation - This is how we authenticate the user. Once    authentication is done we know the entity, party and scopes of the user. If    there is no session or token the user enters the system as an anonymous user    with read access.</li> <li>Scope check - Empty scope means no access. The scope check validates actions    on resources, e.g. does the user have the scope to do update on this    resource.</li> <li>Party type check - Actions on some resources might only be accessible for    certain party types, like the <code>Flexibility Information System Operator</code> or    <code>System Operator</code>. For these resources we have an explicit party type check    for additional security, e.g. is the party type of the user allowed to do    call this resource. We typically use this on RPC resources.</li> <li>Field Level Authorization - FLA controls access for the combination of    party type, action and fields, e.g. can this party type update these fields on    this resource.</li> <li>Resource Level Authorization - RLA controls access for the specific party    and resource, e.g. can this party delete this resource.</li> </ol> <p>Read more details about the layers further down in this document.</p>"},{"location":"technical/auth/#actions","title":"Actions","text":"<p>When we talk about authorization we usually talk about performing \"actions\" on resources or fields. The table below shows the actions and their corresponding HTTP methods and database grants.</p> Action HTTP verb Database grant Usage Create POST INSERT Read GET SELECT Update PATCH UPDATE Delete DELETE DELETE Call POST EXECUTE Used for RPC type endpoints. <p>We do not model <code>List</code> as a specific action even tho it is a verb - someting a user can do - on the API. It is covered by <code>Read</code>.</p>"},{"location":"technical/auth/#oauth-20-and-openid-connect-standards","title":"OAuth 2.0 and OpenID Connect standards","text":"<p>We are relying on the patterns and flows established as part of multiple RFCs related to OAuth 2.0 as well as OpenID Connect. Relevant RFCs are listed below, but you can also check the map of OAuth 2.0 specs from Okta.</p> <ul> <li>RFC6749 - The OAuth 2.0 Authorization Framework</li> <li>RFC6750 - The OAuth 2.0 Authorization Framework: Bearer Token Usage</li> <li>RFC7636 - Proof Key for Code Exchange by OAuth Public Clients</li> <li>RFC7523 - JSON Web Token (JWT) Profile for OAuth 2.0 Client Authentication and Authorization Grants</li> <li>RFC8693 - OAuth 2.0 Token Exchange</li> </ul> <p>The implementation follows only parts of these standards, but we are trying to comply with the specification for the parts we actually implement.</p> <p>We are also relying heavily on the JOSE (Javascript Object Signing and Encryption) suite of specifications.</p> <p>Distinct API for authentication</p> <p>Note that authentication and the rest of the Flexibility Information System work as two separate services, and as such, are exposed through distinct APIs. The endpoints can be reached by using the <code>/api</code> or <code>/auth/</code> prefixes in the URL used to access the Flexibility Information System APIs. In the rest of this page, we use the terms main API and auth API to distinguish these distinct roots of API endpoints.</p>"},{"location":"technical/auth/#authentication-model","title":"Authentication model","text":"<p>In this section, we describe the authentication model in the Flexibility Information System. This diagran shows the main concepts in the model and how they relate to each other.</p> <p></p>"},{"location":"technical/auth/#identity","title":"Identity","text":"<p>Any system or person interacting with the Flexibility Information System will always be authenticated as a legal og natural entity, possibly assuming the role of a market party. An entity might also interact with the FIS via a client (i.e., an application or system). The entity, party and client together make up the identity of the user.</p> <p>The entity has very little functionality available in the system, most functionality will be available after assuming a party. The identity of the user is then the combination of the entity and the party they are acting as. As a result, in order to interact properly with the Flexibility Information System, an entity must assume a party.</p> <p>Inspiration for this step is taken from Altinn, where one is presented with a list of parties upon login. The Elhub portal also has the same type of logical mechanism.</p> <p>.</p> <p>The concept is also inspired by AWS AssumeRole.</p> <p>Assuming a party is done using Token Exchange or directly in authentication using JWT Bearer grant. To assume a party, the entity must be a member of the party.</p>"},{"location":"technical/auth/#entity-individuals-and-organisations","title":"Entity - individuals and organisations","text":"<p>The entity is the natural or legal person using the system. This is the \"raw\" identity of the user when it enters the system.</p> <ul> <li>Natural entities are   individuals identified by their national identity number (f\u00f8dselsnummer) or   D-number.</li> <li>Legal entities are   organisations identified by their organisation number (organisasjonsnummer).</li> </ul> <p>In a production setting, the identity of the entity will be established through mechanisms such as IDPorten, Maskinporten or enterprise certificates.</p>"},{"location":"technical/auth/#client-application-or-system","title":"Client - application or system","text":"<p>We follow the OAuth 2.0 definition of a client as \"an application making protected resource requests\". A client is basically a way for an entity to interact with the FIS API. A client can use different authentication methods. A client is restricted to a specific party and with assigned scopes.</p>"},{"location":"technical/auth/#party-market-actors","title":"Party - market actors","text":"<p>This is the market party like a system operator or service provider. Parties in the European energy sector are typically identified by a GLN or <code>EIC-X</code>. After being authenticated as an entity, the user can assume a party to interact with the system.</p> <p>We have two extra party types in addition to the other market actors: end users and organisations. An end user is either a person or an organisation. The organisation party is a way for the user to have access to a special role to perform modifications on their own organisation entity. They can for instance give total or partial (via delegation mechanisms) access to what the entity owns and manages, to people from the same company.</p> <p>We have the following party types in the Flexibility Information System:</p> Abbreviation Code Name Norwegian name BRP balance_responsible_party Balance Responsible Party Balanseansvarlig EU end_user End User Sluttbruker ES energy_supplier Energy Supplier Kraftleverand\u00f8r FISO flexibility_information_system_operator Flexibility Information System Operator Fleksibilitetsinformasjonssystem Operat\u00f8r MO market_operator Market Operator Markedoperat\u00f8r ORG organisation Organisation Organisasjon SO system_operator System Operator Systemoperat\u00f8r SP service_provider Service Provider Tjenesteleverand\u00f8r TP third_party Third Party Tredjepart <p>Common policies</p> <p>In addition to these we also write policies and grant access that are common for all authenticated party types. This is referred to as <code>Common</code>, abbreviated as <code>COM</code>. All party types inherit the policies from <code>Common</code>.</p> <p>The following sub-sections provides a brief description of each party type.</p>"},{"location":"technical/auth/#balance-responsible-party","title":"Balance Responsible Party","text":"<p>A party responsible for its imbalances.</p> <p>Based on: Consolidated text: Commission Regulation (EU) 2017/2195 - Art.2 Definitions.</p>"},{"location":"technical/auth/#end-user","title":"End User","text":"<p>Synonyms:</p> <ul> <li>Final Customer (Sluttkunde)</li> <li>Flexible Customer</li> <li>System User</li> </ul> <p>The entity at the lower end of the chain, willing to make their own technical resources available on the flexibility market.</p>"},{"location":"technical/auth/#energy-supplier","title":"Energy Supplier","text":"<p>Synonyms:</p> <ul> <li>Balance Supplier</li> <li>Supplier</li> </ul> <p>A party delivering to or taking energy from a party connected to the grid at an accounting point.</p>"},{"location":"technical/auth/#flexibility-information-system-operator","title":"Flexibility Information System Operator","text":"<p>Synonyms:</p> <ul> <li>Flexibility Register Operator</li> </ul> <p>We use this as an administrator role for the Flexibility Information System, as a last resort tool to have full authorisation on the system or perform special operations.</p>"},{"location":"technical/auth/#market-operator","title":"Market Operator","text":"<p>Sub-types:</p> <ul> <li>Local Market Operator</li> <li>Balancing Market Operator</li> </ul> <p>A party that provides a service whereby the offers to sell energy are matched with bids to buy energy.</p> <p>Based on: Consolidated text: Regulation (EU) 2019/943.</p>"},{"location":"technical/auth/#organisation","title":"Organisation","text":"<p>This is not a market party as such but a party that represents the organisation entity.</p>"},{"location":"technical/auth/#system-operator","title":"System Operator","text":"<p>Synonyms:</p> <ul> <li>Grid Owner</li> </ul> <p>Sub-types:</p> <ul> <li>Distribution System Operator</li> <li>Transmission System Operator</li> <li>Connecting System Operator</li> <li>Requesting System Operator</li> <li>Procuring System Operator</li> <li>Impacted System Operator</li> </ul> <p>A party responsible for operating, ensuring the maintenance of and, if necessary, developing the system in a given area and, where applicable, its interconnections with other systems, and for ensuring the long-term ability of the system to meet reasonable demands for the distribution or transmission of energy.</p> <p>Based on: Consolidated text: Directive (EU) 2019/944.</p>"},{"location":"technical/auth/#service-provider","title":"Service Provider","text":"<p>Sub-types:</p> <ul> <li>Balancing Service Provider</li> <li>Flexibility Service Provider</li> </ul> <p>A party that offers local or balancing services to other parties in the market, after having successfully passed a qualification process.</p>"},{"location":"technical/auth/#third-party","title":"Third Party","text":"<p>A party that does not have an actual responsibility in the value chain, but can be delegated authority to, e.g., perform tasks or access data.</p>"},{"location":"technical/auth/#roles","title":"Roles","text":"<p>Parties in the Energy sector act in different \"roles\". For some examples, see the Elhub role model. This level is mostly used for delegation. As of now, this level is NOT part of the authentication or authorization model.</p> <p>The word 'role' can be seen in the system</p> <p>Our database and API service does sometime refer to something called \"roles\". This is just how we model parties and entities in the system and is not related to the conceptual authentication or authorization model as described here.</p>"},{"location":"technical/auth/#anonymous-users","title":"Anonymous users","text":"<p>Some data (like party lists) and actions (such as login) will be available for un-authenticated users. We refer to these as <code>Anonymous</code>, abbreviated as <code>ANON</code>.</p> <p>An anonymous user has the following default scopes:</p> <ul> <li><code>read:data</code> - to be able to access open data (if any)</li> <li><code>use:auth</code> - to be able to log in etc</li> </ul> <p>Policy inheritance</p> <p>RLA policies for <code>Anonymous</code>/<code>ANON</code> are inherited by all authenticated users.</p>"},{"location":"technical/auth/#authentication-methods","title":"Authentication methods","text":"<p>Authentication is the process of establishing the \"raw\" identity of the user. For us, this means identifying the entity, i.e. the individual or organisation using the system. We provide different ways of authentication, depending on how you want to interact with the system.</p> <p>Individuals what want to log into the portal will log in using the <code>OpenID Connect</code> protocol with an identity provider. In a production setting the identity provider will be IDPorten.</p> <p>Entities that want to use the API will have to create and attach clients to their entity resource in the system. Creating a client generates a unique identifier and allows setting a password and/or a public key associated to this client. From there, users have two ways of authenticating.</p> <ul> <li><code>JWT Bearer</code> - The entity uploads a public key to one of its clients and uses   a self-signed JWT Authorization grant to authenticate.</li> <li><code>Client Credentials</code> - The entity uses a client_id and client_secret to   authenticate. The client_id is the UUID of one of the clients added by the   entity in the system, and client_secret is basically a password that must be   set on this client.</li> </ul> <p>Possible future use of enterprise certificates</p> <p>We are considering the use of enterprise certificates and/or Maskinporten in a production setting.</p>"},{"location":"technical/auth/#openid-connect","title":"OpenID Connect","text":"<p>A regular user in the portal will be authenticated via a OpenID Connect compatible provider. We believe that IDPorten is the most likely candidate for a production system. In test we are using Oracle Cloud Identity and Access Management (IAM).</p> <p>The OpenID connect flow is based on redirects between the portal and the Idenity provider, and as part of the process, the Flexibility Information System will obtain the identity of the user from the Identity provider and issue an access token for the portal.</p>"},{"location":"technical/auth/#client-credentials","title":"Client credentials","text":"<p>Deprecated</p> <p>This is a temporary solution that will be removed in later versions of the FIS. Use the <code>JWT Bearer</code> method instead.</p> <p>To use this method, first log in to the portal and add a new client to the entity. Then, write down the generated Client ID on the created client, because you will need it to log in, and set the Client Secret on the client. This should be a strong password. Consider generating a random password using some kind of online generator.</p> <p>Once Client Secret is set in the portal, the connection is established through basic authentication on the auth API's <code>/token</code> endpoint, using the client_credentials <code>grant_type</code> with Client Password, in a URL-encoded body.</p> <p>Set <code>Content-Type</code> header as <code>application/x-www-form-urlencoded</code>.</p> <p>Example body:</p> <pre><code>grant_type=client_credentials&amp;client_id=&lt;client_id&gt;&amp;client_secret=&lt;client_secret&gt;\n</code></pre> <p>The result is a JWT access token for the entity that can be used to access the API.</p>"},{"location":"technical/auth/#jwt-bearer","title":"JWT Bearer","text":"<p>This is the preferred method for authenticating towards the API. The method uses JWTs as authorization grants as defined by RFC7523. This the same method as used by Maskinporten.</p> <p>To authenticate, the client must send a request with <code>Content-Type</code> header as <code>application/x-www-form-urlencoded</code> and a body similar to the following:</p> <pre><code>grant_type: urn:ietf:params:oauth:grant-type:jwt-bearer&amp;assertion=&lt;authorization grant JWT&gt;\n</code></pre> <p>The magic is in the assertion JWT. Use the following payload.</p> Claim Name Description Example <code>aud</code> Audience The URL of the token endpoint. <code>https://flex-test.elhub.no/auth/v0/</code> <code>exp</code> Expiration Time The expiration time of the JWT. Maximum 120 seconds after <code>iat</code>. <code>iat</code> Issued At The time the JWT was issued. Only tokens with <code>iat</code> within 10 seconds of server time will be accepted. <code>iss</code> Issuer The issuer of the token on the format. <code>no:entity:uuid:&lt;client_id&gt;</code>. <code>client_id</code> is the UUID of the client whose key is used to sign the token. <code>no:entity:uuid:2fc014f2-e9b4-41d4-ad6b-c360b8ee6229</code> <code>jti</code> JWT A unique identifier for the JWT. For (future) protection against replay attacks. <code>sub</code> Subject Optional. Use if the client wants to assume party as part of the request. Format <code>no:entity:&lt;id_type&gt;:&lt;id&gt;</code>. <code>id_type</code> is the party's <code>business_id_type</code>. <code>no:party:gln:1234567890123</code> <p>The JWT must be signed by the entity client's RSA private key. The public key must be uploaded to the client in the portal prior to making the request. An example of how to generate a key pair is shown below. Upload the contents of the file <code>.flex.pub.pem</code> in the portal.</p> <pre><code>openssl genrsa -out .flex.key.pem 3072\nopenssl rsa -in .flex.key.pem -pubout -out .flex.pub.pem\n</code></pre> <p>How to sign a JWT using the private key depends on your programming language/system of choice. Here are a few examples/guides:</p> <ul> <li>Python - PyJWT</li> <li>Bash - See this gist</li> <li>Go - jwx</li> </ul> <p>The response from the endpoint will be a JWT access token that can be used to access the API.</p>"},{"location":"technical/auth/#token-exchange","title":"Token exchange","text":"<p>If the user has logged in via client credentials or OpenID connect, the user can assume a party by doing a OAuth 2.0 Token Exchange that lets an entity \"impersonate\" a party with the returned token. This is done by calling the same <code>/token</code> endpoint, this time with the <code>grant_type</code> <code>urn:ietf:params:oauth:grant-type:token-exchange</code>.</p> <p>RFC8693 does not cover the case where the client that does token exchange doesn't have a valid token for the party it wants to impersonate. The spec is mostly covering use-cases of backends calling other backends, but is flexible enough to fit our needs.</p> <p>RFC8693</p> <p>Additional profiles may provide more detailed requirements around the specific nature of the parties and trust involved, such as whether signing and/or encryption of tokens is needed or if proof-of-possession-style tokens will be required or issued. However, such details will often be policy decisions made with respect to the specific needs of individual deployments and will be configured or implemented accordingly.</p> <p>Other systems have met this gap by loosely implementing the RFC, e.g. by using a custom token type or adding additional form parameters. We do it by using the access token obtained in step 1 as the <code>actor_token</code>. Instead of using another token (i.e., <code>subject_token</code>) to specify the party the user wants to assume, we just expect the party ID in an additional <code>scope</code> parameter in the URL-encoded body of the request.</p> <pre><code>grant_type=urn:ietf:params:oauth:grant-type:token-exchange\n&amp;actor_token=&lt;token from step 1&gt;&amp;\n&amp;actor_token_type=urn:ietf:params:oauth:token-type:jwt\n&amp;scope=assume:party:&lt;desired_party_id&gt;\n</code></pre> <p>The response from the endpoint will be a JWT access token that can be used to access the API.</p>"},{"location":"technical/auth/#example-client-credentials-and-token-exchange","title":"Example - client credentials and token exchange","text":"<p>Below is an example of realistic login sequence:</p> <ul> <li>a user logs in as an entity by giving their credentials in the first call to   the <code>/token</code> endpoint;</li> <li>they now have sufficient authorisation to read information about themselves,   including which parties they are allowed to assume;</li> <li>they ask for a token exchange in the second call to the <code>/token</code> endpoint,   in order to assume one of the possible parties.</li> </ul> <p></p>"},{"location":"technical/auth/#authorization","title":"Authorization","text":"<p>We are providing a resource-oriented main API. Authorization is understood as allowing a user access to do an action on a resource or its field.</p> <p>Our authorization model is based on a deny-by-default principle. This means that authorization is denied unless explicitly allowed. We then allow certain actions on resource or field level for a specific party type. The caller must also have the required scope to perform the action.</p> <p>You can think of a resource collection as a table. Each rows is a resource. Each column is a field. We then specify Field Level and Resource Level Authorization to give access to these resources.</p> <p>The following examples shows a collection of resources <code>1</code>-<code>5</code>. The resources have the fields <code>ID</code>, <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code> and <code>E</code>. The colored boxes are read (green) and update (yellow) policies for one party type. Dotted lines are field level policies while solid lines are resource level policies.</p> <p>There are three field level policies that allows read access to all fields except <code>A</code> and update access to only <code>D</code>.</p> <p>There are two resource level policies that allows read access to resources <code>3</code>, <code>4</code> and <code>5</code>, and update access to only <code>5</code>.</p> <p>Together, these policies allow the party type to read all fields except <code>A</code> of resources <code>3</code>, <code>4</code> and <code>5</code>, and update only field <code>D</code> of resource <code>5</code>.</p> <p>In addition to this, the user must have the required scope to perform the action.</p> <p></p> <p>More information about the policies and their implementation can be found in the following sections.</p>"},{"location":"technical/auth/#scopes","title":"Scopes","text":"<p>Every combination of resource and action has a required scope. When a user makes a request, the system will check that the session or token has that scope. The requester can have multiple scopes. No scopes means no access.</p> <p>In our system, entities are made members of parties to allow them to assume the parties and act on behalf of them. The party membership is restricted with a list of scopes. This allows fine-tuning the access control when the entity assumes the party. Entity clients, allowing users to log in as entities in an automated way, also contain scopes to limit what a machine can do in the system.</p> <p>The purpose of this is e.g. to allow one person to be able to read data in the system on behalf of a party, while another person can both read and write data. This fits with the least privilege principle, where we try to give the user the least amount of access.</p> <p>A scope shows what the user can do to a specific resource. It is a colon-separated string on the following format:</p> <pre><code>&lt;verb&gt;:&lt;module&gt;[:&lt;resource&gt;]...\n</code></pre> <p>..and can be read as</p> <p>The user can <code>&lt;verb&gt;</code> <code>&lt;resource&gt;</code> in <code>&lt;module&gt;</code>.</p> <p>Verb is the privilege or access level. Module and resource typically describe the asset or path that is being protected are defined below. Resource is optional and if omitted then it means \"all resources\".</p>"},{"location":"technical/auth/#verb","title":"Verb","text":"<p>A verb specifies the type of access. The verbs are defined by the actions they allow on the resource.</p> Verb Description Action(s) <code>read</code> Read-only access Read <code>use</code> <code>read</code> plus calling RPCs (e.g. lookuo) Read, Call <code>manage</code> Full access. <code>use</code> plus changing data Create, Read, Update, Delete, Call <p>Since the access increases with <code>read</code> &gt; <code>use</code> &gt; <code>manage</code>, there is also implicit inheritance. This e.g. means that a user with the <code>use</code> verb implicitly has the <code>read</code> privilege.</p>"},{"location":"technical/auth/#module","title":"Module","text":"<p>A module is a logical grouping of resources. The currently defined modules are.</p> <ul> <li><code>data</code> - This is the data API at <code>/api/</code>, for resources such as controllable   units, service providing groups, etc.</li> <li><code>auth</code> - This is the module for auth at <code>/auth/</code>.</li> </ul>"},{"location":"technical/auth/#resource","title":"Resource","text":"<p>The resource part of the scope is used to make sub-scopes within a module. It is optional and not yet implemented for clients. When omitted, the scope includes everything in a the module.</p> <p>The three dots <code>...</code> in the format above means that resources can be nested, to create sub-scopes.</p> <p>Each path on our API has a required scope, and every request is checked to see that the client has a matching scope.</p>"},{"location":"technical/auth/#scope-examples","title":"Scope examples","text":"<p>The following are a few example scopes.</p> <ul> <li> <p><code>GET /api/v0/controllable_unit/</code> requires <code>read:data:controllable_unit</code>. It is   also covered by e.g. <code>read:data</code> and <code>use:data</code> but not   <code>manage:data:technical_resource</code>.</p> </li> <li> <p><code>POST /api/v0/controllable_unit/lookup</code> requires <code>use:data:controllable_unit:lookup</code>.   It is also covered by e.g. <code>manage:data</code> and <code>use:data:controllable_unit</code>.</p> </li> </ul>"},{"location":"technical/auth/#scope-assignment","title":"Scope assignment","text":"<p>Everytime a user changes identity in the system, they get assigned different scopes. These scopes are then held in the session/token.</p> <p>This happens first when they log in as an entity. If they log in through an entity client, they get the scopes associated to that client. Otherwise, they get the default scopes <code>manage:auth</code> and <code>manage:data</code>, which are sufficient to assume a party and get read-write access to the resources in the system.</p> <p>This happens a second time when the user assumes a party. If they assume a party that they own, then there scopes do not change. If they assume a party they are a member of, then they get assigned the intersection of the scopes they had as an entity with the scopes granted by the membership. In other words, they keep the most powerful scopes from their entity while still respecting the limitations set by the party membership. Unassuming the party will reset the scopes to those the user would be granted if logging in as an entity (through the entity client they provided, if they did).</p> <p>This enables administrators to choose what each user can do on behalf of their organisation, with the option of setting a different limit for each party, i.e., set to what extent the user can exploit each responsibility the organisation has in the market. But this also allows the administrators for instance to set up a client so that people can use the API to access the system in a read-only manner, thus reducing the risks of editing sensitive data by mistake when accessing the system programmatically.</p>"},{"location":"technical/auth/#party-type-check","title":"Party type check","text":"<p>The party type check is what is says the tin. It checks that the party type doing the request is allowed to do the action on the resource. This is an additional check added on just a few routes.</p>"},{"location":"technical/auth/#field-level-authorization-fla","title":"Field Level Authorization (FLA)","text":"<p>We are basing FLA on an \"authorization matrix\". It is a table that shows which actions are allowed for each party type on each resource field. The matrix shows what each party type or anonymous users can do on each of the fields of the resource.</p> <p>An example of an authorization matrix is shown below. This table shows that the <code>id</code> field of resource <code>entity</code> is readable by all. The <code>name</code> field is readable by all and can be updated and created by the <code>Service Provider</code>. The <code>number</code> field of resource <code>invoice</code> can be created and read by <code>Service Provider</code>, and read by <code>End User</code>, but <code>System Operator</code> cannot interact with this field at all.</p> Resource Field Service Provider System Operator End User entity id R R R entity name CRU R R invoice number RC R <p>The permission matrix is displayed as a markdown table in the give resources docs page.</p> <p>History resources inherit the authorizations from the main resource.</p>"},{"location":"technical/auth/#resource-level-authorization-rla","title":"Resource Level Authorization (RLA)","text":"<p>Resource level authorization is a way to control access to each resource as a whole. As an example, a service provider should only be able to see the controllable units that are assigned to them.</p> <p>RLA is documented as a set of policies per resource and party type. We document this as a list of textual policies per type, as shown for Service Provider (SP) and System Operator (SO) in the example below.</p> Policy key Policy Status CU-SP001 Read CU where they are SP. Only for the contract period. PARTIAL CU-SP002 Create new CU. PARTIAL CU-SP003 Update CU where they are current SP. PARTIAL Policy key Policy Status CU-SO001 Read and update CU that are connected to AP belonging to SO. PARTIAL <p>We name the policies in the format <code>&lt;Resource&gt;-&lt;Party Type Abbreviation&gt;&lt;Number&gt;</code>. The number is just used as a key during discussions and serves as a way for us to document in the code what policy is being implemented. It is also handy for code search.</p> <p>Status can be one of:</p> <ul> <li><code>PROPOSED</code> means that the policy is proposed but not decided.</li> <li><code>TODO</code> means that the policy is not implemented yet.</li> <li><code>PARTIAL</code> means that the policy is partially implemented.</li> <li><code>DONE</code> means that the policy is fully implemented.</li> </ul> <p>Policies can be in <code>TODO</code> or <code>PARTIAL</code> state either if we have not gotten to it yet or the current platform does not support it (e.g. we are missing a relation/entity).</p>"},{"location":"technical/auth/#time-dependent-rla","title":"Time-dependent RLA","text":"<p>Some combinations of party type and resource have time-dependent access policies. In such cases, instead of controlling access in a binary way (the user can or cannot see the resource based on some condition), access is partially given, on the part of the timeline where the user has the required contract. This means that we need to make sure that no stateful operations happening outside of the allowed partial timeline are visible to the user. This includes, for instance:</p> <ul> <li>former versions of records erased before the start of the allowed timeline;</li> <li>newer versions of records introduced after the end of the allowed timeline;</li> <li>records deleted before the start of the allowed timeline;</li> <li>new records created after the end of the allowed timeline.</li> </ul> <p>A typical example is the service provider (SP) on a controllable unit (CU). The SPs contract on the CU is time-dependent, with a valid from and to date. This in turn means that the SP should only have update privileges to the CU during the contract period, but should see the CU even after the contract has ended. However, an old SP should not be able to see updates to the CU fields done by a new SP, after their contract has ended.</p> <p>Several strategies are in use to implement such constraints, simplifications being possible in some cases depending on which operations are available on the resource.</p>"},{"location":"technical/auth/#method-1-latest-visible-record","title":"Method 1: Latest visible record","text":"<p>When fields on the resource are not time-dependent, we must use audit history to provide access when doing read operations on the main collection/resource. This means that we authorize data stored with record time based on the valid time. Access policies are implemented on both the main resource and its history table. The history view exposed in the API makes a union of both, so we can see all present and past records, all filtered by the policies we want on the resource.</p> <p>Then, we can pick from this collection based on time. For instance, we can see which records were active at a given time in the past by filtering the record time on each line.</p> <p>The simplest filtering rule we can use is to just pick the latest visible record. This ensures that a user who can read the current records will see them instead of historic values, and that conversely, if they cannot see the new ones, they will see historic values presented as current records.</p> <p>Let us take the example of the controllable unit resource where access for service providers is based on CUSP contracts.</p> <p></p> <p>In this example we have 3 records in the data history for the CU. <code>3</code> is the current record. Two service providers, <code>A</code> and <code>B</code>, have had contracts on the CU. <code>B</code> is the current SP. Each of the service providers will see the latest record that overlaps with the end date on their latest contract.</p> <p>So, when each of the service providers does a <code>GET /controllable_unit/{id}</code> they will see different records.</p> <ul> <li><code>A</code> will see record <code>2</code>.</li> <li><code>B</code> will see record <code>3</code>.</li> </ul> <p>Delete operation</p> <p>A drawback of this method is that it does not handle deleted records well. Indeed, on resources with history enabled, when records are deleted, they are removed from the main table but kept in the history table.</p> <p>This means that the latest visible version filtering method takes the version of the record right before deletion and shows it in the main resource, instead of not showing it at all.</p> <p>Therefore, the current method cannot be used for resources supporting a delete operation.</p>"},{"location":"technical/auth/#method-2-as-of-query","title":"Method 2: As-of query","text":"<p>For resources that can be deleted, we introduce a more advanced mechanism. Instead of taking the latest visible version of each record, we take all visible records and only keep those that were active at a certain date, this date being the latest point in the past where the user had a contract authorising read access on the resource. We call it the as-of timestamp, because conceptually this turns queries to the resource into queries as of this specific timestamp.</p> <p>Let us take the example of a resource managed in turn by 4 users: D, A, B, C, and then D again.</p> <p></p> <p>The resource has 3 records. The first one is updated (marked by a colour change), then deleted while B manages the resource; the second one is updated by A; the last one is created by B and never updated.</p> <p>We suppose the current date is 2020-07-09, midnight (marked with a change of background color).</p> <p>We need a definition for the as-of timestamp. Let us take the timeline with all contracts for a given user. Then we can define the as-of timestamp as the latest past point of this timeline, i.e.:</p> <pre><code>min(max(contract_timeline), now)\n</code></pre> <p>This means that this date is the end of A's contract for A, and this timestamp is just now for all others (C and D having contracts in the future). Both timestamps are marked with a dotted line.</p> <p>This means that a query from A will give only 2 records, as R3 was not created when A stopped being in charge. Moreover, it will give R1 in its former state, because the update also happened after their contract came to an end.</p> <p>However, a query from one of the other users will give the latest state, i.e., only R2 and R3, with R2 in its latest version.</p> <p>It is possible to change or refine the definition of the as-of timestamp as needed. For instance, if future contracts (like the ones of C and D) are too far in the future, it may be judged unfair to show the current data of the resource. The current example is simplified by taking contracts that are very close to each other in time.</p>"},{"location":"technical/auth/#user-creation-and-access-control-management","title":"User creation and access control management","text":"<p>To illustrate the auth model (i.e., how entities, parties, scopes, etc., interact with each other), we explain in this section how a organisation is modelelled in the system and how access is autonomously managed by its employees.</p> <p>The following diagram shows the end result of how an example organisation and its employees are represented in the system.</p> <p></p> <p>The four black boxes shows how the oranisation itself is modelled in the system.</p> <ul> <li>An organisation entity representing the organisation</li> <li>An organisation party for administrating the organisation in the system</li> <li>Two parties with the right market roles so that the organisation can perform   the business operations that they need in the FIS</li> </ul> <p>All parties are registered as owned by the organization.</p> <p>The blue and green boxes are persons. Kari is an organisation admin and can add/remove users to the parties that the organisation owns. Ola, Diana and Tor are regular users with varying access to read and manage data on behalf of the two market parties.</p>"},{"location":"technical/auth/#autonomous-access-control-management","title":"Autonomous access control management","text":"<p>One person, in this case Kari, is registered as a admin member of the organisation party by the FIS operator. Once Kari is granted administrator privileges on the organisation, she can add and manage access control for her colleagues without involving the FISO.</p> <p>What we refer to as administrator privileges here is a certain set of scopes on the party membership that makes the employee's person entity a member of the organisation party. The administrator is in charge for the addition of new users and the edition of party memberships and entity clients. The \"administrator scopes\" are therefore the ones sufficient to allow such operations, i.e., the following ones:</p> <ul> <li><code>manage:auth</code> - required for assuming/unassuming a party</li> <li><code>read:data</code> - required for instance to access readable parties</li> <li><code>use:data:entity:lookup</code> - to retrieve/create a technical identifier for the   colleagues they want to add in the system</li> <li><code>manage:data:party_membership</code> - to add/remove their colleagues from the   organisation's parties</li> <li><code>manage:data:entity_client</code> - to manage clients on the organisation and set up   machine access for their colleagues</li> </ul> <p>From the moment an entity is added to the organisation party with administrator scopes, that person can log in and:</p> <ul> <li>Retrieve or create entities associated to their colleagues based on their   person number through entity lookup.</li> <li>Add/remove these entities to/from the various parties the organisation owns in   the system.</li> <li>Add/remove entity clients allowing applications to act as the organisation   itself for some machine-automated operations.</li> </ul> <p>The administrator can also tune the scopes for both party memberships and entity clients, to allow for precise access control management. For instance, they can allow a data analyst in their company to read all the data, but not edit it, because such authorisations are not needed and restricting by default reduces the risk of making a mistake.</p>"},{"location":"technical/auth/#sequence-of-actions","title":"Sequence of actions","text":"<p>Let us show an example of sequence of actions in the system to perform such an autonomous access control management. In this example, FIS operator adds Kari as admin and Kari adds Ola as a regular user for the Energy Supplier party.</p> <p></p>"},{"location":"technical/auth/#user-information-endpoint","title":"User information endpoint","text":"<p>OIDC provides a way to get user information. This is done by calling the <code>/userinfo</code> endpoint with the access token. The response is a JSON object with a set of claims about the user.</p>"},{"location":"technical/identifiers/","title":"Identifiers","text":"<p>Identifiers, or IDs for short, are unique values that are used to identify a specific resource in the real world and/or in an IT system.</p> <p>This document discusses different types of identifiers. What business identifiers are used on the resources are detailed in the documentation for the specific resources.</p>"},{"location":"technical/identifiers/#surrogate-vs-natural-keys","title":"Surrogate vs natural keys","text":"<p>A common way to classify different identifiers (at least in database design) is to call them \"natural\" and \"surrogate\" keys.</p> <p>A natural key is a key that is derived from the data itself. For example, a person's social security number is a natural key for a person. A surrogate key is a key that is generated by the system, and has no meaning outside of the system. For example, a UUID or incremental identifiers is a surrogate key.</p>"},{"location":"technical/identifiers/#multiple-identifiers","title":"Multiple identifiers","text":"<p>It is common for a resource to have multiple identifiers. A metering point might have a metering point ID (GSRN), an internal incremental integer ID in the system and an external-facing UUID. Sometimes it is also useful to store an external systems reference to the same logical/business object.</p>"},{"location":"technical/identifiers/#multiple-types-of-identifiers","title":"Multiple types of identifiers","text":"<p>It is sometimes useful to allow multiple types of identifiers for a resource. A relevant example could be to allow the use of both GLN and EIC-X for parties. In such scenarios, it might be wise to include a type field as part of the identifier.</p> <p>Example:</p> <pre><code>{\n  \"business_id_type\": \"GLN\",\n  \"business_id\": \"0847976000005\"\n}\n</code></pre>"},{"location":"technical/identifiers/#resource-identifiers-incremental-integers","title":"Resource identifiers - Incremental integers","text":"<p>All resources are primarily identified by an incremental integer in the API and system. See the API documentation for more information.</p>"},{"location":"technical/identifiers/#identifier-types","title":"Identifier types","text":"<p>There are lots of different types of identifiers. This section outlines relevant ones for a Norwegian Flexibility Information System.</p>"},{"location":"technical/identifiers/#gs1-standards-gln-gsrn-etal","title":"GS1 Standards - GLN, GSRN et.al","text":"<p>GS1 has quite a few different identifiers. They are typically prefixed with a country and business identifiers. Notable mentions are:</p> <ul> <li>Global Location Number (GLN) - 13 digits - used for identifying parties.   Example: <code>0847976000005</code></li> <li>Global Service Relation Number (GSRN) - 18 digits - used for identifying   metering point. Example: <code>012345678901234560</code></li> <li>GIAI (Global Individual Asset Identifier) - 30 alphanumeric characters - used   for identifying meters.</li> </ul> <p>Core benefits of using GLN and GSRN is that they are globally unique (ensured by GS1) and human-friendly since they include a check digit (no typos!).</p>"},{"location":"technical/identifiers/#energy-identification-codes-eic","title":"Energy Identification Codes (EIC)","text":"<p>EIC is maintained by ENTSO-E and can be used to identify market participants, areas, measuring points, resource objects, tie-lines, location and substations.</p> <p>It's 16 alphanumeric characters including issuing office, type and check digit. Used for grids (MGA, MBA) in imbalance settlement.</p> <p>Example: <code>10X1001A1001A38Y</code></p>"},{"location":"technical/identifiers/#universally-unique-identifier-uuid","title":"Universally Unique Identifier (UUID)","text":"<p>UUID provides globally unique identifiers and has its own URN namespace <code>urn:uuid</code>. There are many different versions. Both v4 and v7 could be good choices for us.</p> <p>Example: <code>55840dbe-0131-40ae-9077-e78b2a8c1455</code></p> <p>Common Information Model (CIM) promotes the use of UUIDs as identifiers for the IdentifiedObject Master resource identifier (mRID).</p>"},{"location":"technical/identifiers/#universally-unique-lexicographically-sortable-identifier-ulid","title":"Universally Unique Lexicographically Sortable Identifier (ULID)","text":"<p>ULID are kind of like UUIDs but they are shorter, case-insensitive, URL safe and and sortable.</p> <p>Example: <code>01ARZ3NDEKTSV4RRFFQ69G5FAV</code></p>"},{"location":"technical/identifiers/#incremental-integers","title":"Incremental integers","text":"<p>A very common way to generate identifiers in a system is go pick the next number from a sequence.</p> <p>This is simple but only unique in the system that generates the identifier unless paired with a guaranteed unique prefix.</p> <p>Example: <code>1212</code>.</p>"},{"location":"technical/openapi-schemas/","title":"Structure of JSON schemas in the OpenAPI documentation","text":"<p>The JSON schemas describing the resources in the OpenAPI documentation are generated mainly from a custom YAML file describing the resources, with the help of a script, so that we first maintain files expressed at a higher level than the OpenAPI specification format.</p> <p>We try as much as possible not to repeat ourselves in this document. In particular, fields of a given resource should be defined only once, and if fields are in common between several API endpoints, this should be reflected in the use of inclusion between the underlying JSON schemas.</p> <p>This documentation helps the developer understand how the JSON schemas are structured in the generated OpenAPI specification.</p>"},{"location":"technical/openapi-schemas/#primer","title":"Primer","text":"<p>In our resource YAML file, fields can be marked namely in the following manners:</p> Marker Description <code>x-no-update</code> Non-updatable field. Used for stuff that can/must be given on create, but that cannot be changed after. <code>x-</code> marker because this is non-standard OpenAPI and is just used during the generation process. <code>readOnly</code> Read-only field. Used for non-updatable fields that cannot be created by the API clients (e.g., automatically generated surrogate keys / UUIDs). <code>nullable</code> Nullable field. <code>default</code> Field with a default value. <p>In addition, we define required fields as the following:</p> <p>NOT read only AND NOT nullable AND NO default value AND NOT explicitely marked <code>required: false</code></p> <p>This allows not having to manually specify a <code>required</code> attribute everywhere, and rather infer it from more meaningful information that we make explicit in our resource YAML file.</p>"},{"location":"technical/openapi-schemas/#json-schema-structure","title":"JSON schema structure","text":"<p>With the previous information, we can now show the structure of JSON schemas generated by our script:</p> <p></p> Schema OpenAPI name Contains Update <code>[resource]_update_request</code> All properties except the non-updatable and read-only ones Create data <code>[resource]_create_data</code> Update schema + non-updatable fields Create <code>[resource]_create_request</code> Create data schema + marking required fields Data <code>[resource]</code> Create data schema + read-only fields (including audit) Response <code>[resource]_response</code> Data schema + marking all non-nullable fields as required <p>Sometimes, there is no create operation for the resource. In such cases, we simply do not generate the Create schema, so that the OpenAPI linter does not reject our generated OpenAPI specification because of unused schemas. We still generally keep the base structure with Update and Create data so the generation is more uniform across all resources.</p> <p></p>"},{"location":"technical/resource-synchronisation/","title":"Resource synchronisation from external sources","text":"<p>One of the roles of the FIS is to consolidate data, but not all information is originally created there. Some of the data are sourced externally, and in this case, the FIS is only responsible for gathering them at the same place. Interdependencies among our resources (such as foreign key constraints) make bulk updates impossible to run without extra care to avoid introducing too many inconsistencies.</p> <p>We currently implement this with staging tables as intermediate landing points for background synchronisation processes which regularly fetch updated data from the external sources. The updates are then performed manually by the users, and we rely on notices to alert the appropriate users to review and resolve inconsistencies.</p>"},{"location":"technical/time-series-design/","title":"Time Series Service Design","text":"<p>This document outlines details about the time series functionality in the flexibility register.</p> <p>Note</p> <p>This functionality is not yet implemented. It is a design that we will use in further development of use-cases related to time series data.</p>"},{"location":"technical/time-series-design/#introduction","title":"Introduction","text":"<p>Given our investigations into time series data, we believe that a flexibility information system needs to store and distribute time series data. The first use cases that we are thinking of looking at are:</p> <ol> <li>calculate and report imbalance settlement adjustments to eSett</li> <li>enable end users to securely access their data in compliance with GDPR</li> </ol> <p>Note</p> <p>It is not given that FIS will become a data administrator for timeseries other than accounting meter data. We do not know exactly what data will flow through FIS. This design is therefore a light-weight, general purpose starting point and conceptual design for a time series service using our existing stack.</p>"},{"location":"technical/time-series-design/#design-goals","title":"Design goals","text":"<ul> <li>a general purpose time series design</li> <li>efficient storage of time series data in PostgreSQL<ul> <li>we need to learn more about the usage patterns and functional requirements   related to time series data before we should consider other data store(s)</li> <li>it will also likely take quite some time before we have enough data to   warrant a change</li> </ul> </li> <li>decouple time series as its own service/module for easier evolvement and   possible replacement</li> </ul>"},{"location":"technical/time-series-design/#requirements","title":"Requirements","text":"<ul> <li>handling of both point and interval time series</li> <li>multiple types of time series data<ul> <li>observations - metered and measured values</li> <li>forecasts - baselines</li> <li>schedules - production and consumption plans</li> <li>prices - spot and balancing prices</li> </ul> </li> <li>updateable time series - to correct errors or update baselines closer to   the operation time</li> <li>bi-temporal storage and audit - to support corrections and reconciliation</li> <li>prevent duplication of time series - to help avoid \"double registration\" of   assets in the system</li> <li>support multiple time series for the same level and origin - to allow testing   multiple baselines concurrently</li> <li>invidual access - no current use cases for large scale aggregation or   calculations similar to settlement jobs in Elhub</li> </ul>"},{"location":"technical/time-series-design/#limitations","title":"Limitations","text":"<ul> <li>The OCI PostgreSQL service does not support   extensions   that allow for efficient column-major storage, such as Citus and TimescaleDB.   We are therefore forced to use the row-major storage if we want to use this   service.</li> </ul>"},{"location":"technical/time-series-design/#non-requirements","title":"Non-Requirements","text":"<ul> <li>no completeness check upon storage (\"Channel Milestione\" in Elhub term) -   completeness checks will be handled by the consumer</li> <li>no period volumes</li> </ul>"},{"location":"technical/time-series-design/#possible-future-needs","title":"Possible future needs","text":"<ul> <li>calculations or formulas - the design should not shut out future   calculations or formulas, but they are not in scope for the initial design</li> </ul>"},{"location":"technical/time-series-design/#inspiration","title":"Inspiration","text":"<p>The following list contains some names and concepts from some reference systems we have looked at when thinking about time series data.</p> <ul> <li>Elhub<ul> <li>MeasurementDefinition and IntervalVolume on MeteringPoint</li> </ul> </li> <li>CIM<ul> <li>IntervalReading/MeterReading of ReadingType on Channel of Register of Meter</li> <li>MeasurementValue on Measurement on PowerSystemResource and Terminal</li> </ul> </li> <li>NODES MeteringHub<ul> <li>MeterReadings on Asset, Accounting Point, Portfolio</li> </ul> </li> <li>Shyft<ul> <li>\"A time series in Shyft is considered to be a function of time, f(t) -&gt;   float.\"</li> </ul> </li> </ul>"},{"location":"technical/time-series-design/#design","title":"Design","text":"<p>We leverage the existing stack and way of doing things</p> <ul> <li>PostgreSQL for storage</li> <li>PostgREST to expose our restful API, but on a new path/api</li> <li>RLS for authentication</li> </ul> <p>We model the timeseries as three resources.</p> <ul> <li><code>timeseries</code> - the time series identifier limited metadata<ul> <li>will include the external identifier for the time series, partially to avoid   duplication of time series in the system</li> </ul> </li> <li><code>timeseries_type</code> - a finite set of types of time series data. To avoid   duplication information in the <code>timeseries</code> table. The fields are the   \"attributes\" of the time series, not their \"usage\". Meaningthat we will e.g.   record the unit, but not wether it is a schedule or metered value.</li> <li><code>timeseries_value</code> - the values of the time series</li> </ul>"},{"location":"technical/time-series-design/#api","title":"API","text":"<p>The relevant API actions will be</p> <ul> <li><code>POST /timeseries</code> - create a new time series metadata</li> <li><code>GET /timeseries</code> - list all time series metadata</li> <li><code>GET /timeseries/{id}</code> - get a specific time series metadata</li> <li><code>PATCH /timeseries/{id}</code> - update a time series metadata</li> <li><code>GET /timeseries_value?timeseries_id={id}</code> - list all values for a time series</li> <li><code>GET /timeseries_value?timeseries_id={id}&amp;time={time}</code> - get a specific value</li> <li><code>POST /timeseries_value</code> - add a timeseries value</li> <li><code>PATCH /timeseries_value?timeseries_id={id}&amp;time={time}</code> - update a value for   a time series</li> <li><code>DELETE /timeseries_value?timeseries_id={id}&amp;time={time}</code> - delete a value   for a time series</li> </ul>"},{"location":"technical/time-series-design/#events-or-distribution","title":"Events or distribution","text":"<p>We can use our existing event system, but need to figure out a way to add a reasonable amount of events. Cannot do event-per-value.</p>"},{"location":"technical/time-series-design/#history-for-bi-temporal-storage","title":"History for bi-temporal storage","text":"<p>We will use the existing history concept and our <code>pg_audit</code> package to store historic time series data.</p>"},{"location":"technical/time-series-design/#efficient-storage-of-values","title":"Efficient storage of values","text":"<p>To store the time series as efficiently as possible, we can use two strategies:</p> <ul> <li>store as little as possible</li> <li>use   column tetris   to ensure efficient storage. Se also   On Rocks and Sand</li> </ul> <p>The biggest saving we can have is to avoid storing time ranges both for the valid time of the interval and record time. We only store the record time and the valid time start as a single <code>tstz</code>.</p> <p>Our <code>timeseries_value</code> table will look something like this.</p> Column Name Type Nullable Size Description - Row header 24 - timeseries_id bigint No 8 Unique identifier for the time series time timestamptz No 8 The time of the value recorded_by bigint No 8 The identity that recorded the value recorded_at timestamptz No 8 The time the value was recorded value bigint No 8 The value of the time series quality smallint Yes 2 The quality of the value validation_code smallint Yes 2 The history id of the value estimation_code smallint Yes 2 Whether the value is an estimation - padding 2 <p>At a grand total of 80 bytes per row. It does not seem like much but storing a measly 100k timeseries with an interval of 15 over a year will take up over 260 GB of storage.</p> <p>[!INFO]</p> <p>A <code>tstzrange</code> \u2014 range of timestamp with time zone - uses a variable lenght of storage depending on the presence of the lower and upper bounds. If both bounds are present.</p> <ul> <li>No bounds: 6 byte</li> <li>Lower bound only: 14 byte</li> <li>Upper bound only: 22 byte</li> </ul> <p>Notice that we are not including an <code>id</code> column. This allows us to save 8 bytes per row, plus avoid having the automatically created primary key index. What will we do instead? See below.</p>"},{"location":"technical/time-series-design/#indexing-and-primary-key","title":"Indexing and primary key","text":"<p>We will use a covering index on the time series table, to speed up read and update operations. By making it a unique index we can use it as a primary key.</p> <pre><code>CREATE UNIQUE INDEX timeseries_value_pkey\nON timeseries_value (timeseries_id, time)\nINCLUDE (value);\n\nALTER TABLE timeseries_value\nADD CONSTRAINT timeseries_value_pkey\nPRIMARY KEY USING INDEX timeseries_value_pkey;\n</code></pre> <p>Why?</p> <ol> <li>Going to the heap takes time/io - including value is low overhead, but   potentially saves a lot of time.</li> <li>Indexes take up space and time to maintain. Using one index for both   the primary key and the covering index saves space and time.</li> </ol>"},{"location":"technical/time-series-design/#numeric-vs-integer","title":"Numeric vs integer","text":"<p>The jury is out. Int is a good choice for exactness, but numeric is good for its <code>varlena</code> storage.</p> <p>PostgreSQL docs on numeric states</p> <p>The type numeric [...] is especially recommended for storing monetary amounts and other quantities where exactness is required. Calculations with numeric values yield exact results where possible, e.g., addition, subtraction, multiplication. However, calculations on numeric values are very slow compared to the integer types, or to the floating-point types described in the next section.</p>"},{"location":"technical/time-series-design/#partitioning","title":"Partitioning","text":"<p>Possibly weekly. Will be decided at a later time, when we have a better understanding of the volumes and access patterns.</p>"},{"location":"technical/time-series-design/#integration","title":"Integration","text":"<p>The integration with the rest of the system will happen as shown below. This is a conceptual drawing of the integration. The main point is that the time series service will not reference the main FIS module, only the other way around. This is to decouple and make it independent of the FIS application.</p> <p>When we create our data model in FIS, we will reference the time series by id. When seen from the time series service, it will not have any knowledge of what the time series are used for, just what they look like and their values.</p> <p>The time series have very different technical requirements than the flexibility information system, such as volume and access patterns. It is also likely that it demands a different pattern for integration and technical foundation than the rest of the FIS.</p> <p></p> <p>Future external interfaces might also include</p> <ul> <li>bulk endpoints for large datasets - with asynchronous processing</li> <li>mqtt or simliar interfaces for real-time updates</li> </ul>"},{"location":"technical/time/","title":"Time","text":"<p>This section describes how we handle time in the Flexibility Information System.</p>"},{"location":"technical/time/#clusivity-in-intervals","title":"Clusivity in intervals","text":"<p>In general, all time ranges are half-open intervals. This means that the start time is inclusive and the end time is exclusive. This is also known as left-closed right-open.</p> <p>We follow the notation used in the PostgreSQL range type. This means that the convention we follow is <code>[start, end)</code>. <code>null</code> means unbounded, and only the upper bound can be unbounded.</p>"},{"location":"technical/time/#bi-temporal-data","title":"Bi-temporal data","text":"<p>For a good primer read this article on bi-temporal history on the Martin Fowler blog. We are using the bi-temporal data model to store and make available the data in the flexibility information system. With that model, we can answer questions like:</p> <p>Who did we have as the service provider for controllable unit X on 2021-01-14 as of 2022-03-01?</p> <p>Bi-temporal only when needed</p> <p>Not all data in the system is bi-temporal. We generally provide history (record time) on all resources, but only some data (that needs it) have valid time timeline.</p> <p>The following sections outline how we think about and implement bi-temporal data.</p>"},{"location":"technical/time/#record-time","title":"Record time","text":"<p>One of the requirements in NCDR is that the Flexibility Information System should be able to provide \"historic\" data for the resources in the system. This means that we need to be able to provide data that was valid at a certain point in time. We understand this to be related to the append-only history of when the data was recorded, updated and replaced in the system. In temporal data modelling we call this time axis record time. A common concept related to record time is to be able to provide data as of a point in time.</p> <p>Other names for record time</p> <p>There are other names for this time axis, such as transaction or system time.</p> <p>Record time is typically implemented using a time range.</p> Bound Clusivity Name Alt name Lower Inclusive Record time start Updated at Upper Exclusive Record time end Replaced at"},{"location":"technical/time/#valid-time","title":"Valid time","text":"<p>The other time axis we deal with is valid time. This can for example be when a contract is valid, or when a party is a member of a market. This time axis is related to the timeline of the data itself. When we say that something is time-dependent, we talk about the valid time timeline.</p> <p>Other names for valid time</p> <p>This time axis is also commonly referred to as application, actual, business or effective time.</p> <p>Valid time is typically implemented using a time range.</p> Bound Clusivity Name Alt name Lower Inclusive Valid time start Valid from Upper Exclusive Valid time end Valid to <p>Midnight alignment</p> <p>We represent valid time as midnight-aligned. This constraint allows planning and performing operations more easily. However, we still store full timestamps for uniformity and to allow exceptional updates. This means that insert/update operations on the API should always have their valid time values aligned with the Norwegian midnight.</p>"},{"location":"technical/time/#frozen-timeline","title":"Frozen timeline","text":"<p>The timeline of some contracts can be frozen for some roles in the system. This means that the part of the past that is older than a given time interval from now is a frozen past where nothing can be added or edited.</p> <p>The diagram below shows the example of a contract resource whose timeline is frozen after 6 days. Frozen contracts or parts of contracts are shown in blue, and non-frozen in green. Orange is used for errors / unacceptable contracts.</p> <p></p> <p>The freeze time is midnight-aligned, meaning that the exact freeze time is the nearest Norwegian midnight before the freeze interval computed from now. If we consider an operation being made on 17.07 (highlighted in green in the diagram), the freeze time will be 6 days before, that is 11.07, at Norwegian midnight. The exact freeze time is not frozen, so contracts can start there.</p> <p>Creating a new contract (number <code>4</code>) in the past can only be done in the non-frozen past. In the diagram, only the second proposal (<code>4''</code>) is acceptable, both others overlapping with frozen time partially or fully.</p> <p>The frozen past cannot be edited, meaning that updating a contract (number <code>5</code>) cannot change its start date if it is already in this frozen past. The two first updates in the diagram (<code>5'</code> and <code>5''</code>) are therefore invalid, even though the second one puts the contract in the non-frozen past. The start date of contract <code>5</code> is simply frozen and cannot move.</p> <p>The end date of this partially frozen contract can be moved anywhere in the non-frozen past, so the third update (<code>5'''</code>) is invalid, but the last one is.</p>"},{"location":"technical/time/#timeline-window","title":"Timeline window","text":"<p>For some contracts, insertion can be restricted to a fixed window from the current time. This means that new contracts can start only in this interval.</p> <p>The window is midnight-aligned, meaning that start and end times for the window are aligned to the nearest previous Norwegian midnight. The start time is inclusive but the end time is exclusive. The timeline window check only makes sure the contract starts between those bounds, but does not check the exact time of the contract, as this is a separate constraint. The current check should work with all kinds of contracts, midnight-aligned or not.</p> <p>The diagram below shows the example of a contract resource with a timeline window of one week placed one week ahead of time.</p> <p></p> <p>In this example, we consider operations made on 30.06. This means the window starts on 07.07 Norwegian midnight and lasts for one week, that is, it ends on 14.07 Norwegian midnight. The start date is inclusive so contracts can start on 07.07, but the end date is exclusive, so no contract can start on 14.07.</p> <p>The three first contracts are therefore invalid, even if number <code>2</code> starts at midnight on 14.07, and the three last ones are valid, and number <code>5</code> can start as soon as midnight on 07.07. The end date of these contracts does not matter.</p>"},{"location":"technical/time/#timezones","title":"Timezones","text":"<p>In the context of storing datetime-related information, a timestamp only has meaning if it is considered in a given timezone.</p>"},{"location":"technical/time/#storage-format","title":"Storage format","text":"<p>Datetime data is stored in the system in the standard ISO 8601 format (date + time + timezone), so that information in the database is complete and does not depend on any user configuration.</p>"},{"location":"technical/time/#time-in-the-user-interface","title":"Time in the user interface","text":"<p>As the Flexibility Information System is expected to only handle data related to the Norwegian flexibility market, it makes sense to use Norwegian time. This means both displaying dates in Norwegian format (<code>DD.MM.YYYY</code> and 24-hour time) and in the Norwegian timezone (CET in winter, CEST in summer).</p> <p>However, as the system is only a prototype, we do not want to roll our own mechanism to compute timezone offsets and we keep things simple. Therefore, we assume that our test users will use the software from the area using the Norwegian timezone, so times are displayed in the browser's local timezone. If a user is accessing the system from abroad, it is advised to change the browser's timezone to the Norwegian one, so that the data displayed keeps making sense.</p> <p>We also use default datetime input components that do not handle the specificities of seasonal transitions between time offsets happening in Norway (gap of an hour when transitioning from winter to summer, duplication of an hour when transitioning from summer to winter). Any information entered around the times these transitions happen is not particularly checked and we are relying on whatever default behaviour of the browser's datetime API. This may change in a production setting but we are delaying this effort to later.</p>"}]}